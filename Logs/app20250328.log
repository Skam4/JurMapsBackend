2025-03-28 22:07:34.171 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-28 22:07:34.511 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-28 22:07:34.659 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-28 22:07:34.661 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 22:07:34.661 +01:00 [INF] Hosting environment: Development
2025-03-28 22:07:34.662 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-28 22:07:38.132 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:07:42.265 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-28 22:07:42.366 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 22:07:42.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4241.5592ms
2025-03-28 22:07:42.433 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-28 22:07:43.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 938.4404ms
2025-03-28 22:07:45.434 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:07:49.503 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 22:07:49.504 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4069.9052ms
2025-03-28 22:07:52.527 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:07:56.587 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 22:07:56.587 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4060.1462ms
2025-03-28 22:07:59.612 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:08:09.617 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 22:08:09.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10006.7307ms
2025-03-28 22:08:12.661 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:08:22.684 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 22:08:22.685 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10023.5797ms
2025-03-28 22:08:25.722 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 22:08:27.467 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-28 22:08:27.476 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-28 22:08:27.479 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 1757.1988ms
2025-03-28 22:08:28.891 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:08:28.915 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:28.918 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 27.4238ms
2025-03-28 22:08:28.924 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:08:28.931 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:28.951 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:08:28.952 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:28.953 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9126ms
2025-03-28 22:08:28.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:08:28.956 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:29.230 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:29.230 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:29.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:29'.
2025-03-28 22:08:29.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:29'.
2025-03-28 22:08:29.278 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:29.278 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:29.349 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:29.349 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:39.484 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:39.592 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 10239.0731ms
2025-03-28 22:08:39.594 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:39.597 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 10672.8067ms
2025-03-28 22:08:39.649 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:08:39.651 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:39.653 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.3440ms
2025-03-28 22:08:39.654 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:08:39.655 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:39.657 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:39.662 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:39'.
2025-03-28 22:08:39.663 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:39.664 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:39.668 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:08:39.669 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:39.670 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5662ms
2025-03-28 22:08:39.678 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:39.681 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.5116ms
2025-03-28 22:08:39.682 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:39.684 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.1223ms
2025-03-28 22:08:42.529 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:08:42.666 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:42.672 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:08:42.673 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13321.055ms
2025-03-28 22:08:42.674 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:42.675 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:42.676 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:42.682 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
2025-03-28 22:08:42.683 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:42.684 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:42.685 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 13730.0973ms
2025-03-28 22:08:42.706 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:08:42.710 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:42.712 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 25.5123ms
2025-03-28 22:08:42.714 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:42.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.5394ms
2025-03-28 22:08:42.729 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:08:42.730 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:42.731 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:42.735 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
2025-03-28 22:08:42.736 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:42.737 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:42.741 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:42.742 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.134ms
2025-03-28 22:08:42.744 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:08:42.745 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 15.9485ms
2025-03-28 22:08:42.756 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:08:42.757 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:08:42.759 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:08:42.763 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:08:42'.
2025-03-28 22:08:42.764 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:42.765 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:08:42.818 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:08:42.821 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:08:42.823 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 56.0292ms
2025-03-28 22:08:42.824 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:08:42.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 68.3805ms
2025-03-28 22:27:32.393 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:27:32.396 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:32.401 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:32'.
2025-03-28 22:27:32.403 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:32.427 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:32.435 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:32.440 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 10.6101ms
2025-03-28 22:27:32.441 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:32.442 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 50.0419ms
2025-03-28 22:27:33.480 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:27:33.481 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:33.481 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8754ms
2025-03-28 22:27:33.483 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:33.484 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:33.487 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:33.491 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:33'.
2025-03-28 22:27:33.492 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:33.494 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:33.498 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:33.501 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.4035ms
2025-03-28 22:27:33.502 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:33.503 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.8809ms
2025-03-28 22:27:34.713 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:27:34.724 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:34.732 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
2025-03-28 22:27:34.734 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:34.742 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:34.796 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:27:34.806 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:34.882 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.907 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
2025-03-28 22:27:34.917 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.919 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:34.924 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:34.924 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:34.933 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.936 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 188.5834ms
2025-03-28 22:27:34.939 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:34.940 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 226.9062ms
2025-03-28 22:27:34.941 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.946 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:34.948 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 22.0724ms
2025-03-28 22:27:34.949 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:34.950 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 154.1655ms
2025-03-28 22:27:34.959 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:27:34.961 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:34.968 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:34'.
2025-03-28 22:27:34.970 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:34.973 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:34.982 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.991 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:34.997 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:35.000 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 23.949ms
2025-03-28 22:27:35.001 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:27:35.007 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 47.0453ms
2025-03-28 22:27:35.057 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-28 22:27:35.060 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-28 22:27:35.062 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-28 22:27:35.065 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.120 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.062 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-28 22:27:35.137 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:35.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:27:35.171 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.172 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 114.5641ms
2025-03-28 22:27:35.174 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 114.1439ms
2025-03-28 22:27:35.175 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.181 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 119.4963ms
2025-03-28 22:27:35.213 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:27:35.206 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-28 22:27:35.209 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 147.1680ms
2025-03-28 22:27:35.176 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.179 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.251 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-28 22:27:35.251 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.253 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.203 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-28 22:27:35.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-28 22:27:35.255 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.258 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 93.3575ms
2025-03-28 22:27:35.260 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.266 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:35.268 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.258 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.259 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 45.6866ms
2025-03-28 22:27:35.260 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.290 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 39.1715ms
2025-03-28 22:27:35.289 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-28 22:27:35.281 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.282 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.284 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.285 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-28 22:27:35.291 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-28 22:27:35.296 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.294 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.295 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:35.297 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.302 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.306 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 16.6997ms
2025-03-28 22:27:35.307 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.309 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-28 22:27:35.300 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.312 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.306 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.313 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.317 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.319 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.321 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:35.349 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.349 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.356 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:35.362 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.350 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.360 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 22:27:35.349 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 34.3081ms
2025-03-28 22:27:35.370 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:35.363 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.378 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.376 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 239.3020ms
2025-03-28 22:27:35.367 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.360 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:35.382 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.385 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 22:27:35.389 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.390 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:35.390 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.393 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.408 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:35.405 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:35.420 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:35.413 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-28 22:27:35.392 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 41.0977ms
2025-03-28 22:27:35.420 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.420 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 36.9416ms
2025-03-28 22:27:35.428 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 22:27:35.424 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 8.5386ms
2025-03-28 22:27:35.433 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 22:27:35.428 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:35.421 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.430 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 138.5796ms
2025-03-28 22:27:35.453 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:35'.
2025-03-28 22:27:35.435 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 126.1870ms
2025-03-28 22:27:35.441 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-28 22:27:35.427 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:35.441 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-28 22:27:35.428 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.464 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 45.4785ms
2025-03-28 22:27:35.466 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:35.468 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.469 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 202.8266ms
2025-03-28 22:27:35.474 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.476 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:35.479 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:35.486 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 129.8447ms
2025-03-28 22:27:35.482 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 40.4298ms
2025-03-28 22:27:35.487 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 43.4226ms
2025-03-28 22:27:35.486 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-28 22:27:35.490 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 141.5419ms
2025-03-28 22:27:35.494 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:35.495 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.488 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-28 22:27:35.496 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-28 22:27:35.499 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.500 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-28 22:27:35.504 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.9768ms
2025-03-28 22:27:35.502 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 283.8160ms
2025-03-28 22:27:35.500 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.505 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 22:27:35.508 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 22:27:35.508 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:35.511 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-28 22:27:35.511 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.515 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.518 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.520 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 115.3152ms
2025-03-28 22:27:35.526 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 222.1415ms
2025-03-28 22:27:35.529 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 210.0408ms
2025-03-28 22:27:35.535 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.525 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.532 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-28 22:27:35.538 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 332.3612ms
2025-03-28 22:27:35.537 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-28 22:27:35.568 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:35.565 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.567 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 364.0471ms
2025-03-28 22:27:35.565 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:35.569 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.574 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 51.1304ms
2025-03-28 22:27:35.580 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:35.581 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:35.581 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-28 22:27:35.586 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 42.7027ms
2025-03-28 22:27:35.587 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 101.1618ms
2025-03-28 22:27:35.590 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-28 22:27:35.591 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 22:27:35.593 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 105.5307ms
2025-03-28 22:27:35.596 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:35.599 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 15.5314ms
2025-03-28 22:27:35.600 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 22:27:35.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 64.4619ms
2025-03-28 22:27:40.507 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:27:40.508 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:40.509 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2357ms
2025-03-28 22:27:40.511 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:40.511 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:40.513 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:40.517 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:40'.
2025-03-28 22:27:40.519 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:40.521 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:40.526 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:40.528 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2966ms
2025-03-28 22:27:40.530 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:40.530 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:27:40.531 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.9307ms
2025-03-28 22:27:40.531 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:40.533 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6965ms
2025-03-28 22:27:40.535 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:40.536 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:40.537 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:40.541 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:40'.
2025-03-28 22:27:40.542 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:40.543 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:40.548 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:40.552 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:40.553 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.287ms
2025-03-28 22:27:40.555 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:40.556 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 21.5083ms
2025-03-28 22:27:43.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:27:43.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:27:43.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:27:43.585 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.587 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.587 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.587 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:27:43.588 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:27:43.589 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:27:43.594 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.595 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.596 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.637 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:27:43.639 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:27:43.642 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.647 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 48.6829ms
2025-03-28 22:27:43.647 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-28 22:27:43.650 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:27:43.650 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:27:43.650 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-28 22:27:43.654 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 70.1415ms
2025-03-28 22:27:43.653 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.660 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:43.667 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.670 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:27:43.671 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.676 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 79.7711ms
2025-03-28 22:27:43.678 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:27:43.679 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.670 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:27:43.680 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:43.681 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.691 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:27:43.681 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:27:43.704 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 120.7396ms
2025-03-28 22:27:43.697 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
2025-03-28 22:27:43.684 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.698 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:27:43.698 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:43.703 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.719 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.723 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:27:43.721 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.734 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:27:43.728 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:27:43.723 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:27:43.683 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 81.2689ms
2025-03-28 22:27:43.712 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:43.737 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:43.753 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:27:43.745 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.746 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:27:43.762 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 178.7996ms
2025-03-28 22:27:43.740 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.757 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
2025-03-28 22:27:43.760 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.761 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 45.566ms
2025-03-28 22:27:43.749 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:43.766 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 40.5291ms
2025-03-28 22:27:43.768 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:43.770 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 27.0733ms
2025-03-28 22:27:43.771 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:27:43.773 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:27:43.774 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:43.775 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:27:43.775 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.777 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 127.7765ms
2025-03-28 22:27:43.782 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 91.4163ms
2025-03-28 22:27:43.787 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:43.788 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:43.784 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 11.8588ms
2025-03-28 22:27:43.779 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 101.0108ms
2025-03-28 22:27:43.791 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.791 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.792 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:43.795 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:43.794 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5314ms
2025-03-28 22:27:43.795 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:43.796 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 136.1523ms
2025-03-28 22:27:43.800 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
2025-03-28 22:27:43.801 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:43.801 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:43.803 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:43.804 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 105.7883ms
2025-03-28 22:27:43.805 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:43.805 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:43.810 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:43'.
2025-03-28 22:27:43.813 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:43.813 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:43.814 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.816 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5385ms
2025-03-28 22:27:43.817 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:43.818 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.6817ms
2025-03-28 22:27:43.825 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:43.829 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:43.830 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.3126ms
2025-03-28 22:27:43.833 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:43.834 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.4998ms
2025-03-28 22:27:57.142 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/19 - -
2025-03-28 22:27:57.144 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/19 - -
2025-03-28 22:27:57.145 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.147 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.148 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:27:57.148 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/19 - -
2025-03-28 22:27:57.148 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/19 - - - 204 - - 4.9479ms
2025-03-28 22:27:57.153 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/19 application/json -
2025-03-28 22:27:57.153 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.154 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:27:57.154 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.155 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/19 - - - 204 - - 7.4253ms
2025-03-28 22:27:57.160 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:27:57.166 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:27:57.300 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:27:57.301 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.301 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.6084ms
2025-03-28 22:27:57.303 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:57.305 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.306 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.312 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.313 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:57.314 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:57.319 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.321 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.9285ms
2025-03-28 22:27:57.322 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:57.326 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.8708ms
2025-03-28 22:27:57.355 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:27:57.375 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:57.402 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:57.410 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 250.8277ms
2025-03-28 22:27:57.412 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/19 - -
2025-03-28 22:27:57.420 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:27:57.423 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/19 - - - 200 - application/json;+charset=utf-8 281.6334ms
2025-03-28 22:27:57.423 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.426 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:27:57.427 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:27:57.441 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.427 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:27:57.451 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 23.7427ms
2025-03-28 22:27:57.466 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:57.472 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:27:57.476 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.481 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:57.486 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.488 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:27:57.501 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.502 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:27:57.511 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:57.517 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:57.516 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.511 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 58.1826ms
2025-03-28 22:27:57.524 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.532 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:57.544 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:27:57.574 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/19 - - - 200 - application/json;+charset=utf-8 161.7714ms
2025-03-28 22:27:57.573 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.573 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - -
2025-03-28 22:27:57.565 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.579 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 55.8193ms
2025-03-28 22:27:57.580 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.582 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:57.583 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:27:57.584 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:57.584 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - - - 204 - - 11.6445ms
2025-03-28 22:27:57.585 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:57.586 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.587 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:27:57.587 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 121.1611ms
2025-03-28 22:27:57.592 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.593 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.594 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.601 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.602 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.604 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.9532ms
2025-03-28 22:27:57.604 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:57.611 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.612 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:27:57.613 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:27:57.614 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:57.615 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 113.2649ms
2025-03-28 22:27:57.619 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:57.625 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:27:57.626 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.628 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.631 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 8.8269ms
2025-03-28 22:27:57.632 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.2487ms
2025-03-28 22:27:57.633 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:57.633 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:27:57.634 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:27:57.635 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 48.0702ms
2025-03-28 22:27:57.638 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/19/3 - -
2025-03-28 22:27:57.640 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 56.9146ms
2025-03-28 22:27:57.642 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:27:57.642 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.649 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:27:57'.
2025-03-28 22:27:57.650 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:27:57.652 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:57.654 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:27:57.657 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:27:57.660 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.661 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.6919ms
2025-03-28 22:27:57.663 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:27:57.665 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 31.9863ms
2025-03-28 22:27:57.677 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:27:57.681 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.682 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 22.9125ms
2025-03-28 22:27:57.684 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/19/3 - -
2025-03-28 22:27:57.684 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:27:57.685 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:57.686 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/19/3 - - - 200 - application/json;+charset=utf-8 47.4271ms
2025-03-28 22:27:57.687 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:27:57.688 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:27:57.693 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:27:57.697 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:57.697 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 7.6781ms
2025-03-28 22:27:57.698 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:27:57.700 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/19/3 - - - 200 - application/json;+charset=utf-8 16.0056ms
2025-03-28 22:27:58.404 +01:00 [INF] Executed DbCommand (1,166ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:27:58.471 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:58.496 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 1328.0927ms
2025-03-28 22:27:58.497 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:27:58.497 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/19 application/json -
2025-03-28 22:27:58.498 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/19 application/json - - 200 - application/json;+charset=utf-8 1345.0116ms
2025-03-28 22:27:58.499 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:27:58.500 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:27:58.501 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:27:58.517 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:27:58.521 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:27:58.522 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 20.0163ms
2025-03-28 22:27:58.523 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:27:58.524 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/19 application/json - - 200 - application/json;+charset=utf-8 26.7725ms
2025-03-28 22:30:26.783 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:30:26.784 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:26.785 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.3779ms
2025-03-28 22:30:26.787 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:30:26.789 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:26.791 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:30:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:30:26.796 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:30:26'.
2025-03-28 22:30:26.798 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:30:26.799 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:30:26.803 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:30:26.805 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4574ms
2025-03-28 22:30:26.806 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:30:26.807 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.9892ms
2025-03-28 22:30:26.819 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:30:26.820 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:26.821 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7533ms
2025-03-28 22:30:26.824 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:30:26.825 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:26.827 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:30:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:30:26.832 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:30:26'.
2025-03-28 22:30:26.834 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:30:26.835 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:30:26.842 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:30:26.847 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:30:26.849 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.102ms
2025-03-28 22:30:26.850 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:30:26.851 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.7102ms
2025-03-28 22:30:43.407 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/map/addlike/19 - -
2025-03-28 22:30:43.408 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:43.409 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/map/addlike/19 - - - 204 - - 1.5553ms
2025-03-28 22:30:43.410 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/map/addlike/19 application/json 12
2025-03-28 22:30:43.411 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:43.411 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.AddLike (JurMaps)'
2025-03-28 22:30:43.415 +01:00 [INF] Route matched with {action = "AddLike", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] AddLike(Int32, JurMaps.Model.DTO.LikeDto) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:30:43.454 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:30:43.654 +01:00 [INF] Executed DbCommand (84ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserMapLikes" ("MapId", "UserId")
VALUES (@p0, @p1);
2025-03-28 22:30:43.666 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:30:43.731 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:30:43.735 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:30:43.736 +01:00 [INF] Executed action JurMaps.Controllers.MapController.AddLike (JurMaps) in 319.9156ms
2025-03-28 22:30:43.737 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.AddLike (JurMaps)'
2025-03-28 22:30:43.738 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/map/addlike/19 application/json 12 - 200 - application/json;+charset=utf-8 327.9568ms
2025-03-28 22:30:45.586 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/map/removelike/19 - -
2025-03-28 22:30:45.587 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:45.588 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/map/removelike/19 - - - 204 - - 1.4006ms
2025-03-28 22:30:45.589 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/map/removelike/19 application/json 12
2025-03-28 22:30:45.590 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:45.590 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.RemoveLike (JurMaps)'
2025-03-28 22:30:45.594 +01:00 [INF] Route matched with {action = "RemoveLike", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] RemoveLike(Int32, JurMaps.Model.DTO.LikeDto) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:30:45.601 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:30:45.612 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "UserMapLikes"
WHERE "MapId" = @p0 AND "UserId" = @p1;
2025-03-28 22:30:45.619 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:30:45.625 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:30:45.627 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:30:45.628 +01:00 [INF] Executed action JurMaps.Controllers.MapController.RemoveLike (JurMaps) in 33.1234ms
2025-03-28 22:30:45.629 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.RemoveLike (JurMaps)'
2025-03-28 22:30:45.630 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/map/removelike/19 application/json 12 - 200 - application/json;+charset=utf-8 41.0081ms
2025-03-28 22:30:45.952 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/map/addlike/19 application/json 12
2025-03-28 22:30:45.953 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:30:45.954 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.AddLike (JurMaps)'
2025-03-28 22:30:45.955 +01:00 [INF] Route matched with {action = "AddLike", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] AddLike(Int32, JurMaps.Model.DTO.LikeDto) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:30:45.960 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:30:45.965 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserMapLikes" ("MapId", "UserId")
VALUES (@p0, @p1);
2025-03-28 22:30:45.969 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:30:45.974 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:30:45.977 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:30:45.978 +01:00 [INF] Executed action JurMaps.Controllers.MapController.AddLike (JurMaps) in 21.3247ms
2025-03-28 22:30:45.979 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.AddLike (JurMaps)'
2025-03-28 22:30:45.980 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/map/addlike/19 application/json 12 - 200 - application/json;+charset=utf-8 27.6670ms
2025-03-28 22:31:06.120 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:31:06.121 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:06.122 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8188ms
2025-03-28 22:31:06.124 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:31:06.124 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:06.125 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:06.134 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:06'.
2025-03-28 22:31:06.136 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:06.137 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:06.143 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:06.145 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6765ms
2025-03-28 22:31:06.146 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:06.148 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.2825ms
2025-03-28 22:31:06.150 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:31:06.151 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:06.152 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.4532ms
2025-03-28 22:31:06.154 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:31:06.156 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:06.158 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:06.172 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:06'.
2025-03-28 22:31:06.174 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:06.176 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:06.183 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:06.191 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:06.192 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.691ms
2025-03-28 22:31:06.194 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:06.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 41.4420ms
2025-03-28 22:31:07.854 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 22:31:07.859 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:07.865 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:07'.
2025-03-28 22:31:07.867 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 22:31:07.872 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:07.882 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:07.944 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 22:31:07.962 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:07.964 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 90.7098ms
2025-03-28 22:31:07.966 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 22:31:07.969 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 114.4676ms
2025-03-28 22:31:10.947 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:31:10.949 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:10.951 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:10'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:10.963 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:10'.
2025-03-28 22:31:10.964 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:10.965 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:10.972 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:10.976 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.6266ms
2025-03-28 22:31:10.978 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:10.980 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.2066ms
2025-03-28 22:31:12.114 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json -
2025-03-28 22:31:12.115 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.119 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.120 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.124 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:12.133 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:31:12.136 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.139 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.3694ms
2025-03-28 22:31:12.142 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.143 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json - - 200 - application/json;+charset=utf-8 29.5720ms
2025-03-28 22:31:12.158 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json -
2025-03-28 22:31:12.160 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.166 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.169 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.170 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:12.179 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:31:12.183 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.185 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 11.122ms
2025-03-28 22:31:12.186 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.186 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json - - 200 - application/json;+charset=utf-8 28.1997ms
2025-03-28 22:31:12.233 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:31:12.234 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json -
2025-03-28 22:31:12.235 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.236 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.243 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.249 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.250 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:31:12.253 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.254 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.256 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:12.271 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.278 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:31:12.280 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.283 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.285 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:31:12.287 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.838ms
2025-03-28 22:31:12.288 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 29.2364ms
2025-03-28 22:31:12.290 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:31:12.289 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:31:12.292 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 58.6095ms
2025-03-28 22:31:12.292 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/153 application/json - - 200 - application/json;+charset=utf-8 58.7659ms
2025-03-28 22:31:12.297 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:31:12.298 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.305 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.308 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:31:12.309 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.317 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.329 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.332 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:31:12.333 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 21.0958ms
2025-03-28 22:31:12.336 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:31:12.337 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 39.3967ms
2025-03-28 22:31:12.408 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:31:12.408 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:31:12.414 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.415 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 7.2472ms
2025-03-28 22:31:12.413 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.417 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 9.4335ms
2025-03-28 22:31:12.428 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:31:12.429 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.430 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:31:12.437 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:12.461 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:31:12.471 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:31:12.474 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.476 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.477 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.4386ms
2025-03-28 22:31:12.478 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 6.9741ms
2025-03-28 22:31:12.485 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:31:12.492 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:31:12.496 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.496 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:31:12.497 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 69.3274ms
2025-03-28 22:31:12.498 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:31:12.499 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.501 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:31:12.502 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.507 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:31:12.516 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.518 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.526 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:12.527 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 19.8761ms
2025-03-28 22:31:12.526 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:31:12.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:31:12.531 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.534 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.535 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.539 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 35.362ms
2025-03-28 22:31:12.540 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.541 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.552 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.8775ms
2025-03-28 22:31:12.548 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.541 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:31:12.554 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:12.555 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:12.561 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.559 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 62.9670ms
2025-03-28 22:31:12.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 72.1869ms
2025-03-28 22:31:12.578 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.587 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:31:12.600 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.601 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.603 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.607 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 41.7208ms
2025-03-28 22:31:12.612 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.613 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:12.614 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:12.615 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 86.2855ms
2025-03-28 22:31:12.618 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.623 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:31:12.624 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:31:12.626 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:31:12.626 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.634 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:31:12'.
2025-03-28 22:31:12.635 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 11.8818ms
2025-03-28 22:31:12.636 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:12.637 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:31:12.638 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:31:12.639 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 52.1300ms
2025-03-28 22:31:12.649 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:31:12.653 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:31:12.654 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.949ms
2025-03-28 22:31:12.656 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:31:12.657 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.9374ms
2025-03-28 22:33:15.025 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/153 - -
2025-03-28 22:33:15.026 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:15.027 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/153 - - - 204 - - 1.5497ms
2025-03-28 22:33:15.028 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 103
2025-03-28 22:33:15.028 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:15.029 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:15.032 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:15.111 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:33:15.142 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:33:15.157 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:33:15.159 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:15.161 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 127.4122ms
2025-03-28 22:33:15.162 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:15.163 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 103 - 200 - application/json;+charset=utf-8 135.1771ms
2025-03-28 22:33:16.551 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 98
2025-03-28 22:33:16.552 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:16.553 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:16.554 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:16.559 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:33:16.564 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:33:16.567 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:33:16.570 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:16.571 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.7459ms
2025-03-28 22:33:16.572 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:16.572 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 98 - 200 - application/json;+charset=utf-8 21.1764ms
2025-03-28 22:33:18.806 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 101
2025-03-28 22:33:18.807 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:18.807 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:18.808 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:18.813 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:33:18.830 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:33:18.833 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:33:18.835 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:18.836 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 26.9163ms
2025-03-28 22:33:18.837 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:33:18.838 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/153 application/json 101 - 200 - application/json;+charset=utf-8 31.7718ms
2025-03-28 22:33:36.656 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/153 - -
2025-03-28 22:33:36.656 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/153 - -
2025-03-28 22:33:36.657 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:36.658 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:36.658 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/153 - - - 204 - - 2.2971ms
2025-03-28 22:33:36.660 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/153 application/json -
2025-03-28 22:33:36.659 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/153 - - - 204 - - 2.4507ms
2025-03-28 22:33:36.660 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:36.662 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-28 22:33:36.666 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:36.677 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:36.682 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:36.685 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:33:36.686 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 16.8378ms
2025-03-28 22:33:36.688 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/153 application/json -
2025-03-28 22:33:36.688 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-28 22:33:36.688 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:36.689 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/153 application/json - - 200 - application/json;+charset=utf-8 29.6607ms
2025-03-28 22:33:36.690 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-28 22:33:36.691 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:36.696 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:36.702 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:36.705 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:33:36.706 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 13.4899ms
2025-03-28 22:33:36.707 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-28 22:33:36.708 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/153 application/json - - 200 - application/json;+charset=utf-8 20.5317ms
2025-03-28 22:33:49.411 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryzlAWAVFa6pw6Dm45 248
2025-03-28 22:33:49.412 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:49.412 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-28 22:33:49.417 +01:00 [INF] Route matched with {action = "SaveMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] SaveMap(System.String, Microsoft.AspNetCore.Http.IFormFile) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:49.495 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:49.498 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:49.703 +01:00 [INF] Received HTTP response headers after 202.3673ms - 400
2025-03-28 22:33:49.705 +01:00 [INF] End processing HTTP request after 211.6183ms - 400
2025-03-28 22:33:49.708 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:49.710 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:49.966 +01:00 [INF] Received HTTP response headers after 255.4609ms - 200
2025-03-28 22:33:49.967 +01:00 [INF] End processing HTTP request after 258.4495ms - 200
2025-03-28 22:33:49.974 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:49.975 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.082 +01:00 [INF] Received HTTP response headers after 106.4794ms - 400
2025-03-28 22:33:50.083 +01:00 [INF] End processing HTTP request after 109.818ms - 400
2025-03-28 22:33:50.085 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.086 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.300 +01:00 [INF] Received HTTP response headers after 213.2967ms - 200
2025-03-28 22:33:50.301 +01:00 [INF] End processing HTTP request after 216.1761ms - 200
2025-03-28 22:33:50.405 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:50.408 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.409 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.464 +01:00 [INF] Received HTTP response headers after 54.5806ms - 400
2025-03-28 22:33:50.465 +01:00 [INF] End processing HTTP request after 57.4463ms - 400
2025-03-28 22:33:50.467 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.468 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-28 22:33:50.646 +01:00 [INF] Received HTTP response headers after 177.5129ms - 200
2025-03-28 22:33:50.647 +01:00 [INF] End processing HTTP request after 180.343ms - 200
2025-03-28 22:33:50.654 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tagName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
WHERE t."TagName" = @__tagName_0
LIMIT 1
2025-03-28 22:33:50.716 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Tags" ("TagName", "TagQuantity")
VALUES (@p0, @p1)
RETURNING "TagId";
2025-03-28 22:33:50.722 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MapTag" ("MapTagsTagId", "MapsWithThisTagMapId")
VALUES (@p2, @p3);
2025-03-28 22:33:50.735 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:50.740 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:33:50.743 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.744 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.SaveMap (JurMaps) in 1324.2952ms
2025-03-28 22:33:50.745 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-28 22:33:50.745 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryzlAWAVFa6pw6Dm45 248 - 200 - application/json;+charset=utf-8 1334.6729ms
2025-03-28 22:33:50.849 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:33:50.849 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:33:50.850 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:33:50.856 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.856 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.857 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.858 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:33:50.858 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:33:50.859 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:33:50.860 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.861 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.862 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.873 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:33:50.886 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.891 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 26.8058ms
2025-03-28 22:33:50.898 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:33:50.899 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:33:50.907 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:33:50.908 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.909 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.914 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 15.0754ms
2025-03-28 22:33:50.913 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:33:50.916 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.912 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 62.6533ms
2025-03-28 22:33:50.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:33:50.926 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:33:50.926 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.927 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:33:50.932 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.935 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:50.940 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 13.8670ms
2025-03-28 22:33:50.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:33:50.945 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:50'.
2025-03-28 22:33:50.947 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.939 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.948 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:33:50.949 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:50.951 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:33:50.950 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 30.7764ms
2025-03-28 22:33:50.953 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:33:50.953 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:33:50.955 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:50'.
2025-03-28 22:33:50.957 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:33:50.959 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.961 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.961 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:33:50.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 63.9148ms
2025-03-28 22:33:50.968 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 11.4267ms
2025-03-28 22:33:50.969 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 102.8521ms
2025-03-28 22:33:50.970 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:33:50.959 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.970 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:33:50.971 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:33:50.975 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.978 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:50.978 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:33:50.976 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.9811ms
2025-03-28 22:33:50.973 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:33:50.976 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:33:50.975 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 102.6602ms
2025-03-28 22:33:50.982 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:50.982 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.984 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 134.3221ms
2025-03-28 22:33:50.984 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:50.985 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:33:50.987 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.7391ms
2025-03-28 22:33:50.989 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:33:50.993 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:33:50.990 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 140.5726ms
2025-03-28 22:33:50.993 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:33:50.994 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:33:50.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 53.0370ms
2025-03-28 22:33:50.997 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:51.001 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 12.3617ms
2025-03-28 22:33:51.001 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:33:51.003 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:33:51.004 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 34.0643ms
2025-03-28 22:33:51.006 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:51.008 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 9.3329ms
2025-03-28 22:33:51.009 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:33:51.010 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 34.0556ms
2025-03-28 22:33:52.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 22:33:52.778 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:33:52.779 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.779 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.780 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:33:52.781 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:33:52.780 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 2.3770ms
2025-03-28 22:33:52.782 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:33:52.782 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:33:52.783 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.784 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.787 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 5.8002ms
2025-03-28 22:33:52.788 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:33:52.790 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:52.792 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:52.804 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:52.814 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:33:52.815 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 28.5951ms
2025-03-28 22:33:52.815 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:33:52.825 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:52.816 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:33:52.835 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 41.2805ms
2025-03-28 22:33:52.837 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 59.5319ms
2025-03-28 22:33:52.841 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:33:52.844 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 62.0526ms
2025-03-28 22:33:52.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 22:33:52.848 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:33:52.849 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.850 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.851 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:33:52.855 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:33:52.857 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:33:52.861 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:33:52.857 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:33:52.863 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.873 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:33:52.876 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:52.900 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:52.901 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:33:52.905 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:52'.
2025-03-28 22:33:52.909 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:33:52.913 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:52.914 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:33:52.917 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 55.1998ms
2025-03-28 22:33:52.919 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 53.5696ms
2025-03-28 22:33:52.920 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:33:52.922 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:33:52.923 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:33:52.927 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 81.1671ms
2025-03-28 22:33:52.928 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 80.1687ms
2025-03-28 22:33:52.931 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:52.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:33:52.947 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 20.9854ms
2025-03-28 22:33:52.951 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:33:52.948 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:52.967 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:52.970 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 102.2930ms
2025-03-28 22:33:52.986 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:52'.
2025-03-28 22:33:52.990 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:33:52.991 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:33:52.998 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:33:53.001 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - -
2025-03-28 22:33:53.005 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:53.006 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:53.011 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 16.6419ms
2025-03-28 22:33:53.011 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - - - 204 - - 10.3059ms
2025-03-28 22:33:53.012 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:33:53.013 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:33:53.014 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 72.9322ms
2025-03-28 22:33:53.016 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:53.018 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:53.023 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:53'.
2025-03-28 22:33:53.025 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:33:53.026 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:33:53.031 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:53.032 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.0769ms
2025-03-28 22:33:53.033 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:33:53.034 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:33:53.035 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 22.3823ms
2025-03-28 22:33:53.036 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:53.038 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:33:53.042 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:33:53'.
2025-03-28 22:33:53.044 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:33:53.044 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:33:53.046 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 22:33:53.047 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:53.048 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:33:53.049 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:53.050 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:33:53.051 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.2498ms
2025-03-28 22:33:53.054 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:33:53.055 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 21.8266ms
2025-03-28 22:33:53.060 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:33:53.064 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:53.066 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 12.4643ms
2025-03-28 22:33:53.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 22:33:53.068 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:33:53.069 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:33:53.069 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 23.2112ms
2025-03-28 22:33:53.070 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:33:53.072 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:33:53.078 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:33:53.080 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:33:53.081 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 8.1523ms
2025-03-28 22:33:53.082 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:33:53.083 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 16.3360ms
2025-03-28 22:34:03.485 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:34:03.487 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:03.488 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.2892ms
2025-03-28 22:34:03.490 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:03.490 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:03.491 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:03.496 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:03'.
2025-03-28 22:34:03.497 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:03.498 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:03.503 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:03.505 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.6629ms
2025-03-28 22:34:03.507 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:03.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.0884ms
2025-03-28 22:34:03.511 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:34:03.512 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:03.512 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7582ms
2025-03-28 22:34:03.514 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:03.515 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:03.516 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:03.524 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:03'.
2025-03-28 22:34:03.525 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:03.526 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:03.532 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:03.537 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:03.539 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.1373ms
2025-03-28 22:34:03.540 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:03.543 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.4396ms
2025-03-28 22:34:49.722 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:34:49.725 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.728 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.4797ms
2025-03-28 22:34:49.729 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:49.731 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.734 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:49.744 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:49'.
2025-03-28 22:34:49.745 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:49.748 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:49.755 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:34:49.756 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:49.756 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.757 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.0024ms
2025-03-28 22:34:49.758 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.9315ms
2025-03-28 22:34:49.759 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:49.759 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:49.762 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 33.1278ms
2025-03-28 22:34:49.763 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.766 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:49.772 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:49'.
2025-03-28 22:34:49.774 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:49.777 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:49.786 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:49.792 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:49.793 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.6797ms
2025-03-28 22:34:49.794 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:49.798 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.2555ms
2025-03-28 22:34:49.905 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:34:49.910 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:34:49.910 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:34:49.911 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.912 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.914 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:49.915 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:34:49.916 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:34:49.916 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:34:49.917 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:49.918 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:49.920 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:49.940 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:34:49.951 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:34:49.980 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:49.961 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:34:49.992 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:49.999 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:50.003 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.023 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 95.3438ms
2025-03-28 22:34:49.967 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.042 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 22:34:50.037 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:50.056 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:50.038 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 85.7315ms
2025-03-28 22:34:50.040 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:34:50.047 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 124.23ms
2025-03-28 22:34:50.015 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:50.047 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 22:34:50.056 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 22:34:50.077 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:50'.
2025-03-28 22:34:50.078 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:34:50.079 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:34:50.081 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 170.4618ms
2025-03-28 22:34:50.082 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:34:50.082 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:50.083 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:50.085 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:50.085 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:50.087 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 176.4493ms
2025-03-28 22:34:50.089 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 183.5088ms
2025-03-28 22:34:50.084 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:50.093 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:50.090 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:50.090 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:34:50.097 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:34:50.097 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 22:34:50.103 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.109 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:50'.
2025-03-28 22:34:50.110 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:50.111 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 22:34:50.113 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.115 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.4103ms
2025-03-28 22:34:50.117 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:50.128 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:50.127 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:50.128 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 22:34:50.124 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 22:34:50.134 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 154.1788ms
2025-03-28 22:34:50.137 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.138 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:50.125 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 33.7923ms
2025-03-28 22:34:50.140 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.142 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 20.5007ms
2025-03-28 22:34:50.148 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:50.149 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 22:34:50.150 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 32.1265ms
2025-03-28 22:34:50.152 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 22:34:50.157 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 101.3409ms
2025-03-28 22:34:50.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 112.4996ms
2025-03-28 22:34:50.155 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 22:34:50.153 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.2836ms
2025-03-28 22:34:50.160 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 112.8344ms
2025-03-28 22:34:50.161 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:50.163 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 147.1738ms
2025-03-28 22:34:51.375 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 22:34:51.375 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:34:51.376 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.377 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.378 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:34:51.378 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 22:34:51.379 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 3.5917ms
2025-03-28 22:34:51.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:34:51.380 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:34:51.382 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.384 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.388 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 9.8476ms
2025-03-28 22:34:51.389 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:51.393 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:51.394 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:34:51.405 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:51.405 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:34:51.430 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:34:51.433 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.434 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 46.9839ms
2025-03-28 22:34:51.436 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 39.6123ms
2025-03-28 22:34:51.437 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:34:51.438 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:51.439 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 64.1990ms
2025-03-28 22:34:51.440 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 59.7787ms
2025-03-28 22:34:51.456 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 22:34:51.457 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.458 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 22:34:51.460 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:51.461 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:34:51.465 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.466 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.467 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:34:51.468 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:51.470 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:51.473 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:51.478 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:34:51.480 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
2025-03-28 22:34:51.491 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:51.494 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:34:51.491 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:51.498 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:51.504 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.508 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:34:51.515 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.515 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 32.3578ms
2025-03-28 22:34:51.516 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:51.517 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 45.6137ms
2025-03-28 22:34:51.519 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.8463ms
2025-03-28 22:34:51.520 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:51.521 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.522 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 22:34:51.524 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:51.525 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 67.2737ms
2025-03-28 22:34:51.527 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:51.527 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 71.2626ms
2025-03-28 22:34:51.528 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 68.4624ms
2025-03-28 22:34:51.536 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
2025-03-28 22:34:51.539 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:51.541 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:51.547 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:51.551 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.552 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.8644ms
2025-03-28 22:34:51.553 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:51.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.7931ms
2025-03-28 22:34:51.565 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - -
2025-03-28 22:34:51.566 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.567 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - - - 204 - - 2.5006ms
2025-03-28 22:34:51.571 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:34:51.573 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.577 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:51.583 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
2025-03-28 22:34:51.584 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:34:51.584 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:34:51.592 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.594 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.36ms
2025-03-28 22:34:51.595 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:34:51.596 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 25.0933ms
2025-03-28 22:34:51.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 22:34:51.598 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.599 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:51.605 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:51'.
2025-03-28 22:34:51.606 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:34:51.607 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 22:34:51.609 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 22:34:51.611 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.612 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:34:51.613 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.613 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:34:51.614 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 3.7489ms
2025-03-28 22:34:51.617 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 22:34:51.618 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 21.0307ms
2025-03-28 22:34:51.623 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:34:51.625 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.627 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 10.6701ms
2025-03-28 22:34:51.629 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:34:51.630 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 22:34:51.630 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 21.8027ms
2025-03-28 22:34:51.631 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:51.632 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:34:51.633 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 22:34:51.639 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 22:34:51.644 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:51.645 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 9.8237ms
2025-03-28 22:34:51.646 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 22:34:51.647 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 17.1201ms
2025-03-28 22:34:56.708 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 22:34:56.709 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:56.714 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
2025-03-28 22:34:56.715 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 22:34:56.716 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:56.725 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:56.733 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 22:34:56.736 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:56.737 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 16.8495ms
2025-03-28 22:34:56.738 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 22:34:56.742 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 34.3153ms
2025-03-28 22:34:56.840 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:34:56.859 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:56.867 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
2025-03-28 22:34:56.869 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:56.870 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:56.888 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:34:56.893 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:56.895 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 21.0088ms
2025-03-28 22:34:56.896 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:56.898 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 57.4060ms
2025-03-28 22:34:56.915 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:34:56.916 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:56.917 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.6613ms
2025-03-28 22:34:56.919 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:56.922 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:56.923 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:56.929 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
2025-03-28 22:34:56.931 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:56.931 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:56.936 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:56.937 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3112ms
2025-03-28 22:34:56.939 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:56.939 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:34:56.942 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.4409ms
2025-03-28 22:34:56.943 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:56.951 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:56'.
2025-03-28 22:34:56.953 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:56.956 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:56.963 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:34:56.972 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:56.974 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.5317ms
2025-03-28 22:34:56.977 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:56.978 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 38.7636ms
2025-03-28 22:34:57.001 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:34:57.002 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:34:57.005 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.005 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.012 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.022 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:34:57.020 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.025 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.027 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:57.034 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:57.040 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.043 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:34:57.049 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.052 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.056 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:34:57.064 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 34.9404ms
2025-03-28 22:34:57.066 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:34:57.062 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 26.4503ms
2025-03-28 22:34:57.068 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 67.0844ms
2025-03-28 22:34:57.070 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:34:57.075 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 72.8737ms
2025-03-28 22:34:57.075 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:34:57.078 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.085 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.088 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:34:57.089 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.099 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.111 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.119 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:34:57.123 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 31.8332ms
2025-03-28 22:34:57.125 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:34:57.125 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 50.0230ms
2025-03-28 22:34:57.177 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:34:57.178 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.179 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 1.7337ms
2025-03-28 22:34:57.181 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:34:57.181 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:34:57.181 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.182 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.184 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 3.4086ms
2025-03-28 22:34:57.183 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:57.187 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:57.195 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:34:57.199 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.200 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 11.287ms
2025-03-28 22:34:57.201 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:34:57.201 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:57.202 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.203 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 22.4958ms
2025-03-28 22:34:57.207 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:57.209 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:57.231 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:34:57.242 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.243 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 20.6137ms
2025-03-28 22:34:57.246 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:34:57.248 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 46.8936ms
2025-03-28 22:34:57.273 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:57.285 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.293 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.311 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.313 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:57.318 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.318 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:34:57.334 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.341 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 19.7636ms
2025-03-28 22:34:57.335 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.347 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:57.349 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 30.6609ms
2025-03-28 22:34:57.352 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 79.0649ms
2025-03-28 22:34:57.360 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:57.361 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.362 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.389 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:34:57.395 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.396 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.397 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:57.403 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.404 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.419 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.425 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:57.427 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.429 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.434 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.435 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.436 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2726ms
2025-03-28 22:34:57.437 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5261ms
2025-03-28 22:34:57.438 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:34:57.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:34:57.439 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:57.440 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 50.5058ms
2025-03-28 22:34:57.441 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:57.442 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 85.4228ms
2025-03-28 22:34:57.444 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:34:57.448 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:34:57'.
2025-03-28 22:34:57.449 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:57.450 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:34:57.456 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:34:57.459 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:57.462 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.2622ms
2025-03-28 22:34:57.464 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:34:57.464 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.1776ms
2025-03-28 22:34:59.763 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - -
2025-03-28 22:34:59.764 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:59.765 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - - - 204 - - 1.7489ms
2025-03-28 22:34:59.766 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102
2025-03-28 22:34:59.767 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:34:59.768 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:34:59.769 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:34:59.775 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:34:59.784 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:34:59.789 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:34:59.792 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:34:59.793 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 21.8758ms
2025-03-28 22:34:59.794 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:34:59.795 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102 - 200 - application/json;+charset=utf-8 28.5603ms
2025-03-28 22:35:01.769 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102
2025-03-28 22:35:01.770 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:01.770 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:35:01.771 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:35:01.776 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:35:01.785 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:35:01.794 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:35:01.796 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:01.797 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 24.9679ms
2025-03-28 22:35:01.798 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:35:01.799 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102 - 200 - application/json;+charset=utf-8 30.1344ms
2025-03-28 22:35:13.514 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:35:13.515 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:13.520 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 6.7552ms
2025-03-28 22:35:13.522 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:13.525 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:13.527 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:13.535 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:13'.
2025-03-28 22:35:13.542 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:13.545 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:13.552 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:13.554 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:35:13.556 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.0108ms
2025-03-28 22:35:13.557 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:13.560 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:13.561 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 7.4992ms
2025-03-28 22:35:13.562 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 40.6841ms
2025-03-28 22:35:13.567 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:13.568 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:13.570 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:13.575 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:13'.
2025-03-28 22:35:13.577 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:13.578 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:13.586 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:13.591 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:13.592 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.3084ms
2025-03-28 22:35:13.594 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:13.595 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.3109ms
2025-03-28 22:35:14.584 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:35:14.585 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:35:14.586 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:14.587 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:14.595 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
2025-03-28 22:35:14.603 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
2025-03-28 22:35:14.604 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:14.605 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:35:14.607 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:14.611 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:35:14.618 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:14.623 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:35:14.628 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:14.633 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:14.641 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:35:14.643 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 25.7665ms
2025-03-28 22:35:14.644 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 30.2545ms
2025-03-28 22:35:14.645 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:35:14.646 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:14.647 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 62.3875ms
2025-03-28 22:35:14.650 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 65.8863ms
2025-03-28 22:35:14.656 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:35:14.658 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:14.665 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:14'.
2025-03-28 22:35:14.666 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:14.667 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:14.676 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:14.683 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:14.688 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:35:14.690 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.101ms
2025-03-28 22:35:14.691 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:14.693 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 36.8482ms
2025-03-28 22:35:16.052 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:35:16.054 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.055 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 3.0131ms
2025-03-28 22:35:16.059 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:35:16.061 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.061 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:35:16.062 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:35:16.070 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:35:16.077 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:16.080 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 15.2957ms
2025-03-28 22:35:16.081 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:35:16.083 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 24.3533ms
2025-03-28 22:35:16.248 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:16.256 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.258 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:16.281 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
2025-03-28 22:35:16.290 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:16.297 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:16.318 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:16.322 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.7715ms
2025-03-28 22:35:16.324 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:16.325 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 76.5947ms
2025-03-28 22:35:16.397 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:16.557 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:16.599 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.599 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.601 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:16.604 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:16.639 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
2025-03-28 22:35:16.654 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
2025-03-28 22:35:16.656 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:16.658 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:16.659 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:16.660 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:16.668 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:16.672 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.9418ms
2025-03-28 22:35:16.674 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:16.674 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:16.681 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:16.681 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 124.8678ms
2025-03-28 22:35:16.686 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.7429ms
2025-03-28 22:35:16.687 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:16.689 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:16.691 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:16.692 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 295.6049ms
2025-03-28 22:35:16.693 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:16.706 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:16'.
2025-03-28 22:35:16.708 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:16.709 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:16.719 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:16.724 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:16.726 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.7327ms
2025-03-28 22:35:16.728 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:16.729 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 41.4376ms
2025-03-28 22:35:26.362 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:35:26.364 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:26.365 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.5081ms
2025-03-28 22:35:26.375 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:26.388 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:26.391 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:26.400 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:26'.
2025-03-28 22:35:26.402 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:26.402 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:26.403 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:35:26.406 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:26.407 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 4.2900ms
2025-03-28 22:35:26.409 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:26.409 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:26.410 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4355ms
2025-03-28 22:35:26.411 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:26.414 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:26.416 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:26.417 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 49.1401ms
2025-03-28 22:35:26.430 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:26'.
2025-03-28 22:35:26.434 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:26.435 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:26.444 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:26.450 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:26.452 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.8854ms
2025-03-28 22:35:26.455 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:26.457 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 47.8593ms
2025-03-28 22:35:51.940 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:35:51.941 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:51.942 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.5952ms
2025-03-28 22:35:51.943 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:51.944 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:51.945 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:51.949 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:51'.
2025-03-28 22:35:51.950 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:51.951 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:51.956 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:51.957 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.8125ms
2025-03-28 22:35:51.959 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:51.960 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 17.1352ms
2025-03-28 22:35:51.968 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:35:51.970 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:51.971 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6706ms
2025-03-28 22:35:51.972 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:51.973 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:51.974 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:51.978 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:51'.
2025-03-28 22:35:51.979 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:51.980 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:51.986 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:51.989 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:51.990 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.1381ms
2025-03-28 22:35:51.991 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:51.992 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 19.6495ms
2025-03-28 22:35:52.999 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:53.003 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:53.005 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:53.030 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:53'.
2025-03-28 22:35:53.033 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:53.037 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:53.041 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:53.044 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:53.044 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:53.045 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:53.046 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.5426ms
2025-03-28 22:35:53.059 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:53'.
2025-03-28 22:35:53.060 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:53.061 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:53.063 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 64.6033ms
2025-03-28 22:35:53.064 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:53.074 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:53.081 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:53.082 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.8949ms
2025-03-28 22:35:53.085 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:53.086 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 45.8799ms
2025-03-28 22:35:56.267 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:35:56.268 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:35:56.268 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:56.269 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:56.272 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
2025-03-28 22:35:56.276 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
2025-03-28 22:35:56.276 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:35:56.277 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:56.278 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:35:56.279 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:56.285 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:35:56.287 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:56.289 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:56.292 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:56.293 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 11.6921ms
2025-03-28 22:35:56.295 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:35:56.296 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:35:56.297 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 14.7309ms
2025-03-28 22:35:56.298 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 31.2097ms
2025-03-28 22:35:56.299 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:56.300 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 32.8147ms
2025-03-28 22:35:56.305 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:35:56.306 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:56.310 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:56'.
2025-03-28 22:35:56.311 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:56.312 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:56.318 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:56.323 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:56.325 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:35:56.327 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 13.3318ms
2025-03-28 22:35:56.328 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:35:56.329 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 23.5197ms
2025-03-28 22:35:57.945 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:35:57.947 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:57.948 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 3.8484ms
2025-03-28 22:35:57.951 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:35:57.952 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:57.953 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:35:57.954 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:35:57.963 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:35:57.968 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:57.969 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.5174ms
2025-03-28 22:35:57.971 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:35:57.972 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 21.6539ms
2025-03-28 22:35:58.250 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:35:58.253 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.254 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.3952ms
2025-03-28 22:35:58.259 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:58.261 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.264 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:58.273 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
2025-03-28 22:35:58.275 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:58.276 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:58.280 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:58.282 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9243ms
2025-03-28 22:35:58.287 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:58.290 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.8780ms
2025-03-28 22:35:58.310 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:35:58.311 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.313 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.8027ms
2025-03-28 22:35:58.316 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:58.316 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.318 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:58.324 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
2025-03-28 22:35:58.325 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:58.326 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:58.333 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:58.341 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:58.343 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.0325ms
2025-03-28 22:35:58.345 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:58.346 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 30.2531ms
2025-03-28 22:35:58.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:35:58.560 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.565 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:58.581 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
2025-03-28 22:35:58.584 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:58.586 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:58.592 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:58.595 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.7719ms
2025-03-28 22:35:58.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:35:58.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 76.6104ms
2025-03-28 22:35:58.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:35:58.750 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:35:58.752 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:35:58.762 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:35:58'.
2025-03-28 22:35:58.767 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:58.769 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:35:58.796 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:35:58.802 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:35:58.807 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 31.7418ms
2025-03-28 22:35:58.809 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:35:58.812 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 63.4378ms
2025-03-28 22:47:14.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:47:14.166 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:14.167 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.4059ms
2025-03-28 22:47:14.169 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:14.171 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:14.172 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:14.177 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:14'.
2025-03-28 22:47:14.179 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:14.180 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:14.185 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:14.187 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.052ms
2025-03-28 22:47:14.188 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:14.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.3633ms
2025-03-28 22:47:14.210 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:47:14.211 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:14.212 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9917ms
2025-03-28 22:47:14.214 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:14.214 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:14.216 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:14.220 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:14'.
2025-03-28 22:47:14.222 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:14.223 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:14.322 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:14.325 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:14.326 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 101.7162ms
2025-03-28 22:47:14.327 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:14.328 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 114.1924ms
2025-03-28 22:47:39.335 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:47:39.338 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:39.339 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.8336ms
2025-03-28 22:47:39.342 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:39.344 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:39.345 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:39.353 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:39'.
2025-03-28 22:47:39.362 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:39.363 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:39.368 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:39.369 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3621ms
2025-03-28 22:47:39.370 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:39.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.1349ms
2025-03-28 22:47:39.403 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:47:39.404 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:39.405 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9504ms
2025-03-28 22:47:39.406 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:39.407 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:39.409 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:39.414 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:39'.
2025-03-28 22:47:39.415 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:39.417 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:39.424 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:39.430 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:39.432 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.819ms
2025-03-28 22:47:39.433 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:39.436 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.9188ms
2025-03-28 22:47:43.506 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:47:43.506 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:47:43.508 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:43.508 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:43.514 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
2025-03-28 22:47:43.522 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
2025-03-28 22:47:43.523 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:43.524 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:47:43.525 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:43.526 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:47:43.532 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:43.541 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:43.544 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:47:43.557 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.6399ms
2025-03-28 22:47:43.561 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:43.563 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 57.4146ms
2025-03-28 22:47:43.574 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:47:43.590 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:43.616 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:47:43.618 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:43'.
2025-03-28 22:47:43.622 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:43.623 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:43.625 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 94.7664ms
2025-03-28 22:47:43.626 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:43.627 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:47:43.631 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 124.5594ms
2025-03-28 22:47:43.634 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:43.644 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:43.648 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:47:43.650 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 20.4582ms
2025-03-28 22:47:43.651 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:43.653 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 78.6244ms
2025-03-28 22:47:45.234 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:47:45.236 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.243 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 9.8973ms
2025-03-28 22:47:45.254 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:47:45.258 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.260 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:47:45.263 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:47:45.435 +01:00 [INF] Executed DbCommand (164ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:47:45.439 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:45.441 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 173.6296ms
2025-03-28 22:47:45.443 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:47:45.447 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 193.3863ms
2025-03-28 22:47:45.520 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:47:45.521 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.522 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2502ms
2025-03-28 22:47:45.525 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:45.527 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.529 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:45.546 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
2025-03-28 22:47:45.548 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:45.549 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:45.556 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:45.558 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.0509ms
2025-03-28 22:47:45.559 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:45.560 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 34.9113ms
2025-03-28 22:47:45.733 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:47:45.735 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.737 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.9729ms
2025-03-28 22:47:45.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:45.827 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.828 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:45.835 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
2025-03-28 22:47:45.836 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:45.838 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:45.844 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:45.848 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:45.850 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.29ms
2025-03-28 22:47:45.852 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:45.853 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 76.5527ms
2025-03-28 22:47:45.964 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:45.965 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:45.967 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:45.980 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:45'.
2025-03-28 22:47:45.983 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:45.985 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:45.991 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:45.993 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7585ms
2025-03-28 22:47:45.994 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:45.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.3294ms
2025-03-28 22:47:46.044 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:46.046 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:46.047 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:46.061 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:46'.
2025-03-28 22:47:46.063 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:46.064 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:46.077 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:46.084 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:46.085 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.0452ms
2025-03-28 22:47:46.087 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:46.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 44.1119ms
2025-03-28 22:47:51.011 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - -
2025-03-28 22:47:51.012 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:51.013 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - - - 204 - - 2.1344ms
2025-03-28 22:47:51.015 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102
2025-03-28 22:47:51.015 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:51.016 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:47:51.017 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:47:51.031 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:47:51.038 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 22:47:51.042 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 22:47:51.044 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:51.045 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 26.2819ms
2025-03-28 22:47:51.047 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 22:47:51.047 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102 - 200 - application/json;+charset=utf-8 32.9523ms
2025-03-28 22:47:53.873 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:47:53.873 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:47:53.874 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:53.875 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:53.880 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
2025-03-28 22:47:53.883 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
2025-03-28 22:47:53.884 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:53.886 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:47:53.886 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:53.887 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:47:53.892 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:53.895 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:47:53.898 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:53.899 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:53.902 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:47:53.903 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.9523ms
2025-03-28 22:47:53.904 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.262ms
2025-03-28 22:47:53.905 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:47:53.905 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:53.906 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 33.4818ms
2025-03-28 22:47:53.908 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.2364ms
2025-03-28 22:47:53.913 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:47:53.914 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:53.920 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:53'.
2025-03-28 22:47:53.921 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:53.922 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:53.929 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:53.969 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:53.983 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:47:53.985 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 60.7973ms
2025-03-28 22:47:53.986 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:47:53.988 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 74.9670ms
2025-03-28 22:47:55.307 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:47:55.308 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.310 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 3.0914ms
2025-03-28 22:47:55.312 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:47:55.313 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.315 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:47:55.316 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:47:55.323 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:47:55.326 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:55.328 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.4242ms
2025-03-28 22:47:55.330 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:47:55.331 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 18.9964ms
2025-03-28 22:47:55.669 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:47:55.670 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.671 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.4646ms
2025-03-28 22:47:55.674 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:55.675 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.677 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:55.685 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
2025-03-28 22:47:55.687 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:55.688 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:55.693 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:55.695 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.791ms
2025-03-28 22:47:55.697 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:55.698 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.1228ms
2025-03-28 22:47:55.759 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:47:55.761 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.762 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.0223ms
2025-03-28 22:47:55.764 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:55.765 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.768 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:55.774 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
2025-03-28 22:47:55.775 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:55.776 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:55.783 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:55.789 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:55.790 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.8572ms
2025-03-28 22:47:55.791 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:55.792 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.1445ms
2025-03-28 22:47:55.920 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:47:55.921 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:55.922 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:55.928 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:55'.
2025-03-28 22:47:55.929 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:55.930 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:55.936 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:55.937 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0769ms
2025-03-28 22:47:55.938 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:47:55.939 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.5934ms
2025-03-28 22:47:56.063 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:47:56.063 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:47:56.064 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:47:56.068 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:47:56'.
2025-03-28 22:47:56.069 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:56.070 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:47:56.076 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:47:56.081 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:47:56.082 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.0004ms
2025-03-28 22:47:56.084 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:47:56.085 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.1115ms
2025-03-28 22:48:33.091 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:48:33.100 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:33.101 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 9.8860ms
2025-03-28 22:48:33.109 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:48:33.112 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:33.128 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:33.136 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:33'.
2025-03-28 22:48:33.138 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:33.138 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:33.147 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:33.150 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.6469ms
2025-03-28 22:48:33.151 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:33.156 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 47.3709ms
2025-03-28 22:48:33.162 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:48:33.168 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:33.170 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 7.2600ms
2025-03-28 22:48:33.175 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:48:33.179 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:33.181 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:33.197 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:33'.
2025-03-28 22:48:33.200 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:33.201 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:33.211 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:33.217 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:33.219 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5352ms
2025-03-28 22:48:33.222 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:33.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 50.5724ms
2025-03-28 22:48:34.303 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:48:34.304 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:48:34.305 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:34.306 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:34.311 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
2025-03-28 22:48:34.315 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
2025-03-28 22:48:34.316 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:48:34.317 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:48:34.317 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:48:34.318 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:34.324 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:48:34.327 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:34.329 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:34.334 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:34.335 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.7458ms
2025-03-28 22:48:34.338 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:48:34.339 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:48:34.340 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.2744ms
2025-03-28 22:48:34.341 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 37.7609ms
2025-03-28 22:48:34.342 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:48:34.345 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 40.1518ms
2025-03-28 22:48:34.351 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:48:34.353 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:34.360 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:34'.
2025-03-28 22:48:34.361 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:48:34.363 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:34.371 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:34.377 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:34.383 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:48:34.385 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.8789ms
2025-03-28 22:48:34.387 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:48:34.389 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 37.2966ms
2025-03-28 22:48:36.074 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:48:36.082 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.085 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 11.1500ms
2025-03-28 22:48:36.087 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:48:36.088 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.089 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:48:36.091 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:48:36.102 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:48:36.107 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:36.122 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 27.3895ms
2025-03-28 22:48:36.135 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:48:36.145 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 57.8000ms
2025-03-28 22:48:36.437 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:48:36.450 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.453 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:36.460 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
2025-03-28 22:48:36.464 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:36.470 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:36.477 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:36.479 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6131ms
2025-03-28 22:48:36.481 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:36.483 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 46.3752ms
2025-03-28 22:48:36.495 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:48:36.497 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.499 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:36.507 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
2025-03-28 22:48:36.509 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:36.510 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:36.518 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:36.523 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:36.524 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.0608ms
2025-03-28 22:48:36.525 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:36.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.1371ms
2025-03-28 22:48:36.726 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:48:36.740 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.747 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:36.762 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
2025-03-28 22:48:36.763 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:36.765 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:36.771 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:36.773 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3912ms
2025-03-28 22:48:36.775 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:48:36.776 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 50.4913ms
2025-03-28 22:48:36.893 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:48:36.894 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:48:36.896 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:48:36.903 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:48:36'.
2025-03-28 22:48:36.905 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:36.906 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:48:36.914 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:48:36.919 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:48:36.921 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5389ms
2025-03-28 22:48:36.923 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:48:36.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.5803ms
2025-03-28 22:49:37.947 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:49:37.948 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:49:37.950 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:37.950 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:37.958 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:37'.
2025-03-28 22:49:37.965 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:37'.
2025-03-28 22:49:37.966 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:49:37.968 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:49:37.969 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:37.969 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:49:37.976 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:37.981 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:49:37.983 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:37.986 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:37.989 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:49:37.991 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 18.0529ms
2025-03-28 22:49:37.993 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 21.5547ms
2025-03-28 22:49:37.994 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:49:37.995 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:49:37.996 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 47.5713ms
2025-03-28 22:49:37.997 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 49.3869ms
2025-03-28 22:49:38.003 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:49:38.005 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:38.012 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:38'.
2025-03-28 22:49:38.013 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:49:38.014 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:38.021 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:38.026 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:38.030 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:49:38.032 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 16.6529ms
2025-03-28 22:49:38.033 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:49:38.035 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.8559ms
2025-03-28 22:49:39.340 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:49:39.341 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.342 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 2.1275ms
2025-03-28 22:49:39.347 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:49:39.349 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.350 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:49:39.351 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:49:39.359 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:49:39.363 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:39.367 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 13.5841ms
2025-03-28 22:49:39.369 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:49:39.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 23.0832ms
2025-03-28 22:49:39.633 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:49:39.634 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.636 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.5722ms
2025-03-28 22:49:39.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:49:39.640 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.641 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:39.648 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
2025-03-28 22:49:39.650 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:49:39.651 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:39.657 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:39.658 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4005ms
2025-03-28 22:49:39.659 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:49:39.660 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.0134ms
2025-03-28 22:49:39.713 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:49:39.720 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.721 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 7.5498ms
2025-03-28 22:49:39.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:49:39.728 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.732 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:39.738 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
2025-03-28 22:49:39.739 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:49:39.740 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:39.750 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:39.768 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:39.770 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 28.8008ms
2025-03-28 22:49:39.773 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:49:39.777 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 49.7203ms
2025-03-28 22:49:39.889 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:49:39.896 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:39.914 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:39.940 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:39'.
2025-03-28 22:49:39.941 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:49:39.942 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:39.947 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:39.948 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1324ms
2025-03-28 22:49:39.949 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:49:39.950 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 61.6544ms
2025-03-28 22:49:40.075 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:49:40.076 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:49:40.078 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:49:40.086 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:49:40'.
2025-03-28 22:49:40.088 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:49:40.089 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:49:40.098 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:49:40.102 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:49:40.104 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.756ms
2025-03-28 22:49:40.106 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:49:40.109 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.4762ms
2025-03-28 22:50:39.146 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:50:39.146 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 22:50:39.148 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:39.148 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:39.151 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
2025-03-28 22:50:39.154 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
2025-03-28 22:50:39.155 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:50:39.156 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:50:39.157 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:39.157 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:50:39.163 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:39.165 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 22:50:39.169 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:39.170 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:39.172 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:50:39.173 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.1331ms
2025-03-28 22:50:39.175 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.9626ms
2025-03-28 22:50:39.175 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 22:50:39.176 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:50:39.177 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 31.0995ms
2025-03-28 22:50:39.178 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.9257ms
2025-03-28 22:50:39.183 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 22:50:39.185 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:39.189 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:39'.
2025-03-28 22:50:39.190 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:50:39.191 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:39.196 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:39.200 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:39.203 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 22:50:39.205 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.6944ms
2025-03-28 22:50:39.206 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 22:50:39.206 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 23.1084ms
2025-03-28 22:50:40.501 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 22:50:40.505 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.508 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 7.6448ms
2025-03-28 22:50:40.510 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 22:50:40.511 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.512 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:50:40.513 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 22:50:40.522 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 22:50:40.527 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:40.531 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 15.1319ms
2025-03-28 22:50:40.534 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 22:50:40.540 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 29.6943ms
2025-03-28 22:50:40.842 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:50:40.844 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.845 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0110ms
2025-03-28 22:50:40.848 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:50:40.850 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.852 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:40.857 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:40'.
2025-03-28 22:50:40.859 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:50:40.861 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:40.868 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:40.870 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3277ms
2025-03-28 22:50:40.872 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:50:40.874 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.0143ms
2025-03-28 22:50:40.899 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:50:40.901 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.902 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.8851ms
2025-03-28 22:50:40.904 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:50:40.906 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:40.907 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:40.912 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:40'.
2025-03-28 22:50:40.914 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:50:40.915 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:40.928 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:40.941 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:40.942 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.02ms
2025-03-28 22:50:40.944 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:50:40.946 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 41.3864ms
2025-03-28 22:50:41.074 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:50:41.075 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:41.079 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:41.093 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:41'.
2025-03-28 22:50:41.094 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:50:41.095 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:41.102 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:41.104 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2569ms
2025-03-28 22:50:41.106 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:50:41.107 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.4562ms
2025-03-28 22:50:41.247 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:50:41.248 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:50:41.250 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:50:41.262 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:50:41'.
2025-03-28 22:50:41.264 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:50:41.265 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:50:41.281 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:50:41.287 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:50:41.290 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 22.6726ms
2025-03-28 22:50:41.291 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:50:41.292 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 45.2737ms
2025-03-28 22:56:50.237 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:56:50.238 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:56:50.239 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.3877ms
2025-03-28 22:56:50.242 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:56:50.246 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:56:50.247 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:56:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:56:50.259 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:56:50'.
2025-03-28 22:56:50.260 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:56:50.262 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:56:50.267 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:56:50.268 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1758ms
2025-03-28 22:56:50.269 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:56:50.270 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.4976ms
2025-03-28 22:56:50.278 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:56:50.279 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:56:50.280 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.0110ms
2025-03-28 22:56:50.282 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:56:50.283 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:56:50.284 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:56:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:56:50.289 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:56:50'.
2025-03-28 22:56:50.290 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:56:50.291 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:56:50.373 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:56:50.376 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:56:50.381 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 88.8839ms
2025-03-28 22:56:50.384 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:56:50.386 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 104.8448ms
2025-03-28 22:57:26.018 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:57:26.028 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:26.033 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 14.2955ms
2025-03-28 22:57:26.041 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:57:26.044 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:26.055 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:57:26.058 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:57:26.088 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:26'.
2025-03-28 22:57:26.089 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:26.092 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:57:26.093 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 35.1870ms
2025-03-28 22:57:26.095 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:57:26.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:57:26.103 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:26.105 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:57:26.106 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:57:26.122 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:26'.
2025-03-28 22:57:26.123 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 21.4433ms
2025-03-28 22:57:26.135 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:57:26.136 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:57:26.138 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:57:26.139 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 98.8212ms
2025-03-28 22:57:26.150 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:57:26.155 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:57:26.163 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.3947ms
2025-03-28 22:57:26.167 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:57:26.168 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 67.7591ms
2025-03-28 22:57:35.502 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:57:35.503 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:35.504 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.4901ms
2025-03-28 22:57:35.507 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:57:35.508 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:35.509 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:57:35.517 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:35'.
2025-03-28 22:57:35.518 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:57:35.519 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:57:35.595 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:57:35.628 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:57:35.653 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 89.6141ms
2025-03-28 22:57:35.689 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:35.691 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:57:35.706 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 77.7468ms
2025-03-28 22:57:35.709 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 201.4396ms
2025-03-28 22:57:35.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:57:35.714 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:57:35.715 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:57:35.720 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:57:35'.
2025-03-28 22:57:35.722 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:57:35.723 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:57:35.729 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:57:35.733 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:57:35.734 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.0954ms
2025-03-28 22:57:35.735 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:57:35.737 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.8870ms
2025-03-28 22:58:43.116 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:58:43.117 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:43.118 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9985ms
2025-03-28 22:58:43.120 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:58:43.121 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:43.123 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:58:43.130 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:43'.
2025-03-28 22:58:43.132 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:58:43.133 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:58:43.139 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:58:43.140 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0965ms
2025-03-28 22:58:43.142 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:58:43.143 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.2328ms
2025-03-28 22:58:43.174 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:58:43.175 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:43.176 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7912ms
2025-03-28 22:58:43.178 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:58:43.179 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:43.180 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:58:43.184 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:43'.
2025-03-28 22:58:43.186 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:58:43.187 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:58:43.193 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:58:43.199 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:58:43.200 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.6961ms
2025-03-28 22:58:43.202 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:58:43.203 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.9791ms
2025-03-28 22:58:53.312 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:58:53.313 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:53.314 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.0688ms
2025-03-28 22:58:53.315 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:58:53.316 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:53.318 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:58:53.323 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:53'.
2025-03-28 22:58:53.324 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:58:53.326 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:58:53.331 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:58:53.332 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1465ms
2025-03-28 22:58:53.334 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:58:53.334 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.2442ms
2025-03-28 22:58:53.353 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:58:53.354 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:53.355 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9926ms
2025-03-28 22:58:53.357 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:58:53.357 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:58:53.358 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:58:53.363 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:58:53'.
2025-03-28 22:58:53.364 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:58:53.365 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:58:53.371 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:58:53.374 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:58:53.375 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.5894ms
2025-03-28 22:58:53.377 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:58:53.378 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 21.3409ms
2025-03-28 22:59:27.103 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:59:27.105 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:27.108 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.5687ms
2025-03-28 22:59:27.109 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:59:27.114 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:27.116 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:59:27.123 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:27'.
2025-03-28 22:59:27.124 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:59:27.127 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:59:27.133 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:59:27.135 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5113ms
2025-03-28 22:59:27.136 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:59:27.138 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.2199ms
2025-03-28 22:59:27.157 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:59:27.158 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:27.159 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8549ms
2025-03-28 22:59:27.161 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:59:27.162 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:27.164 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:59:27.169 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:27'.
2025-03-28 22:59:27.170 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:59:27.172 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:59:27.180 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:59:27.184 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:59:27.186 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.5722ms
2025-03-28 22:59:27.189 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:59:27.190 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.2072ms
2025-03-28 22:59:45.767 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 22:59:45.768 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:45.769 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9010ms
2025-03-28 22:59:45.773 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 22:59:45.775 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:45.777 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:59:45.782 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:45'.
2025-03-28 22:59:45.782 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:59:45.783 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:59:45.788 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:59:45.790 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1562ms
2025-03-28 22:59:45.792 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 22:59:45.793 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.5611ms
2025-03-28 22:59:45.820 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 22:59:45.821 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:45.822 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.2747ms
2025-03-28 22:59:45.824 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 22:59:45.825 +01:00 [INF] CORS policy execution successful.
2025-03-28 22:59:45.826 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 22:59:45.830 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 21:59:45'.
2025-03-28 22:59:45.831 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:59:45.832 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 22:59:45.840 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 22:59:45.843 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 22:59:45.844 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.9821ms
2025-03-28 22:59:45.845 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 22:59:45.846 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.9021ms
2025-03-28 23:00:03.368 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:00:03.369 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:03.370 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.4819ms
2025-03-28 23:00:03.372 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:03.373 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:03.375 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:03.408 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:03'.
2025-03-28 23:00:03.409 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:03.410 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:03.425 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:03.426 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.8486ms
2025-03-28 23:00:03.428 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:03.429 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.2142ms
2025-03-28 23:00:03.451 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:00:03.452 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:03.453 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.0248ms
2025-03-28 23:00:03.455 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:03.456 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:03.457 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:03.460 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:03'.
2025-03-28 23:00:03.461 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:03.462 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:03.468 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:03.472 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:03.473 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.0515ms
2025-03-28 23:00:03.474 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:03.475 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 20.2541ms
2025-03-28 23:00:08.771 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:00:08.772 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:08.773 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.4664ms
2025-03-28 23:00:08.787 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:08.794 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:08.799 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:08.802 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:08'.
2025-03-28 23:00:08.805 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:08.807 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:08.813 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:08.814 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3099ms
2025-03-28 23:00:08.816 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:08.818 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.4915ms
2025-03-28 23:00:08.863 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:00:08.865 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:08.866 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.9529ms
2025-03-28 23:00:08.868 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:08.869 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:08.871 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:08.876 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:08'.
2025-03-28 23:00:08.877 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:08.878 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:08.888 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:08.892 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:08.893 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.111ms
2025-03-28 23:00:08.898 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:08.902 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.1678ms
2025-03-28 23:00:11.235 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:11.238 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:11.240 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:11.245 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
2025-03-28 23:00:11.246 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:11.246 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:11.258 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:11.259 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.7328ms
2025-03-28 23:00:11.263 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:11.264 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.9121ms
2025-03-28 23:00:11.282 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:11.283 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:11.298 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:11.314 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
2025-03-28 23:00:11.329 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:11.338 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:11.406 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:11.412 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:11.413 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.7638ms
2025-03-28 23:00:11.413 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:11.416 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 134.7238ms
2025-03-28 23:00:11.503 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json -
2025-03-28 23:00:11.506 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:00:11.508 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:11.509 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:11.511 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
2025-03-28 23:00:11.521 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
2025-03-28 23:00:11.522 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:11.522 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:11.523 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:11.524 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:11.536 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:00:11.542 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:11.571 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 42.6898ms
2025-03-28 23:00:11.578 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:11.579 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/154 application/json - - 200 - application/json;+charset=utf-8 75.7176ms
2025-03-28 23:00:11.613 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:11.620 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:11.624 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:00:11.625 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 95.1648ms
2025-03-28 23:00:11.626 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:11.627 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 121.1561ms
2025-03-28 23:00:11.632 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:00:11.633 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:11.635 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:11'.
2025-03-28 23:00:11.636 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:11.637 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:11.643 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:11.646 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:11.648 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:00:11.649 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 10.7271ms
2025-03-28 23:00:11.650 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:11.656 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 23.7170ms
2025-03-28 23:00:13.423 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - -
2025-03-28 23:00:13.437 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:13.438 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/154 - - - 204 - - 14.4942ms
2025-03-28 23:00:13.453 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json -
2025-03-28 23:00:13.458 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:13.461 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:13.463 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:13.523 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:13.566 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:13.592 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 111.637ms
2025-03-28 23:00:13.595 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:13.596 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/154 application/json - - 200 - application/json;+charset=utf-8 143.3412ms
2025-03-28 23:00:13.953 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:00:14.135 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:00:14.145 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.155 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.161 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 25.8558ms
2025-03-28 23:00:14.160 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 206.4436ms
2025-03-28 23:00:14.171 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:14.171 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:14.172 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.172 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.173 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:14.174 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:14.177 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
2025-03-28 23:00:14.182 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
2025-03-28 23:00:14.183 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:14.184 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:14.185 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:14.186 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:14.194 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:14.195 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:14.196 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.4877ms
2025-03-28 23:00:14.200 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:14.201 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:14.201 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.3960ms
2025-03-28 23:00:14.203 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.9251ms
2025-03-28 23:00:14.205 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:14.206 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 34.8049ms
2025-03-28 23:00:14.458 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:14.461 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.463 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:14.472 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
2025-03-28 23:00:14.474 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:14.475 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:14.488 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:14.489 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1919ms
2025-03-28 23:00:14.490 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:14.491 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.6287ms
2025-03-28 23:00:14.503 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:14.505 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:14.506 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:14.509 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:14'.
2025-03-28 23:00:14.511 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:14.515 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:14.529 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:14.539 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:14.541 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 24.5353ms
2025-03-28 23:00:14.543 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:14.545 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.2756ms
2025-03-28 23:00:23.189 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - -
2025-03-28 23:00:23.190 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:23.191 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/154 - - - 204 - - 1.3927ms
2025-03-28 23:00:23.192 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102
2025-03-28 23:00:23.193 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:23.193 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:23.194 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:23.205 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:23.210 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:00:23.213 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:00:23.214 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:23.215 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 20.3505ms
2025-03-28 23:00:23.216 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:23.217 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/154 application/json 102 - 200 - application/json;+charset=utf-8 24.9791ms
2025-03-28 23:00:26.246 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:00:26.248 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.249 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.250 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:00:26.251 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.257 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:26.263 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:00:26.264 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.265 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 13.0107ms
2025-03-28 23:00:26.266 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:00:26.268 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 21.8083ms
2025-03-28 23:00:26.389 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json -
2025-03-28 23:00:26.390 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.402 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.403 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.403 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.416 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:00:26.418 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.419 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 11.6476ms
2025-03-28 23:00:26.422 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.423 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json - - 200 - application/json;+charset=utf-8 33.9642ms
2025-03-28 23:00:26.457 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:00:26.459 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.459 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8478ms
2025-03-28 23:00:26.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:26.463 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.464 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.467 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.468 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:26.472 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:26.478 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.479 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json -
2025-03-28 23:00:26.479 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.1881ms
2025-03-28 23:00:26.483 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:26.481 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.487 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.1835ms
2025-03-28 23:00:26.493 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.494 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.495 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.503 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:00:26.507 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.508 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 11.0889ms
2025-03-28 23:00:26.509 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.512 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json - - 200 - application/json;+charset=utf-8 32.9285ms
2025-03-28 23:00:26.542 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json -
2025-03-28 23:00:26.542 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:00:26.544 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.544 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.551 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.556 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.557 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.558 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:26.558 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.561 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:26.570 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:00:26.574 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:26.578 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.582 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:26.582 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 19.3821ms
2025-03-28 23:00:26.584 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:00:26.585 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:00:26.586 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 22.1279ms
2025-03-28 23:00:26.589 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json - - 200 - application/json;+charset=utf-8 46.5045ms
2025-03-28 23:00:26.590 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:26.591 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 48.8648ms
2025-03-28 23:00:26.599 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:00:26.600 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:26.605 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:26'.
2025-03-28 23:00:26.606 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:26.610 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:26.616 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:26.623 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:26.627 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:00:26.629 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.5773ms
2025-03-28 23:00:26.632 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:00:26.634 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.1090ms
2025-03-28 23:00:26.785 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - -
2025-03-28 23:00:26.790 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - -
2025-03-28 23:00:26.797 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.798 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - - - 204 - - 13.0897ms
2025-03-28 23:00:26.798 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.800 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - - - 204 - - 9.4048ms
2025-03-28 23:00:26.803 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json -
2025-03-28 23:00:26.805 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.805 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:26.807 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.815 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:26.820 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.821 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 12.003ms
2025-03-28 23:00:26.823 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json -
2025-03-28 23:00:26.823 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:26.824 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:26.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json - - 200 - application/json;+charset=utf-8 21.9936ms
2025-03-28 23:00:26.826 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:26.827 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:26.838 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:26.842 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:26.876 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 16.7101ms
2025-03-28 23:00:27.019 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:27.023 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:00:27.024 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:27.026 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json - - 200 - application/json;+charset=utf-8 203.7307ms
2025-03-28 23:00:27.030 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:27.042 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:00:27.048 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:27.044 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
2025-03-28 23:00:27.051 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 8.8039ms
2025-03-28 23:00:27.063 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:27.063 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:27.065 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:27.067 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:27.070 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:27.078 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
2025-03-28 23:00:27.079 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:27.079 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:27.082 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.751ms
2025-03-28 23:00:27.083 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:27.085 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:27.087 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 68.2508ms
2025-03-28 23:00:27.091 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:27.095 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:27.096 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.1117ms
2025-03-28 23:00:27.098 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:27.099 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.6015ms
2025-03-28 23:00:27.110 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:27.111 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:27.113 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:27.140 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
2025-03-28 23:00:27.141 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:27.142 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:27.151 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:27.152 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0559ms
2025-03-28 23:00:27.153 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:27.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 44.2936ms
2025-03-28 23:00:27.160 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:27.162 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:27.164 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:27.167 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:27'.
2025-03-28 23:00:27.168 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:27.169 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:27.179 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:27.182 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:27.183 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.6733ms
2025-03-28 23:00:27.185 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:27.187 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.8499ms
2025-03-28 23:00:28.768 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/155 - -
2025-03-28 23:00:28.770 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:28.770 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/155 - - - 204 - - 2.2149ms
2025-03-28 23:00:28.772 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/155 application/json 102
2025-03-28 23:00:28.773 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:28.773 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:28.774 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:28.781 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:28.787 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:00:28.793 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:00:28.795 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:28.797 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 21.1802ms
2025-03-28 23:00:28.798 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:28.799 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/155 application/json 102 - 200 - application/json;+charset=utf-8 27.2234ms
2025-03-28 23:00:35.520 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/155 - -
2025-03-28 23:00:35.522 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:35.523 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/155 - - - 204 - - 2.6646ms
2025-03-28 23:00:35.526 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/155 application/json 102
2025-03-28 23:00:35.527 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:35.528 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:35.529 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:00:35.546 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:00:35.556 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:00:35.571 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:00:35.581 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:35.583 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 51.5143ms
2025-03-28 23:00:35.584 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:00:35.585 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/155 application/json 102 - 200 - application/json;+charset=utf-8 59.3007ms
2025-03-28 23:00:56.654 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:00:56.672 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:56.673 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 18.5894ms
2025-03-28 23:00:56.679 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:56.680 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:56.684 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:56.688 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:56'.
2025-03-28 23:00:56.689 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:56.693 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:56.699 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:56.700 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6235ms
2025-03-28 23:00:56.702 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:56.706 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.3179ms
2025-03-28 23:00:56.765 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:00:56.767 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:56.772 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 6.9170ms
2025-03-28 23:00:56.775 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:56.776 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:56.777 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:56.782 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:56'.
2025-03-28 23:00:56.783 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:56.784 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:56.791 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:56.795 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:56.797 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.1692ms
2025-03-28 23:00:56.798 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:56.799 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.7054ms
2025-03-28 23:00:57.021 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:00:57.022 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:57.024 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:57.028 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:57'.
2025-03-28 23:00:57.031 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:57.033 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:57.037 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:57.038 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.8994ms
2025-03-28 23:00:57.039 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:00:57.040 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.5253ms
2025-03-28 23:00:57.059 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:00:57.060 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:00:57.062 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:00:57.065 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:00:57'.
2025-03-28 23:00:57.066 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:57.067 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:00:57.074 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:00:57.077 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:00:57.079 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.3616ms
2025-03-28 23:00:57.080 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:00:57.081 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 21.1731ms
2025-03-28 23:05:03.557 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:05:03.560 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:05:03.561 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.3243ms
2025-03-28 23:05:03.565 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:05:03.567 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:05:03.568 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:05:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:05:03.570 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:05:03'.
2025-03-28 23:05:03.571 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:05:03.572 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:05:03.577 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:05:03.579 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5789ms
2025-03-28 23:05:03.581 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:05:03.582 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 17.2578ms
2025-03-28 23:05:03.618 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:05:03.619 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:05:03.620 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.5485ms
2025-03-28 23:05:03.624 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:05:03.626 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:05:03.627 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:05:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:05:03.631 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:05:03'.
2025-03-28 23:05:03.632 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:05:03.633 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:05:03.643 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:05:03.646 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:05:03.647 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.4465ms
2025-03-28 23:05:03.652 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:05:03.653 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.6727ms
2025-03-28 23:06:11.850 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:06:11.856 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:11.858 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 7.7548ms
2025-03-28 23:06:11.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:11.880 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:11.884 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:11.900 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:11'.
2025-03-28 23:06:11.907 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:11.912 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:06:11.914 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:11.914 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:11.920 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 7.9080ms
2025-03-28 23:06:11.927 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:11.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:11.928 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 10.7444ms
2025-03-28 23:06:11.930 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:11.933 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:11.935 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:11.936 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.8976ms
2025-03-28 23:06:11.942 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:11'.
2025-03-28 23:06:11.946 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:11.947 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:11.963 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:11.968 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:11.970 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.3815ms
2025-03-28 23:06:11.975 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:11.976 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 48.0124ms
2025-03-28 23:06:23.656 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:06:23.660 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:23.668 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 12.1340ms
2025-03-28 23:06:23.670 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:23.674 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:23.676 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:23.687 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:23'.
2025-03-28 23:06:23.688 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:23.689 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:23.696 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:23.697 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.0337ms
2025-03-28 23:06:23.699 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:23.702 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.1042ms
2025-03-28 23:06:23.705 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:06:23.706 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:23.708 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6111ms
2025-03-28 23:06:23.710 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:23.711 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:23.712 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:23.716 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:23'.
2025-03-28 23:06:23.717 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:23.717 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:23.724 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:23.729 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:23.730 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.2049ms
2025-03-28 23:06:23.732 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:23.733 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.9730ms
2025-03-28 23:06:25.652 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:25.661 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:25.670 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:25.674 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:25'.
2025-03-28 23:06:25.676 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:25.677 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:25.683 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:25.684 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0338ms
2025-03-28 23:06:25.685 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:25.686 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 34.3898ms
2025-03-28 23:06:25.689 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:25.690 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:25.692 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:25.696 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:25'.
2025-03-28 23:06:25.698 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:25.699 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:25.708 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:25.711 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:25.712 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.778ms
2025-03-28 23:06:25.713 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:25.714 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.0997ms
2025-03-28 23:06:34.151 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:06:34.152 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:34.153 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9087ms
2025-03-28 23:06:34.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:34.156 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:34.160 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:34.162 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:34'.
2025-03-28 23:06:34.163 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:34.166 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:34.170 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:34.171 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.6341ms
2025-03-28 23:06:34.173 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:34.174 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.3982ms
2025-03-28 23:06:34.192 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:06:34.193 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:34.194 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9994ms
2025-03-28 23:06:34.195 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:34.196 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:34.197 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:34.203 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:34'.
2025-03-28 23:06:34.267 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:34.272 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:34.285 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:34.298 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:34.300 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 26.7331ms
2025-03-28 23:06:34.301 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:34.302 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 106.9979ms
2025-03-28 23:06:46.686 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:06:46.688 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:46.689 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.9552ms
2025-03-28 23:06:46.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:46.696 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:46.702 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:46.708 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:46'.
2025-03-28 23:06:46.713 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:46.715 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:46.720 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:46.721 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0087ms
2025-03-28 23:06:46.723 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:46.723 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 33.2257ms
2025-03-28 23:06:46.744 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:06:46.745 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:46.747 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.2916ms
2025-03-28 23:06:46.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:46.750 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:46.752 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:46.756 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:46'.
2025-03-28 23:06:46.758 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:46.759 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:46.767 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:46.772 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:46.773 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.5411ms
2025-03-28 23:06:46.775 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:46.776 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.4225ms
2025-03-28 23:06:54.224 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:06:54.225 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:54.226 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1318ms
2025-03-28 23:06:54.228 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:54.229 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:54.231 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:54.236 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:54'.
2025-03-28 23:06:54.237 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:54.238 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:54.242 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:54.243 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1738ms
2025-03-28 23:06:54.244 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:54.245 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 17.3017ms
2025-03-28 23:06:54.268 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:06:54.269 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:54.270 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7585ms
2025-03-28 23:06:54.271 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:54.272 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:54.273 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:54.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:54'.
2025-03-28 23:06:54.276 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:54.277 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:54.335 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:54.340 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:54.342 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 63.347ms
2025-03-28 23:06:54.346 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:54.347 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 75.8034ms
2025-03-28 23:06:56.973 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:06:56.974 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:56.976 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:56.981 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:56'.
2025-03-28 23:06:56.984 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:56.985 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:56.990 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:56.992 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.7535ms
2025-03-28 23:06:56.994 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:06:56.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.0768ms
2025-03-28 23:06:57.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:06:57.017 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:06:57.021 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:57.028 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:57'.
2025-03-28 23:06:57.030 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:57.034 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:57.042 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:57.048 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:57.049 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.6304ms
2025-03-28 23:06:57.051 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:06:57.054 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.7730ms
2025-03-28 23:06:58.539 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json -
2025-03-28 23:06:58.539 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:06:58.543 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:58.543 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:58.548 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
2025-03-28 23:06:58.550 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
2025-03-28 23:06:58.551 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:06:58.554 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:06:58.556 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:06:58.557 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:58.570 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:06:58.660 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:06:58.661 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 101.7367ms
2025-03-28 23:06:58.668 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:06:58.669 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/155 application/json - - 200 - application/json;+charset=utf-8 129.6451ms
2025-03-28 23:06:58.694 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:58.700 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:58.703 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:06:58.705 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 135.7423ms
2025-03-28 23:06:58.708 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:06:58.709 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 169.9785ms
2025-03-28 23:06:58.719 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:06:58.722 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:06:58.727 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:06:58'.
2025-03-28 23:06:58.728 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:06:58.730 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:06:58.743 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:58.750 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:06:58.753 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:06:58.755 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 20.2988ms
2025-03-28 23:06:58.756 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:06:58.757 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 38.3461ms
2025-03-28 23:07:00.487 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - -
2025-03-28 23:07:00.491 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.492 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/155 - - - 204 - - 4.6176ms
2025-03-28 23:07:00.507 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json -
2025-03-28 23:07:00.509 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.510 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:00.521 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:07:00.645 +01:00 [INF] Executed DbCommand (112ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:07:00.652 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:00.653 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 125.8377ms
2025-03-28 23:07:00.655 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:00.656 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/155 application/json - - 200 - application/json;+charset=utf-8 148.6965ms
2025-03-28 23:07:00.831 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:07:00.831 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.832 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.5848ms
2025-03-28 23:07:00.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:00.837 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.838 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:00.847 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:00'.
2025-03-28 23:07:00.858 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:00.860 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:00.875 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:00.877 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.2307ms
2025-03-28 23:07:00.885 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:00.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 51.6246ms
2025-03-28 23:07:00.925 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:07:00.928 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.930 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 5.3397ms
2025-03-28 23:07:00.933 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:00.937 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:00.939 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:00.943 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:00'.
2025-03-28 23:07:00.944 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:00.946 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:00.955 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:00.958 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:00.959 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.5707ms
2025-03-28 23:07:00.961 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:00.963 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.7977ms
2025-03-28 23:07:01.117 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:01.118 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:01.119 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:01.132 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:01'.
2025-03-28 23:07:01.134 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:01.136 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:01.141 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:01.144 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.4636ms
2025-03-28 23:07:01.145 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:01.146 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.1338ms
2025-03-28 23:07:01.314 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:01.315 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:01.317 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:01.320 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:01'.
2025-03-28 23:07:01.321 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:01.322 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:01.332 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:01.337 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:01.338 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.0113ms
2025-03-28 23:07:01.340 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:01.342 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.5861ms
2025-03-28 23:07:03.566 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 23:07:03.568 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.568 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 23:07:03.569 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 23:07:03.570 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.570 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 23:07:03.571 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.571 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 23:07:03.572 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.574 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.575 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 23:07:03.577 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.578 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 23:07:03.584 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 23:07:03.590 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.592 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.592 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 19.1645ms
2025-03-28 23:07:03.596 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 23:07:03.596 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 19.9428ms
2025-03-28 23:07:03.598 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 23:07:03.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-28 23:07:03.598 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-28 23:07:03.600 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.601 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 23:07:03.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 35.2552ms
2025-03-28 23:07:03.602 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.603 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 19.4142ms
2025-03-28 23:07:03.604 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 35.8767ms
2025-03-28 23:07:03.602 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.606 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-28 23:07:03.606 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 23:07:03.608 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 23:07:03.610 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 23:07:03.611 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.611 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.612 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 41.9256ms
2025-03-28 23:07:03.613 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.614 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 23:07:03.620 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-28 23:07:03.623 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-28 23:07:03.627 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-28 23:07:03.635 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.637 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-28 23:07:03.639 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.640 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 22.7961ms
2025-03-28 23:07:03.642 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.643 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 23.351ms
2025-03-28 23:07:03.644 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-28 23:07:03.645 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 23.098ms
2025-03-28 23:07:03.646 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-28 23:07:03.647 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 51.1374ms
2025-03-28 23:07:03.648 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-28 23:07:03.649 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 51.0198ms
2025-03-28 23:07:03.651 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 45.4949ms
2025-03-28 23:07:03.710 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:03.713 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.715 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:03.718 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:03'.
2025-03-28 23:07:03.720 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:03.721 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:03.726 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.727 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8531ms
2025-03-28 23:07:03.728 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:03.729 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.4579ms
2025-03-28 23:07:03.743 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:03.743 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:03.744 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:03.746 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:03'.
2025-03-28 23:07:03.747 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:03.748 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:03.754 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:03.758 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:03.758 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.2073ms
2025-03-28 23:07:03.760 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:03.761 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 18.2941ms
2025-03-28 23:07:06.535 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 23:07:06.536 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.539 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:06.540 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 23:07:06.541 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:06.542 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.545 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 4.5461ms
2025-03-28 23:07:06.547 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 23:07:06.552 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.554 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:07:06.554 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:06.559 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:06.559 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:07:06.562 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:06.568 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 24.1605ms
2025-03-28 23:07:06.570 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:06.570 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 23:07:06.572 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 37.1466ms
2025-03-28 23:07:06.574 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.574 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:07:06.575 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:06.577 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.578 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:06.579 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 14.6097ms
2025-03-28 23:07:06.581 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 23:07:06.582 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:06.583 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.583 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 36.3376ms
2025-03-28 23:07:06.584 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:06.587 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:07:06.588 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:07:06.591 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:06.594 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:06.596 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 14.9624ms
2025-03-28 23:07:06.601 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:06.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 31.7042ms
2025-03-28 23:07:06.607 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:07:06.610 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.613 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.3883ms
2025-03-28 23:07:06.620 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:06.623 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 41.8558ms
2025-03-28 23:07:06.705 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:07:06.707 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.707 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.0653ms
2025-03-28 23:07:06.713 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:06.715 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.720 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:06.729 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
2025-03-28 23:07:06.731 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:06.732 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:06.737 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.739 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3646ms
2025-03-28 23:07:06.740 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:06.741 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.6641ms
2025-03-28 23:07:06.875 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:07:06.878 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.882 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 6.7968ms
2025-03-28 23:07:06.886 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:06.887 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.891 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:06.894 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
2025-03-28 23:07:06.903 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:06.904 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:06.915 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:06.916 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - -
2025-03-28 23:07:06.919 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.920 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.922 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5236ms
2025-03-28 23:07:06.922 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - - - 204 - - 6.0794ms
2025-03-28 23:07:06.923 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:06.925 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 23:07:06.928 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.1018ms
2025-03-28 23:07:06.928 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.930 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:06.935 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
2025-03-28 23:07:06.936 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:06.938 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:07:06.944 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.945 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.5826ms
2025-03-28 23:07:06.946 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:06.947 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 21.9652ms
2025-03-28 23:07:06.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 23:07:06.956 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.959 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:06.966 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:06'.
2025-03-28 23:07:06.974 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 23:07:06.975 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:06.976 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:06.977 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:07:06.978 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:06.982 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:06.983 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.985 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.9121ms
2025-03-28 23:07:06.987 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:06.990 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 34.6271ms
2025-03-28 23:07:06.990 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 23:07:06.994 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:06.995 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 11.3295ms
2025-03-28 23:07:06.997 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:06.998 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 24.2917ms
2025-03-28 23:07:07.020 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 23:07:07.021 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:07.021 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:07.022 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:07.029 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 23:07:07.032 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:07.034 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 10.6425ms
2025-03-28 23:07:07.036 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:07.039 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 18.6532ms
2025-03-28 23:07:29.658 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:07:29.659 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:29.660 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2588ms
2025-03-28 23:07:29.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:29.665 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:29.666 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:29.670 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:29'.
2025-03-28 23:07:29.671 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:29.672 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:29.679 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:29.681 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.9234ms
2025-03-28 23:07:29.682 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:29.684 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.0060ms
2025-03-28 23:07:29.694 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:07:29.695 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:29.696 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8462ms
2025-03-28 23:07:29.698 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:29.699 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:29.700 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:29.702 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:29'.
2025-03-28 23:07:29.702 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:29.703 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:29.708 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:29.712 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:29.714 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.0045ms
2025-03-28 23:07:29.715 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:29.716 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 17.6085ms
2025-03-28 23:07:46.685 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:07:46.687 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:46.694 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 9.5430ms
2025-03-28 23:07:46.698 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:46.701 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:46.704 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:46.707 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:46'.
2025-03-28 23:07:46.708 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:46.710 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:46.751 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:07:46.753 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:46.753 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9092ms
2025-03-28 23:07:46.755 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:46.756 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:46.757 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:46.760 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:46'.
2025-03-28 23:07:46.761 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:46.762 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:46.798 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:46.802 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:46.809 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 96.4259ms
2025-03-28 23:07:46.811 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:46.812 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:46.813 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 49.7434ms
2025-03-28 23:07:46.814 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 116.2888ms
2025-03-28 23:07:46.815 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:46.817 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 62.2869ms
2025-03-28 23:07:52.496 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:07:52.498 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:52.499 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:52'.
2025-03-28 23:07:52.500 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:07:52.501 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:52.505 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:52.509 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:52.511 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:52.512 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 10.1646ms
2025-03-28 23:07:52.513 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:07:52.514 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 17.2024ms
2025-03-28 23:07:52.518 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:07:52.519 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:52.522 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:52'.
2025-03-28 23:07:52.523 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:07:52.523 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:52.529 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:52.533 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:52.535 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:52.537 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.122ms
2025-03-28 23:07:52.537 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:07:52.538 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 20.2723ms
2025-03-28 23:07:54.464 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 23:07:54.465 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.466 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:54.467 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:54.468 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - -
2025-03-28 23:07:54.469 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.470 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/153 - - - 204 - - 2.4116ms
2025-03-28 23:07:54.478 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:07:54.478 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 23:07:54.487 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.489 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:54.489 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:54.491 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:54.491 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:07:54.492 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 23.0591ms
2025-03-28 23:07:54.494 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - -
2025-03-28 23:07:54.495 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:54.495 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.496 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 32.3398ms
2025-03-28 23:07:54.496 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:54.498 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:07:54.499 +01:00 [INF] Route matched with {action = "GetMapInfo", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapInfo(Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:54.502 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.503 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.2502ms
2025-03-28 23:07:54.504 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:54.504 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json -
2025-03-28 23:07:54.506 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:07:54.505 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 27.0181ms
2025-03-28 23:07:54.507 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.511 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:54.511 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:54.513 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:07:54.514 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:07:54.515 +01:00 [INF] Executed action JurMaps.Controllers.MapController.GetMapInfo (JurMaps) in 12.6219ms
2025-03-28 23:07:54.517 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.GetMapInfo (JurMaps)'
2025-03-28 23:07:54.517 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/getmapinfo/153 - - - 200 - application/json;+charset=utf-8 23.8120ms
2025-03-28 23:07:54.520 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:07:54.523 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.524 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 8.0563ms
2025-03-28 23:07:54.525 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:07:54.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/153 application/json - - 200 - application/json;+charset=utf-8 21.3360ms
2025-03-28 23:07:54.626 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:07:54.635 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.641 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 14.5998ms
2025-03-28 23:07:54.646 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:54.647 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.649 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.652 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.654 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:54.655 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:54.660 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.662 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7528ms
2025-03-28 23:07:54.663 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:54.664 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.3501ms
2025-03-28 23:07:54.762 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:07:54.764 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.765 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.5832ms
2025-03-28 23:07:54.772 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:54.776 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.780 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.782 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.784 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:54.786 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:54.793 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:54.796 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.801 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.4133ms
2025-03-28 23:07:54.802 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:54.803 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - -
2025-03-28 23:07:54.804 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.5607ms
2025-03-28 23:07:54.805 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.807 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuseridfromtoken - - - 204 - - 3.5579ms
2025-03-28 23:07:54.810 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 23:07:54.811 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.812 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.815 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.816 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:54.818 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:07:54.825 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.826 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.3345ms
2025-03-28 23:07:54.827 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:54.828 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 17.8212ms
2025-03-28 23:07:54.842 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:54.843 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.846 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.848 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 23:07:54.856 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.856 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.859 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:54.861 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:54.863 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:54.866 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:54.871 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.872 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7501ms
2025-03-28 23:07:54.873 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:54.874 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.2995ms
2025-03-28 23:07:54.875 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 23:07:54.878 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.879 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 8.9279ms
2025-03-28 23:07:54.880 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:54.881 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 32.3754ms
2025-03-28 23:07:54.901 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:54.902 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.903 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.907 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.908 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:54.908 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:54.915 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:54.928 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.932 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 21.326ms
2025-03-28 23:07:54.933 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:54.934 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.4926ms
2025-03-28 23:07:54.939 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 23:07:54.942 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.946 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.950 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.950 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:54.954 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:07:54.958 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.960 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.049ms
2025-03-28 23:07:54.962 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:07:54.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 23.6223ms
2025-03-28 23:07:54.977 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:07:54.978 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.980 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:54.982 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - -
2025-03-28 23:07:54.984 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:54'.
2025-03-28 23:07:54.985 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:54.986 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:54.987 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:54.988 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:54.989 +01:00 [INF] Route matched with {action = "HasLiked", controller = "Map"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] HasLiked(Int32, Int32) on controller JurMaps.Controllers.MapController (JurMaps).
2025-03-28 23:07:54.995 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:54.997 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.9571ms
2025-03-28 23:07:54.997 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__mapId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId"
FROM "UserMapLikes" AS u
WHERE u."UserId" = @__userId_0 AND u."MapId" = @__mapId_1
LIMIT 1
2025-03-28 23:07:54.999 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:07:55.002 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:55.003 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 25.1624ms
2025-03-28 23:07:55.004 +01:00 [INF] Executed action JurMaps.Controllers.MapController.HasLiked (JurMaps) in 11.7069ms
2025-03-28 23:07:55.005 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapController.HasLiked (JurMaps)'
2025-03-28 23:07:55.006 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/map/hasliked/153/3 - - - 200 - application/json;+charset=utf-8 24.2520ms
2025-03-28 23:07:55.015 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:07:55.016 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:07:55.017 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:07:55.020 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:07:55'.
2025-03-28 23:07:55.020 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:55.021 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:07:55.029 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:07:55.033 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:07:55.034 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.6012ms
2025-03-28 23:07:55.036 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:07:55.037 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.2502ms
2025-03-28 23:08:54.013 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-28 23:08:54.153 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-28 23:08:54.198 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-28 23:08:54.199 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 23:08:54.200 +01:00 [INF] Hosting environment: Development
2025-03-28 23:08:54.200 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-28 23:08:54.783 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 23:08:58.918 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-28 23:08:59.019 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 23:08:59.023 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4243.6744ms
2025-03-28 23:08:59.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-28 23:08:59.234 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 142.2044ms
2025-03-28 23:09:02.095 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 23:09:12.111 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 23:09:12.112 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10017.0440ms
2025-03-28 23:09:15.141 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 23:09:25.146 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-28 23:09:25.147 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10006.3100ms
2025-03-28 23:09:26.201 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-28 23:09:28.183 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-28 23:09:28.283 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-28 23:09:28.290 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 107.4481ms
2025-03-28 23:09:29.390 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:09:29.400 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:29.405 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 14.5987ms
2025-03-28 23:09:29.407 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:09:29.413 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:29.425 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:09:29.426 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:29.427 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.5041ms
2025-03-28 23:09:29.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:09:29.430 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:29.692 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:29.692 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:29.724 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:29'.
2025-03-28 23:09:29.729 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:29'.
2025-03-28 23:09:29.735 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:29.735 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:29.767 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:29.767 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:38.220 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:38.281 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8508.7056ms
2025-03-28 23:09:38.284 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:38.285 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 8878.0924ms
2025-03-28 23:09:38.328 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:09:38.329 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:38.330 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1029ms
2025-03-28 23:09:38.332 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:09:38.333 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:38.335 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:38.339 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:38'.
2025-03-28 23:09:38.341 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:38.342 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:38.355 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:09:38.356 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:38.357 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.2804ms
2025-03-28 23:09:38.357 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:38.360 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 16.5324ms
2025-03-28 23:09:38.361 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:38.363 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.6248ms
2025-03-28 23:09:40.521 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:09:40.610 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:40.614 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10841.5947ms
2025-03-28 23:09:40.615 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:09:40.617 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:40.617 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:40.619 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:40.624 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
2025-03-28 23:09:40.624 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 11194.9630ms
2025-03-28 23:09:40.624 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:40.626 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:40.643 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:09:40.647 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:40.649 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.9314ms
2025-03-28 23:09:40.650 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:40.651 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.1673ms
2025-03-28 23:09:40.659 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:09:40.660 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:40.661 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:40.665 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
2025-03-28 23:09:40.666 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:40.668 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:40.673 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:40.674 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6084ms
2025-03-28 23:09:40.675 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:09:40.676 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.7604ms
2025-03-28 23:09:40.680 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:09:40.681 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:09:40.683 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:09:40.687 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:09:40'.
2025-03-28 23:09:40.688 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:40.688 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:09:40.738 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:09:40.741 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:09:40.743 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 52.6424ms
2025-03-28 23:09:40.743 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:09:40.745 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 64.8142ms
2025-03-28 23:29:51.265 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:29:51.267 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:51.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:51'.
2025-03-28 23:29:51.278 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:29:51.284 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:51.345 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:51.451 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:29:51.471 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:51.474 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 188.0334ms
2025-03-28 23:29:51.475 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:29:51.476 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 211.2331ms
2025-03-28 23:29:54.473 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:29:54.474 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:54.475 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1440ms
2025-03-28 23:29:54.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:29:54.481 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:54.482 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:54.504 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:54'.
2025-03-28 23:29:54.507 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:54.508 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:54.514 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:54.516 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.3619ms
2025-03-28 23:29:54.517 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:54.520 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 41.3923ms
2025-03-28 23:29:55.641 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json -
2025-03-28 23:29:55.643 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:55.650 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
2025-03-28 23:29:55.651 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.657 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:55.697 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json -
2025-03-28 23:29:55.698 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:55.704 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
2025-03-28 23:29:55.706 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.709 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:55.745 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:29:55.758 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:55.768 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json -
2025-03-28 23:29:55.768 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:29:55.769 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 58.3264ms
2025-03-28 23:29:55.774 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.773 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:55.772 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:55.776 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json - - 200 - application/json;+charset=utf-8 78.8994ms
2025-03-28 23:29:55.783 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
2025-03-28 23:29:55.795 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:29:55.791 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
2025-03-28 23:29:55.798 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.803 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:55.803 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:55.822 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:29:55.833 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:55.841 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 27.6898ms
2025-03-28 23:29:55.858 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.862 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json - - 200 - application/json;+charset=utf-8 94.0288ms
2025-03-28 23:29:55.919 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:29:55.927 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:55.930 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 270.8155ms
2025-03-28 23:29:55.933 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:29:55.934 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:55.934 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json - - 200 - application/json;+charset=utf-8 293.7794ms
2025-03-28 23:29:55.946 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:55.951 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:29:55.956 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 144.2197ms
2025-03-28 23:29:55.958 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:29:55.959 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 191.1010ms
2025-03-28 23:29:55.968 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:29:55.971 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:55.976 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:55'.
2025-03-28 23:29:55.977 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:29:55.978 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:55.987 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:55.991 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:55.995 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:29:55.997 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.3437ms
2025-03-28 23:29:55.998 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:29:56.000 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.5385ms
2025-03-28 23:29:56.080 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - -
2025-03-28 23:29:56.081 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.083 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - -
2025-03-28 23:29:56.083 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - - - 204 - - 3.7574ms
2025-03-28 23:29:56.085 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.089 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json -
2025-03-28 23:29:56.089 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - - - 204 - - 5.4944ms
2025-03-28 23:29:56.092 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.099 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:29:56.119 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:56.150 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:29:56.154 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:29:56.154 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.160 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.161 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:56.168 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
2025-03-28 23:29:56.173 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:56.177 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:56.185 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 64.1227ms
2025-03-28 23:29:56.195 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json -
2025-03-28 23:29:56.185 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:29:56.204 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:29:56.204 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.205 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.206 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.207 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json - - 200 - application/json;+charset=utf-8 120.3731ms
2025-03-28 23:29:56.208 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:29:56.211 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.9932ms
2025-03-28 23:29:56.209 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 24.4034ms
2025-03-28 23:29:56.211 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:29:56.219 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:29:56.226 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:29:56.227 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:56.230 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.232 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.236 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 85.7173ms
2025-03-28 23:29:56.237 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:56.238 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:56.247 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
2025-03-28 23:29:56.253 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:29:56.255 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
2025-03-28 23:29:56.257 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:29:56.261 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.263 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:56.265 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:56.267 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 32.9613ms
2025-03-28 23:29:56.268 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:56.290 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:29:56.296 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json - - 200 - application/json;+charset=utf-8 101.0801ms
2025-03-28 23:29:56.298 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.330 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:56.333 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 38.9715ms
2025-03-28 23:29:56.339 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.339 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:29:56.342 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 53.0577ms
2025-03-28 23:29:56.342 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 123.5405ms
2025-03-28 23:29:56.343 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:29:56.344 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:29:56.347 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:29:56.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 138.4396ms
2025-03-28 23:29:56.352 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:29:56.364 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:29:56'.
2025-03-28 23:29:56.366 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:29:56.367 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:29:56.376 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:29:56.383 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:29:56.384 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.2031ms
2025-03-28 23:29:56.385 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:29:56.387 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 43.7021ms
2025-03-28 23:30:02.434 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/156 - -
2025-03-28 23:30:02.435 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:02.436 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/156 - - - 204 - - 1.4465ms
2025-03-28 23:30:02.437 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/156 application/json 102
2025-03-28 23:30:02.438 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:02.438 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:30:02.442 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:30:02.465 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:30:02.497 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:30:02.514 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:30:02.516 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:02.518 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 74.6663ms
2025-03-28 23:30:02.519 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:30:02.519 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/156 application/json 102 - 200 - application/json;+charset=utf-8 82.5236ms
2025-03-28 23:30:04.192 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/156 application/json 102
2025-03-28 23:30:04.193 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:04.193 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:30:04.194 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:30:04.200 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:30:04.210 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:30:04.214 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:30:04.216 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:04.217 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 21.8479ms
2025-03-28 23:30:04.218 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:30:04.218 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/156 application/json 102 - 200 - application/json;+charset=utf-8 26.5702ms
2025-03-28 23:30:09.649 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:30:09.650 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:09.652 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0774ms
2025-03-28 23:30:09.655 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:30:09.656 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:09.658 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:09.664 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:09'.
2025-03-28 23:30:09.666 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:09.669 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:09.675 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:09.677 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1762ms
2025-03-28 23:30:09.678 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:09.679 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.7340ms
2025-03-28 23:30:09.686 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:30:09.688 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:09.689 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.3130ms
2025-03-28 23:30:09.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:30:09.692 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:09.693 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:09.698 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:09'.
2025-03-28 23:30:09.700 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:09.702 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:09.709 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:09.714 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:09.715 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.6865ms
2025-03-28 23:30:09.717 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:09.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.2917ms
2025-03-28 23:30:17.243 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:30:17.244 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:17.245 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.6516ms
2025-03-28 23:30:17.247 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:30:17.248 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:17.250 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:17.256 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:17'.
2025-03-28 23:30:17.257 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:17.258 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:17.263 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:17.265 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.485ms
2025-03-28 23:30:17.266 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:17.267 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.9688ms
2025-03-28 23:30:17.277 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:30:17.278 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:17.279 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.6696ms
2025-03-28 23:30:17.280 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:30:17.281 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:17.283 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:17.289 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:17'.
2025-03-28 23:30:17.291 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:17.292 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:17.301 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:17.306 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:17.308 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.2596ms
2025-03-28 23:30:17.309 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:17.310 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.6074ms
2025-03-28 23:30:20.056 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json -
2025-03-28 23:30:20.057 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:30:20.058 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:20.059 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:20.063 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
2025-03-28 23:30:20.069 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
2025-03-28 23:30:20.070 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:30:20.071 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:30:20.072 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:30:20.073 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:20.081 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:30:20.084 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:20.086 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:20.091 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:20.091 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 16.0087ms
2025-03-28 23:30:20.095 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:30:20.097 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:30:20.098 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 21.6302ms
2025-03-28 23:30:20.099 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/156 application/json - - 200 - application/json;+charset=utf-8 42.9218ms
2025-03-28 23:30:20.100 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:30:20.103 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 45.4638ms
2025-03-28 23:30:20.110 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:30:20.112 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:20.135 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:20'.
2025-03-28 23:30:20.143 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:30:20.145 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:20.156 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:20.182 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:20.190 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:30:20.194 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 46.0891ms
2025-03-28 23:30:20.195 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:30:20.196 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 85.6661ms
2025-03-28 23:30:21.077 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - -
2025-03-28 23:30:21.079 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.081 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/156 - - - 204 - - 4.3496ms
2025-03-28 23:30:21.084 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json -
2025-03-28 23:30:21.085 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.086 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:30:21.087 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:30:21.099 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:30:21.104 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:21.112 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.5866ms
2025-03-28 23:30:21.115 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:30:21.117 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/156 application/json - - 200 - application/json;+charset=utf-8 33.4613ms
2025-03-28 23:30:21.244 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:30:21.245 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.246 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:21.264 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
2025-03-28 23:30:21.265 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:21.266 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:21.273 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:21.277 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.0582ms
2025-03-28 23:30:21.279 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:21.280 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.2257ms
2025-03-28 23:30:21.343 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:30:21.377 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.387 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:21.408 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
2025-03-28 23:30:21.409 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:21.414 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:21.428 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:21.450 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:21.466 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:30:21.474 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.474 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 54.6814ms
2025-03-28 23:30:21.478 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:21.480 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:21.488 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
2025-03-28 23:30:21.489 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 145.7440ms
2025-03-28 23:30:21.493 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:21.495 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:21.499 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:30:21.501 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:30:21.501 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:21.503 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:30:21.504 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.9632ms
2025-03-28 23:30:21.510 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:30:21'.
2025-03-28 23:30:21.514 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:30:21.515 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:21.519 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:30:21.517 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 50.0772ms
2025-03-28 23:30:21.536 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:30:21.541 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:30:21.542 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.1748ms
2025-03-28 23:30:21.543 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:30:21.544 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 44.8704ms
2025-03-28 23:37:04.723 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:04.724 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:04.725 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1285ms
2025-03-28 23:37:04.728 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:04.729 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:04.732 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:04.745 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:04'.
2025-03-28 23:37:04.750 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:04.753 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:04.760 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:04.761 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:04.761 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:04.762 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.7258ms
2025-03-28 23:37:04.764 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:04.765 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.9483ms
2025-03-28 23:37:04.766 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:04.768 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:04.770 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:04.771 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 42.9550ms
2025-03-28 23:37:04.781 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:04'.
2025-03-28 23:37:04.784 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:04.785 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:04.854 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:04.858 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:04.860 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 70.692ms
2025-03-28 23:37:04.861 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:04.862 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 98.1503ms
2025-03-28 23:37:13.123 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:13.124 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:13.125 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.7406ms
2025-03-28 23:37:13.127 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:13.130 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:13.132 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:13.139 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:13'.
2025-03-28 23:37:13.140 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:13.141 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:13.149 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:13.151 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2771ms
2025-03-28 23:37:13.153 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:13.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.8509ms
2025-03-28 23:37:13.167 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:13.167 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:13.170 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.1067ms
2025-03-28 23:37:13.172 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:13.173 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:13.175 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:13.189 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:13'.
2025-03-28 23:37:13.192 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:13.194 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:13.207 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:13.214 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:13.216 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.7626ms
2025-03-28 23:37:13.217 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:13.219 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 47.7273ms
2025-03-28 23:37:19.469 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:19.470 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:19.471 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2457ms
2025-03-28 23:37:19.474 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:19.478 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:19.481 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:19.488 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:19'.
2025-03-28 23:37:19.490 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:19.492 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:19.496 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:19.498 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6494ms
2025-03-28 23:37:19.499 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:19.500 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.6477ms
2025-03-28 23:37:19.507 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:19.508 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:19.509 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8528ms
2025-03-28 23:37:19.511 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:19.512 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:19.513 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:19.518 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:19'.
2025-03-28 23:37:19.519 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:19.519 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:19.526 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:19.532 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:19.534 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.5902ms
2025-03-28 23:37:19.534 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:19.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.3572ms
2025-03-28 23:37:25.942 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:25.943 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:25.944 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8487ms
2025-03-28 23:37:25.945 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:25.947 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:25.949 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:25.955 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:25'.
2025-03-28 23:37:25.956 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:25.957 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:25.962 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:25.963 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3901ms
2025-03-28 23:37:25.964 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:25.965 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 20.0180ms
2025-03-28 23:37:25.980 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:25.981 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:25.982 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.3177ms
2025-03-28 23:37:25.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:25.985 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:25.987 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:25.994 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:25'.
2025-03-28 23:37:25.997 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:25.998 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:26.010 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:26.021 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:26.024 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.5194ms
2025-03-28 23:37:26.026 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:26.027 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.8162ms
2025-03-28 23:37:39.512 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:39.513 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:39.514 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1561ms
2025-03-28 23:37:39.517 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:39.518 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:39.520 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:39.526 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:39'.
2025-03-28 23:37:39.527 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:39.528 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:39.534 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:39.537 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0616ms
2025-03-28 23:37:39.538 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:39.539 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.2253ms
2025-03-28 23:37:39.542 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:39.543 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:39.544 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.2456ms
2025-03-28 23:37:39.546 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:39.546 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:39.548 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:39.553 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:39'.
2025-03-28 23:37:39.554 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:39.555 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:39.562 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:39.566 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:39.567 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.5407ms
2025-03-28 23:37:39.568 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:39.569 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.7751ms
2025-03-28 23:37:48.587 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:37:48.589 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:48.590 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0682ms
2025-03-28 23:37:48.594 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:48.596 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:48.597 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:48.604 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:48'.
2025-03-28 23:37:48.606 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:48.608 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:48.614 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:48.615 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0694ms
2025-03-28 23:37:48.616 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:48.617 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.0186ms
2025-03-28 23:37:48.633 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:37:48.634 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:48.635 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.0746ms
2025-03-28 23:37:48.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:48.641 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:48.643 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:48.721 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:48'.
2025-03-28 23:37:48.723 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:48.725 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:48.734 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:48.745 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:48.748 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 19.8571ms
2025-03-28 23:37:48.754 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:48.757 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 118.6051ms
2025-03-28 23:37:50.565 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:37:50.566 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:50.567 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:50.575 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:50'.
2025-03-28 23:37:50.577 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:50.578 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:50.583 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:50.584 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5558ms
2025-03-28 23:37:50.585 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:37:50.587 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.0649ms
2025-03-28 23:37:50.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:37:50.598 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:37:50.599 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:37:50.606 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:37:50'.
2025-03-28 23:37:50.607 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:50.608 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:37:50.614 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:37:50.618 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:37:50.619 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.3405ms
2025-03-28 23:37:50.620 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:37:50.621 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.2356ms
2025-03-28 23:38:00.540 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:38:00.541 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:00.542 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1500ms
2025-03-28 23:38:00.544 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:38:00.545 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:00.546 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:38:00.552 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:00'.
2025-03-28 23:38:00.553 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:38:00.553 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:38:00.559 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:38:00.560 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9875ms
2025-03-28 23:38:00.561 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:38:00.562 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.2165ms
2025-03-28 23:38:00.567 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:38:00.568 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:00.569 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5947ms
2025-03-28 23:38:00.571 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:38:00.571 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:00.573 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:38:00.578 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:00'.
2025-03-28 23:38:00.579 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:38:00.580 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:38:00.586 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:38:00.590 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:38:00.591 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.5269ms
2025-03-28 23:38:00.592 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:38:00.593 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.5336ms
2025-03-28 23:38:43.253 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:38:43.255 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:43.257 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.4414ms
2025-03-28 23:38:43.260 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:38:43.263 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:43.267 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:38:43.277 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:43'.
2025-03-28 23:38:43.280 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:38:43.281 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:38:43.288 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:38:43.290 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3096ms
2025-03-28 23:38:43.291 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:38:43.293 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.8363ms
2025-03-28 23:38:43.308 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:38:43.309 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:43.310 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.0733ms
2025-03-28 23:38:43.312 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:38:43.313 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:38:43.314 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:38:43.320 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:38:43'.
2025-03-28 23:38:43.321 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:38:43.323 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:38:43.335 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:38:43.338 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:38:43.340 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.4513ms
2025-03-28 23:38:43.342 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:38:43.343 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.2609ms
2025-03-28 23:39:05.126 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:39:05.127 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:05.130 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.4980ms
2025-03-28 23:39:05.133 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:39:05.135 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:05.139 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:05.151 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:05'.
2025-03-28 23:39:05.153 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:05.154 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:05.160 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:05.162 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9239ms
2025-03-28 23:39:05.163 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:05.164 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.1298ms
2025-03-28 23:39:05.167 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:39:05.168 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:05.169 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5699ms
2025-03-28 23:39:05.171 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:39:05.172 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:05.174 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:05.179 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:05'.
2025-03-28 23:39:05.180 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:05.181 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:05.187 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:05.193 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:05.194 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.2978ms
2025-03-28 23:39:05.195 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:05.196 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.6059ms
2025-03-28 23:39:58.791 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:39:58.795 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:58.803 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:58'.
2025-03-28 23:39:58.804 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:39:58.805 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:58.813 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:58.823 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:39:58.826 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:58.829 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 21.3102ms
2025-03-28 23:39:58.831 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:39:58.832 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 40.7542ms
2025-03-28 23:39:58.940 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:39:58.943 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:58.955 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:58'.
2025-03-28 23:39:58.956 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:58.957 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:58.968 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:39:58.972 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:58.975 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.3724ms
2025-03-28 23:39:58.976 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:58.976 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 36.0741ms
2025-03-28 23:39:58.999 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:39:59.000 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.000 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9746ms
2025-03-28 23:39:59.003 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:39:59.004 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.005 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.011 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.012 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.013 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.017 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:39:59.020 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.020 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.023 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.2673ms
2025-03-28 23:39:59.039 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.040 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.041 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:59.041 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 38.3164ms
2025-03-28 23:39:59.044 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:59.054 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:39:59.059 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.061 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.9877ms
2025-03-28 23:39:59.062 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:59.064 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 46.3593ms
2025-03-28 23:39:59.077 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:39:59.079 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:39:59.082 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.083 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.088 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.096 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.097 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:39:59.098 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:59.099 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.100 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:59.107 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.116 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.121 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:39:59.128 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 25.8443ms
2025-03-28 23:39:59.131 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:39:59.134 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 57.5364ms
2025-03-28 23:39:59.142 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:39:59.143 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.151 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.157 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:39:59.158 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.170 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.178 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.184 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:39:59.187 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 24.6528ms
2025-03-28 23:39:59.192 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:39:59.193 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 51.3870ms
2025-03-28 23:39:59.196 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:39:59.204 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.207 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 102.4444ms
2025-03-28 23:39:59.211 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:39:59.212 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 133.0814ms
2025-03-28 23:39:59.303 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:39:59.306 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.308 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:39:59.309 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 6.2379ms
2025-03-28 23:39:59.310 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.310 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:39:59.311 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 3.1881ms
2025-03-28 23:39:59.312 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.315 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:39:59.316 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:59.340 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:39:59.363 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.378 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 60.2954ms
2025-03-28 23:39:59.384 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:39:59.388 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:39:59.393 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.394 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 84.2754ms
2025-03-28 23:39:59.395 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:39:59.400 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:39:59.400 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:39:59.401 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.409 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.430 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.435 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.436 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:39:59.436 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.442 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:39:59.442 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.448 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.449 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.451 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 9.1129ms
2025-03-28 23:39:59.450 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 42.2548ms
2025-03-28 23:39:59.454 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:39:59.455 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 10.8783ms
2025-03-28 23:39:59.468 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:39:59.469 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.470 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.471 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 87.2744ms
2025-03-28 23:39:59.473 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.477 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:39:59.476 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 76.1232ms
2025-03-28 23:39:59.488 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.489 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.493 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:59.495 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.496 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.508 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.514 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.516 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.518 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.523 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.525 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.526 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.1727ms
2025-03-28 23:39:59.528 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.3856ms
2025-03-28 23:39:59.531 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:39:59.531 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:39:59.533 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:59.534 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:39:59.534 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.0931ms
2025-03-28 23:39:59.545 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 90.6842ms
2025-03-28 23:39:59.546 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:39:59.554 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:39:59'.
2025-03-28 23:39:59.555 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:59.558 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:39:59.566 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:39:59.568 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:39:59.570 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.0159ms
2025-03-28 23:39:59.572 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:39:59.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 41.6261ms
2025-03-28 23:40:01.763 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - -
2025-03-28 23:40:01.763 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:01.764 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - - - 204 - - 1.3768ms
2025-03-28 23:40:01.765 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 103
2025-03-28 23:40:01.766 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:01.766 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:01.767 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:40:01.772 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:40:01.778 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:40:01.781 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:40:01.783 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:01.784 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.2954ms
2025-03-28 23:40:01.785 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:01.786 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 103 - 200 - application/json;+charset=utf-8 21.2521ms
2025-03-28 23:40:03.459 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102
2025-03-28 23:40:03.460 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:03.461 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:03.461 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:40:03.466 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:40:03.472 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:40:03.475 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:40:03.477 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:03.478 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.74ms
2025-03-28 23:40:03.479 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:03.480 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102 - 200 - application/json;+charset=utf-8 21.2211ms
2025-03-28 23:40:07.419 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:40:07.420 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:40:07.420 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:07.421 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:07.424 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
2025-03-28 23:40:07.427 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
2025-03-28 23:40:07.428 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:40:07.429 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:40:07.429 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:40:07.430 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:07.435 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:40:07.438 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:07.440 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:07.443 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:07.444 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.3038ms
2025-03-28 23:40:07.447 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:40:07.448 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:40:07.449 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 16.1768ms
2025-03-28 23:40:07.450 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 31.0585ms
2025-03-28 23:40:07.451 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:40:07.455 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.2058ms
2025-03-28 23:40:07.460 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:40:07.461 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:07.470 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:07'.
2025-03-28 23:40:07.471 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:40:07.472 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:07.478 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:07.485 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:07.491 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:40:07.493 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.6098ms
2025-03-28 23:40:07.494 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:40:07.496 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 36.0181ms
2025-03-28 23:40:08.372 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:40:08.376 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.377 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 5.5104ms
2025-03-28 23:40:08.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:40:08.380 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.381 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:40:08.384 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:40:08.393 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:40:08.397 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:08.400 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 13.3779ms
2025-03-28 23:40:08.401 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:40:08.403 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 23.5654ms
2025-03-28 23:40:08.527 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:40:08.529 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.530 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.9985ms
2025-03-28 23:40:08.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:40:08.534 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.540 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:08.553 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
2025-03-28 23:40:08.554 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:40:08.556 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:08.563 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:08.566 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.2621ms
2025-03-28 23:40:08.568 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:40:08.579 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 45.4925ms
2025-03-28 23:40:08.618 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:40:08.619 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.619 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5994ms
2025-03-28 23:40:08.632 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:40:08.635 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.641 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:08.650 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
2025-03-28 23:40:08.652 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:40:08.653 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:08.660 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:08.664 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:08.667 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.1344ms
2025-03-28 23:40:08.669 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:40:08.670 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 37.8555ms
2025-03-28 23:40:08.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:40:08.735 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.741 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:08.752 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
2025-03-28 23:40:08.755 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:40:08.756 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:08.759 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:40:08.761 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:08.762 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:40:08.763 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:08.767 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:40:08'.
2025-03-28 23:40:08.769 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.7804ms
2025-03-28 23:40:08.770 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:40:08.772 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:40:08.774 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:40:08.775 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 53.3831ms
2025-03-28 23:40:08.782 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:40:08.788 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:08.790 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.2643ms
2025-03-28 23:40:08.791 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:40:08.791 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.5481ms
2025-03-28 23:40:10.828 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - -
2025-03-28 23:40:10.828 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:10.830 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - - - 204 - - 1.9297ms
2025-03-28 23:40:10.831 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102
2025-03-28 23:40:10.832 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:40:10.833 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:10.834 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:40:10.840 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:40:10.845 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:40:10.850 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:40:10.853 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:40:10.854 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 18.2961ms
2025-03-28 23:40:10.855 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:40:10.856 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102 - 200 - application/json;+charset=utf-8 24.6452ms
2025-03-28 23:41:46.728 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:41:46.749 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:41:46.753 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 24.9988ms
2025-03-28 23:41:46.755 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:41:46.769 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:41:46.774 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:41:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:41:46.789 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:41:46.804 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:41:46'.
2025-03-28 23:41:46.805 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:41:46.807 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:41:46.811 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 21.8025ms
2025-03-28 23:41:46.812 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:41:46.813 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:41:46.819 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:41:46.820 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:41:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:41:46.823 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:41:46.833 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:41:46'.
2025-03-28 23:41:46.836 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 17.5667ms
2025-03-28 23:41:46.840 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:41:46.842 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:41:46.844 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:41:46.845 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 89.8755ms
2025-03-28 23:41:46.854 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:41:46.859 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:41:46.860 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.075ms
2025-03-28 23:41:46.861 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:41:46.865 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 51.7670ms
2025-03-28 23:42:03.302 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:03.306 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:42:03.308 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:03.309 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:03.311 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
2025-03-28 23:42:03.315 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
2025-03-28 23:42:03.316 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:03.317 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:03.317 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:03.318 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:03.325 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:03.327 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:42:03.331 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:03.333 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:03.335 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:03.336 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.4042ms
2025-03-28 23:42:03.337 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.8691ms
2025-03-28 23:42:03.338 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:03.339 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:03.340 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 34.2274ms
2025-03-28 23:42:03.341 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 38.8317ms
2025-03-28 23:42:03.345 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:03.346 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:03.357 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:03'.
2025-03-28 23:42:03.358 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:03.359 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:03.364 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:03.369 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:03.373 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:03.374 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 13.9892ms
2025-03-28 23:42:03.375 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:03.376 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.3140ms
2025-03-28 23:42:03.996 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:42:03.997 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:03.999 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 2.8339ms
2025-03-28 23:42:04.003 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:42:04.005 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.005 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:04.007 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:04.014 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:42:04.018 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:04.020 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.5682ms
2025-03-28 23:42:04.022 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:04.023 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 20.4779ms
2025-03-28 23:42:04.147 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:42:04.151 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.157 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 9.3666ms
2025-03-28 23:42:04.158 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:04.159 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.162 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:04.175 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
2025-03-28 23:42:04.177 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:04.179 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:04.187 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:04.191 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.3403ms
2025-03-28 23:42:04.194 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:04.196 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.5256ms
2025-03-28 23:42:04.242 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:42:04.245 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.247 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 5.7656ms
2025-03-28 23:42:04.252 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:04.253 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.256 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:04.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
2025-03-28 23:42:04.276 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:04.278 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:04.289 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:04.300 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:04.304 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.7111ms
2025-03-28 23:42:04.308 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:04.310 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 58.2624ms
2025-03-28 23:42:04.324 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:04.325 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.328 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:04.343 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
2025-03-28 23:42:04.346 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:04.348 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:04.354 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:04.356 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:04.356 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:04.357 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:04.358 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.0704ms
2025-03-28 23:42:04.368 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:04'.
2025-03-28 23:42:04.370 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:04.371 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:04.373 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 48.4183ms
2025-03-28 23:42:04.374 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:04.384 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:04.388 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:04.391 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.5442ms
2025-03-28 23:42:04.393 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:04.394 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 40.7148ms
2025-03-28 23:42:08.761 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - -
2025-03-28 23:42:08.761 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:08.762 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/157 - - - 204 - - 1.5337ms
2025-03-28 23:42:08.763 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102
2025-03-28 23:42:08.764 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:08.765 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:42:08.766 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:08.771 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:42:08.776 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:42:08.779 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:42:08.782 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:08.783 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.9105ms
2025-03-28 23:42:08.784 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:42:08.786 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 102 - 200 - application/json;+charset=utf-8 23.0045ms
2025-03-28 23:42:11.382 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 100
2025-03-28 23:42:11.383 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:11.384 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:42:11.385 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:11.391 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:42:11.397 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:42:11.401 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:42:11.403 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:11.405 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 17.879ms
2025-03-28 23:42:11.406 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:42:11.407 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/157 application/json 100 - 200 - application/json;+charset=utf-8 24.6841ms
2025-03-28 23:42:15.510 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:15.510 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:42:15.512 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:15.512 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:15.515 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
2025-03-28 23:42:15.519 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
2025-03-28 23:42:15.520 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:15.521 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:15.522 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:15.523 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:15.528 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:15.536 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:15.539 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:15.543 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.1101ms
2025-03-28 23:42:15.544 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:15.546 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.0964ms
2025-03-28 23:42:15.550 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:15.552 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:15.556 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:15'.
2025-03-28 23:42:15.557 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:15.557 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:15.562 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:15.568 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:15.571 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:15.573 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 14.4379ms
2025-03-28 23:42:15.576 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:15.577 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 26.2609ms
2025-03-28 23:42:15.581 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:42:15.584 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:15.585 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 60.0474ms
2025-03-28 23:42:15.586 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:15.587 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 76.6660ms
2025-03-28 23:42:16.076 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:42:16.078 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.079 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 3.6247ms
2025-03-28 23:42:16.081 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:42:16.082 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.083 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:16.084 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:16.092 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:42:16.096 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:16.098 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.9595ms
2025-03-28 23:42:16.099 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:16.100 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 19.1138ms
2025-03-28 23:42:16.209 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:42:16.212 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.213 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.4840ms
2025-03-28 23:42:16.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:16.221 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.224 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:16.235 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
2025-03-28 23:42:16.241 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:16.244 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:16.251 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:16.253 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.4721ms
2025-03-28 23:42:16.260 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:16.262 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 44.2241ms
2025-03-28 23:42:16.290 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:42:16.297 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.299 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 9.2733ms
2025-03-28 23:42:16.302 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:16.306 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.309 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:16.319 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
2025-03-28 23:42:16.321 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:16.322 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:16.343 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:16.351 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:16.353 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 26.5909ms
2025-03-28 23:42:16.355 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:16.356 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 54.4287ms
2025-03-28 23:42:16.374 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:16.379 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.382 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:16.394 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
2025-03-28 23:42:16.395 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:16.397 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:16.404 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:16.405 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9221ms
2025-03-28 23:42:16.407 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:16.407 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:16.408 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:16.409 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 34.6723ms
2025-03-28 23:42:16.411 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:16.419 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:16'.
2025-03-28 23:42:16.420 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:16.422 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:16.433 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:16.440 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:16.441 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.9836ms
2025-03-28 23:42:16.443 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:16.444 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.8706ms
2025-03-28 23:42:35.312 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:42:35.313 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:35.315 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.6828ms
2025-03-28 23:42:35.317 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:35.319 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:35.321 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:35.330 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:35'.
2025-03-28 23:42:35.333 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:35.335 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:35.341 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:35.343 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4049ms
2025-03-28 23:42:35.344 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:35.345 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.4439ms
2025-03-28 23:42:35.351 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:42:35.352 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:35.353 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.4083ms
2025-03-28 23:42:35.355 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:35.356 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:35.357 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:35.364 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:35'.
2025-03-28 23:42:35.366 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:35.367 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:35.375 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:35.378 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:35.380 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.5625ms
2025-03-28 23:42:35.381 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:35.382 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.4897ms
2025-03-28 23:42:39.805 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:42:39.806 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:39.807 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:39.807 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:39.810 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
2025-03-28 23:42:39.813 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
2025-03-28 23:42:39.814 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:39.814 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:39.815 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:39.816 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:39.821 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:42:39.824 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:39.826 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:39.830 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:39.830 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.7628ms
2025-03-28 23:42:39.832 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:39.833 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:42:39.834 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.1384ms
2025-03-28 23:42:39.835 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 29.6308ms
2025-03-28 23:42:39.836 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:39.838 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.9756ms
2025-03-28 23:42:39.842 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:42:39.843 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:39.846 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:39'.
2025-03-28 23:42:39.847 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:39.848 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:39.853 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:39.858 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:39.862 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:42:39.863 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.8528ms
2025-03-28 23:42:39.864 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:42:39.865 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 23.4383ms
2025-03-28 23:42:40.521 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:42:40.525 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.526 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 4.9384ms
2025-03-28 23:42:40.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:42:40.530 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.531 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:40.532 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:42:40.552 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:42:40.559 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:40.564 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 29.4018ms
2025-03-28 23:42:40.574 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:42:40.577 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 48.4755ms
2025-03-28 23:42:40.681 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:42:40.682 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.684 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.9061ms
2025-03-28 23:42:40.692 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:40.696 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.699 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:40.709 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
2025-03-28 23:42:40.711 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:40.712 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:40.726 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:40.733 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 17.199ms
2025-03-28 23:42:40.743 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:40.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 67.5241ms
2025-03-28 23:42:40.789 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:42:40.796 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.798 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 8.3585ms
2025-03-28 23:42:40.803 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:40.804 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.809 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:40.819 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
2025-03-28 23:42:40.820 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:40.821 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:40.835 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:40.841 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:40.843 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 19.62ms
2025-03-28 23:42:40.844 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:40.846 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.2805ms
2025-03-28 23:42:40.858 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:42:40.859 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.860 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:40.867 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
2025-03-28 23:42:40.870 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:40.872 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:40.881 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:40.884 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.0753ms
2025-03-28 23:42:40.886 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:42:40.888 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.7024ms
2025-03-28 23:42:40.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:42:40.896 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:42:40.897 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:42:40.903 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:42:40'.
2025-03-28 23:42:40.905 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:40.906 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:42:40.912 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:42:40.917 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:42:40.919 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.7073ms
2025-03-28 23:42:40.920 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:42:40.921 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.4903ms
2025-03-28 23:43:28.478 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:43:28.479 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:28.480 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.0856ms
2025-03-28 23:43:28.483 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:28.485 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:28.487 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:28.495 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:28'.
2025-03-28 23:43:28.497 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:28.500 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:28.506 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:28.508 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.4463ms
2025-03-28 23:43:28.509 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:28.511 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.1087ms
2025-03-28 23:43:28.519 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:43:28.521 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:28.522 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.4006ms
2025-03-28 23:43:28.523 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:28.525 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:28.526 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:28.534 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:28'.
2025-03-28 23:43:28.538 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:28.539 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:28.546 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:28.550 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:28.551 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.275ms
2025-03-28 23:43:28.553 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:28.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.4300ms
2025-03-28 23:43:32.165 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:43:32.166 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:32.167 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:32.167 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:32.171 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
2025-03-28 23:43:32.175 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
2025-03-28 23:43:32.175 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:32.176 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:32.177 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:32.178 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:32.184 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:43:32.187 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:32.188 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:32.192 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:32.193 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.4402ms
2025-03-28 23:43:32.196 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:32.197 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:32.199 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.1429ms
2025-03-28 23:43:32.200 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 34.5404ms
2025-03-28 23:43:32.201 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:32.204 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 37.2948ms
2025-03-28 23:43:32.209 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:32.210 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:32.217 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:32'.
2025-03-28 23:43:32.219 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:32.220 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:32.226 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:32.233 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:32.237 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:32.239 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.1208ms
2025-03-28 23:43:32.240 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:32.241 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 32.6962ms
2025-03-28 23:43:32.830 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:43:32.831 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:32.833 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 2.6542ms
2025-03-28 23:43:32.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:43:32.836 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:32.838 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:32.839 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:32.846 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:43:32.855 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:32.859 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 17.6675ms
2025-03-28 23:43:32.860 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:32.862 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 26.9696ms
2025-03-28 23:43:33.006 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:33.009 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:33.021 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:33.058 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
2025-03-28 23:43:33.142 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:33.160 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:33.161 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:33.163 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:33.166 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:33.171 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:33.173 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
2025-03-28 23:43:33.174 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.9403ms
2025-03-28 23:43:33.175 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:33.176 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:33.179 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:33.179 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 173.1273ms
2025-03-28 23:43:33.186 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:33.190 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:33.192 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.1478ms
2025-03-28 23:43:33.194 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:33.194 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 52.0988ms
2025-03-28 23:43:33.242 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:33.244 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:33.250 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:33.261 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
2025-03-28 23:43:33.265 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:33.268 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:33.275 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:33.277 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.4895ms
2025-03-28 23:43:33.278 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:33.279 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.3364ms
2025-03-28 23:43:33.280 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:33.282 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:33.284 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:33.290 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:33'.
2025-03-28 23:43:33.292 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:33.292 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:33.301 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:33.306 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:33.311 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 16.1862ms
2025-03-28 23:43:33.313 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:33.314 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.9040ms
2025-03-28 23:43:46.103 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:43:46.104 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:46.104 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9233ms
2025-03-28 23:43:46.110 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:46.110 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:46.113 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:46.126 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:46'.
2025-03-28 23:43:46.127 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:46.128 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:46.134 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:46.136 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5147ms
2025-03-28 23:43:46.138 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:46.138 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.9017ms
2025-03-28 23:43:46.143 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:43:46.144 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:46.145 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.6013ms
2025-03-28 23:43:46.146 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:46.147 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:46.149 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:46.155 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:46'.
2025-03-28 23:43:46.157 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:46.158 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:46.164 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:46.168 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:46.170 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.8505ms
2025-03-28 23:43:46.172 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:46.173 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.8564ms
2025-03-28 23:43:49.036 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:49.036 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:43:49.039 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.040 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.043 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.048 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.048 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:49.049 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:49.050 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:49.052 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:49.058 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:49.060 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:43:49.065 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:49.068 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:49.074 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 19.2043ms
2025-03-28 23:43:49.075 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:49.072 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:49.076 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 39.1458ms
2025-03-28 23:43:49.077 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 23.7679ms
2025-03-28 23:43:49.081 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:49.082 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 45.8319ms
2025-03-28 23:43:49.088 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:49.090 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.096 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.097 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:49.099 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:49.107 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:49.112 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:49.118 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:49.120 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.2132ms
2025-03-28 23:43:49.121 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:49.123 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.4282ms
2025-03-28 23:43:49.673 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - -
2025-03-28 23:43:49.676 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.678 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/157 - - - 204 - - 4.9630ms
2025-03-28 23:43:49.680 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:43:49.681 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.682 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:49.683 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:49.690 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:43:49.695 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:49.696 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 11.682ms
2025-03-28 23:43:49.698 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:49.699 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 19.6051ms
2025-03-28 23:43:49.808 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:49.810 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.812 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.821 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.824 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:49.825 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:49.836 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:49.840 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.2846ms
2025-03-28 23:43:49.842 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:49.844 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.0415ms
2025-03-28 23:43:49.882 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:49.899 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.907 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.916 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.917 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:49.919 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:49.929 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:49.937 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:49.940 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.1803ms
2025-03-28 23:43:49.943 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:49.944 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 62.0324ms
2025-03-28 23:43:49.958 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:49.959 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.961 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.967 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.970 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:49.971 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:49.976 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:49.977 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9232ms
2025-03-28 23:43:49.979 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:49.979 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.1424ms
2025-03-28 23:43:49.986 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:49.986 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:49.987 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:49.994 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:49'.
2025-03-28 23:43:49.996 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:49.998 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:50.005 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:50.008 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:50.009 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.1394ms
2025-03-28 23:43:50.012 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:50.013 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.9035ms
2025-03-28 23:43:52.981 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:52.982 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json -
2025-03-28 23:43:52.983 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:52.983 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:52.987 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:52'.
2025-03-28 23:43:52.990 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:52'.
2025-03-28 23:43:52.991 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:52.992 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:52.992 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:52.993 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:52.998 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.001 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:43:53.004 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.005 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.007 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:53.008 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.2106ms
2025-03-28 23:43:53.009 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 14.6351ms
2025-03-28 23:43:53.010 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:43:53.011 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:53.012 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/157 application/json - - 200 - application/json;+charset=utf-8 29.4096ms
2025-03-28 23:43:53.012 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 31.1072ms
2025-03-28 23:43:53.016 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:43:53.018 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:53.021 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
2025-03-28 23:43:53.021 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:53.022 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:53.027 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.033 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.035 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:43:53.037 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 13.2205ms
2025-03-28 23:43:53.038 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:43:53.039 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 22.3290ms
2025-03-28 23:43:53.528 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json -
2025-03-28 23:43:53.530 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.531 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:53.532 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:43:53.539 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:43:53.542 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.544 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.9835ms
2025-03-28 23:43:53.545 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:43:53.546 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/157 application/json - - 200 - application/json;+charset=utf-8 19.0690ms
2025-03-28 23:43:53.657 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:43:53.659 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.660 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.8207ms
2025-03-28 23:43:53.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:53.665 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.669 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:53.680 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
2025-03-28 23:43:53.683 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:53.686 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:53.695 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.697 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.2019ms
2025-03-28 23:43:53.700 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:53.706 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 42.3270ms
2025-03-28 23:43:53.753 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:43:53.755 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.757 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.5479ms
2025-03-28 23:43:53.764 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:53.767 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.768 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:53.776 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
2025-03-28 23:43:53.778 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:53.779 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:53.790 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.798 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.799 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.3174ms
2025-03-28 23:43:53.801 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:53.802 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.6589ms
2025-03-28 23:43:53.818 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:43:53.819 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.821 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:53.832 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
2025-03-28 23:43:53.833 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:53.834 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:53.842 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.843 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.273ms
2025-03-28 23:43:53.845 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:43:53.846 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.8596ms
2025-03-28 23:43:53.853 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:43:53.854 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:43:53.855 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:43:53.863 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:43:53'.
2025-03-28 23:43:53.866 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:53.867 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:43:53.874 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:43:53.880 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:43:53.882 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.5178ms
2025-03-28 23:43:53.883 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:43:53.885 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.9394ms
2025-03-28 23:44:09.713 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:44:09.715 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:09.717 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.0730ms
2025-03-28 23:44:09.722 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:44:09.725 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:09.727 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:44:09.746 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:09'.
2025-03-28 23:44:09.749 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:44:09.752 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:44:09.753 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:44:09.757 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:09.759 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:44:09.760 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 6.6026ms
2025-03-28 23:44:09.761 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:44:09.762 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.5237ms
2025-03-28 23:44:09.764 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:09.766 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:44:09.768 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:44:09.768 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 46.7373ms
2025-03-28 23:44:09.777 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:09'.
2025-03-28 23:44:09.780 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:44:09.782 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:44:09.789 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:44:09.795 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:44:09.797 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.2939ms
2025-03-28 23:44:09.798 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:44:09.800 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.6711ms
2025-03-28 23:44:18.784 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:44:18.787 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:18.787 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.9088ms
2025-03-28 23:44:18.789 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:44:18.790 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:18.791 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:44:18.797 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:18'.
2025-03-28 23:44:18.798 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:44:18.799 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:44:18.805 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:44:18.806 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8661ms
2025-03-28 23:44:18.808 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:44:18.809 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 20.1609ms
2025-03-28 23:44:18.823 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:44:18.824 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:18.824 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.4976ms
2025-03-28 23:44:18.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:44:18.830 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:44:18.831 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:44:18.836 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:44:18'.
2025-03-28 23:44:18.837 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:44:18.838 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:44:18.846 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:44:18.850 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:44:18.851 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.2493ms
2025-03-28 23:44:18.852 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:44:18.853 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.5262ms
2025-03-28 23:50:11.822 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:50:11.823 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:50:11.826 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.3680ms
2025-03-28 23:50:11.831 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:50:11.832 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:50:11.837 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:50:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:50:11.844 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:50:11'.
2025-03-28 23:50:11.847 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:50:11.848 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:50:11.854 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:50:11.855 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.668ms
2025-03-28 23:50:11.858 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:50:11.860 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.8102ms
2025-03-28 23:50:11.873 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:50:11.878 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:50:11.882 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 8.9836ms
2025-03-28 23:50:11.884 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:50:11.886 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:50:11.888 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:50:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:50:11.897 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:50:11'.
2025-03-28 23:50:11.900 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:50:11.901 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:50:11.971 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:50:11.974 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:50:11.976 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 71.4578ms
2025-03-28 23:50:11.976 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:50:11.978 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 94.1111ms
2025-03-28 23:51:21.800 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:51:21.801 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:21.802 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.7748ms
2025-03-28 23:51:21.803 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:51:21.804 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:21.805 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:51:21.809 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:21'.
2025-03-28 23:51:21.810 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:51:21.811 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:51:21.816 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:51:21.817 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4365ms
2025-03-28 23:51:21.819 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:51:21.819 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.2023ms
2025-03-28 23:51:21.824 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:51:21.824 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:21.825 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.3791ms
2025-03-28 23:51:21.826 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:51:21.827 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:21.828 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:51:21.832 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:21'.
2025-03-28 23:51:21.832 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:51:21.833 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:51:21.838 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:51:21.843 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:51:21.844 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.2606ms
2025-03-28 23:51:21.844 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:51:21.845 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 19.1920ms
2025-03-28 23:51:52.883 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:51:52.884 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:52.885 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8677ms
2025-03-28 23:51:52.887 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:51:52.888 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:52.890 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:51:52.895 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:52'.
2025-03-28 23:51:52.896 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:51:52.897 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:51:52.902 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:51:52.904 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7616ms
2025-03-28 23:51:52.905 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:51:52.906 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.8944ms
2025-03-28 23:51:52.910 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:51:52.911 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:52.912 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.4691ms
2025-03-28 23:51:52.913 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:51:52.914 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:51:52.915 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:51:52.921 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:51:52'.
2025-03-28 23:51:52.922 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:51:52.923 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:51:52.928 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:51:52.932 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:51:52.933 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.3691ms
2025-03-28 23:51:52.935 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:51:52.936 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.5503ms
2025-03-28 23:52:23.147 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:52:23.150 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:23.151 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.5830ms
2025-03-28 23:52:23.152 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:52:23.153 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:23.155 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:23.162 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:23'.
2025-03-28 23:52:23.164 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:23.166 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:23.172 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:23.173 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3626ms
2025-03-28 23:52:23.175 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:23.176 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.0788ms
2025-03-28 23:52:23.187 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:52:23.188 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:23.189 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8488ms
2025-03-28 23:52:23.191 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:52:23.192 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:23.194 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:23.199 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:23'.
2025-03-28 23:52:23.200 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:23.201 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:23.209 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:52:23.213 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:23.214 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.8673ms
2025-03-28 23:52:23.215 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:23.216 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.6202ms
2025-03-28 23:52:39.324 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:52:39.325 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:39.326 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2554ms
2025-03-28 23:52:39.330 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:52:39.332 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:39.333 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:39.347 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:39'.
2025-03-28 23:52:39.351 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:39.353 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:39.360 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:39.364 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.5209ms
2025-03-28 23:52:39.365 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:39.366 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.0350ms
2025-03-28 23:52:39.375 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:52:39.377 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:39.379 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.9442ms
2025-03-28 23:52:39.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:52:39.381 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:39.384 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:39.392 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:39'.
2025-03-28 23:52:39.395 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:39.396 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:39.406 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:52:39.410 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:39.412 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.5974ms
2025-03-28 23:52:39.415 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:39.416 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.0318ms
2025-03-28 23:52:41.138 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:52:41.139 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:41.140 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:41.147 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:41'.
2025-03-28 23:52:41.150 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:41.151 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:41.158 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:41.159 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8675ms
2025-03-28 23:52:41.161 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:41.162 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.0119ms
2025-03-28 23:52:41.175 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:52:41.176 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:41.178 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:41.182 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:41'.
2025-03-28 23:52:41.184 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:41.185 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:41.192 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:52:41.195 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:41.197 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.3591ms
2025-03-28 23:52:41.201 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:41.202 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.3752ms
2025-03-28 23:52:46.699 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:52:46.700 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:46.701 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.7654ms
2025-03-28 23:52:46.705 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:52:46.706 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:46.707 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:46.714 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:46'.
2025-03-28 23:52:46.715 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:46.720 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:46.727 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:46.729 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4928ms
2025-03-28 23:52:46.731 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:52:46.732 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.0803ms
2025-03-28 23:52:46.746 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:52:46.748 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:46.749 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6168ms
2025-03-28 23:52:46.753 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:52:46.755 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:52:46.757 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:52:46.767 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:52:46'.
2025-03-28 23:52:46.768 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:46.769 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:52:46.778 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:52:46.784 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:52:46.785 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.1552ms
2025-03-28 23:52:46.788 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:52:46.789 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.2766ms
2025-03-28 23:53:02.836 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:53:02.838 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:02.841 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.2636ms
2025-03-28 23:53:02.853 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:02.857 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:02.860 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:02.866 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:02'.
2025-03-28 23:53:02.867 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:02.870 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:02.875 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:02.914 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 42.6988ms
2025-03-28 23:53:02.919 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:02.922 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 68.2287ms
2025-03-28 23:53:02.923 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:53:02.927 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:02.929 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 5.9926ms
2025-03-28 23:53:02.931 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:02.933 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:02.935 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:02.942 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:02'.
2025-03-28 23:53:02.944 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:02.945 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:02.952 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:02.956 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:02.958 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.1753ms
2025-03-28 23:53:02.960 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:02.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.3628ms
2025-03-28 23:53:18.473 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:53:18.475 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:18.476 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.2087ms
2025-03-28 23:53:18.477 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:18.479 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:18.481 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:18.494 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:18'.
2025-03-28 23:53:18.497 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:18.498 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:18.505 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:18.507 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5337ms
2025-03-28 23:53:18.509 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:18.511 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 33.1016ms
2025-03-28 23:53:18.518 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:53:18.519 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:18.521 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6260ms
2025-03-28 23:53:18.522 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:18.525 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:18.526 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:18.537 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:18'.
2025-03-28 23:53:18.540 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:18.543 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:18.553 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:18.564 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:18.567 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.7378ms
2025-03-28 23:53:18.570 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:18.572 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 49.4504ms
2025-03-28 23:53:24.418 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:53:24.422 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:24.427 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:24'.
2025-03-28 23:53:24.429 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:53:24.434 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:24.444 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:24.761 +01:00 [ERR] Błąd w CreateMapController.CreateMap
System.Exception: Możesz stworzyć tylko 5 map na dzień. Wyczerpałeś limit.
   at JurMaps.Services.MapService.SaveMapAndReturnIdAsync(Int32 userId) in E:\jurmaps2\Services\MapService.cs:line 68
   at JurMaps.Controllers.CreateMapController.CreateMap(String authorizationHeader) in E:\jurmaps2\Controllers\CreateMapController.cs:line 75
2025-03-28 23:53:24.772 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:24.773 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 336.6781ms
2025-03-28 23:53:24.774 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:53:24.775 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 356.3917ms
2025-03-28 23:53:26.108 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:53:26.110 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.112 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.7810ms
2025-03-28 23:53:26.114 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:26.114 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.116 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.121 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.122 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.123 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.127 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.129 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.9373ms
2025-03-28 23:53:26.130 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 17.4545ms
2025-03-28 23:53:26.134 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:53:26.135 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.136 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5952ms
2025-03-28 23:53:26.138 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:26.140 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.141 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.147 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.148 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.150 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.157 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:26.161 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.162 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:26.163 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.3161ms
2025-03-28 23:53:26.164 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.165 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.167 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.167 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.4345ms
2025-03-28 23:53:26.172 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.174 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.175 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.179 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.181 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.9393ms
2025-03-28 23:53:26.182 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.182 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.9791ms
2025-03-28 23:53:26.185 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:26.185 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.187 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.191 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.192 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.193 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.199 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:26.211 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:26.214 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.215 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.216 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.7627ms
2025-03-28 23:53:26.218 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.218 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.224 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 40.9448ms
2025-03-28 23:53:26.227 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.229 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:26.233 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:26.233 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.234 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:26.235 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0129ms
2025-03-28 23:53:26.242 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:26.241 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:26'.
2025-03-28 23:53:26.243 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.4431ms
2025-03-28 23:53:26.245 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.246 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:26.253 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:26.259 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:26.260 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.3671ms
2025-03-28 23:53:26.261 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:26.262 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 30.1950ms
2025-03-28 23:53:28.655 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-28 23:53:28.657 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:28.662 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:28'.
2025-03-28 23:53:28.663 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:53:28.692 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:28.700 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:28.704 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 8.792ms
2025-03-28 23:53:28.705 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-28 23:53:28.706 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 50.7354ms
2025-03-28 23:53:29.948 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:29.948 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:29.951 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:29.956 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:29'.
2025-03-28 23:53:29.958 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:29.959 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:29.963 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:29.966 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2806ms
2025-03-28 23:53:29.967 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:29.968 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 20.3469ms
2025-03-28 23:53:31.050 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:53:31.052 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.059 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.062 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:31.064 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.073 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.089 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.093 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:31.094 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.2144ms
2025-03-28 23:53:31.096 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:31.098 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 48.0156ms
2025-03-28 23:53:31.102 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:53:31.105 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.113 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.114 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:31.116 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.125 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.130 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.134 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:31.135 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.4407ms
2025-03-28 23:53:31.136 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:31.138 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 36.6107ms
2025-03-28 23:53:31.201 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-28 23:53:31.203 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-28 23:53:31.206 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.206 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.206 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 3.7161ms
2025-03-28 23:53:31.207 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 5.8299ms
2025-03-28 23:53:31.209 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-28 23:53:31.210 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.211 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.213 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-28 23:53:31.214 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-28 23:53:31.215 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.216 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.218 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 4.5627ms
2025-03-28 23:53:31.217 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.217 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 3.2841ms
2025-03-28 23:53:31.228 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-28 23:53:31.228 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-28 23:53:31.233 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.234 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-28 23:53:31.234 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.237 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.238 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.240 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.253 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:53:31.254 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.255 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1093ms
2025-03-28 23:53:31.287 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:31.288 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:53:31.291 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.292 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.294 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.302 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:31.294 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 5.8570ms
2025-03-28 23:53:31.299 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-28 23:53:31.303 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.304 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.309 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:31.317 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.319 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.319 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.324 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.327 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.342 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 21.2815ms
2025-03-28 23:53:31.344 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:31.345 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:31.348 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 91.8176ms
2025-03-28 23:53:31.351 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 106.2391ms
2025-03-28 23:53:31.363 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.364 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-28 23:53:31.368 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.350 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:31.369 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-28 23:53:31.372 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 16.3614ms
2025-03-28 23:53:31.370 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 150.2702ms
2025-03-28 23:53:31.375 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:31.375 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.377 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:31.392 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 89.6772ms
2025-03-28 23:53:31.389 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 19.6061ms
2025-03-28 23:53:31.386 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.399 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-28 23:53:31.374 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.403 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.403 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 23:53:31.404 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 23:53:31.404 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.405 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.411 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.417 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.421 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.424 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:31.430 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.431 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.431 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.431 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:31.432 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.435 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 205.3884ms
2025-03-28 23:53:31.434 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 194.7911ms
2025-03-28 23:53:31.433 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 23:53:31.440 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.442 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.447 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 237.9213ms
2025-03-28 23:53:31.437 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-28 23:53:31.445 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.447 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-28 23:53:31.436 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.449 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 220.8302ms
2025-03-28 23:53:31.452 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.453 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.457 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.458 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.463 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.465 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.467 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 28.0774ms
2025-03-28 23:53:31.468 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:31.469 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.9373ms
2025-03-28 23:53:31.470 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.472 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:31.476 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:31'.
2025-03-28 23:53:31.477 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:31.480 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 105.8097ms
2025-03-28 23:53:31.482 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 23:53:31.481 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:31.482 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 133.7867ms
2025-03-28 23:53:31.485 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-28 23:53:31.486 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:31.488 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 24.2299ms
2025-03-28 23:53:31.491 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.494 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 23:53:31.495 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 15.3278ms
2025-03-28 23:53:31.496 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 96.8606ms
2025-03-28 23:53:31.496 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:31.497 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-28 23:53:31.500 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 7.5822ms
2025-03-28 23:53:31.505 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-28 23:53:31.503 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 65.9636ms
2025-03-28 23:53:31.506 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-28 23:53:31.506 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-28 23:53:31.506 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 59.2098ms
2025-03-28 23:53:31.508 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.509 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.511 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 5.2480ms
2025-03-28 23:53:31.512 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 5.5141ms
2025-03-28 23:53:31.515 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-28 23:53:31.515 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-28 23:53:31.516 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.518 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-28 23:53:31.517 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:31.521 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-28 23:53:31.523 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.525 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:31.536 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:31.539 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-28 23:53:31.542 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:31.544 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:31.546 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 18.5044ms
2025-03-28 23:53:31.546 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 16.5023ms
2025-03-28 23:53:31.549 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-28 23:53:31.550 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-28 23:53:31.551 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 35.5957ms
2025-03-28 23:53:31.552 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 36.2509ms
2025-03-28 23:53:34.268 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/151 - -
2025-03-28 23:53:34.269 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:34.269 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/151 - - - 204 - - 1.7476ms
2025-03-28 23:53:34.271 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/151 application/json -
2025-03-28 23:53:34.271 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:34.272 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:34.275 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:34.305 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-03-28 23:53:34.329 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:34.349 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-28 23:53:34.364 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:34.378 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:34.382 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:34.383 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 106.4904ms
2025-03-28 23:53:34.384 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:34.386 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/151 application/json - - 200 - application/json;+charset=utf-8 115.0259ms
2025-03-28 23:53:35.550 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/152 - -
2025-03-28 23:53:35.550 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:35.551 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/152 - - - 204 - - 1.4089ms
2025-03-28 23:53:35.552 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/152 application/json -
2025-03-28 23:53:35.553 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:35.553 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:35.554 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:35.570 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:35.578 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-28 23:53:35.584 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:35.595 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:35.598 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:35.599 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 43.3119ms
2025-03-28 23:53:35.600 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:35.601 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/152 application/json - - 200 - application/json;+charset=utf-8 49.3176ms
2025-03-28 23:53:36.711 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/154 - -
2025-03-28 23:53:36.711 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:36.712 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/154 - - - 204 - - 1.3624ms
2025-03-28 23:53:36.713 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/154 application/json -
2025-03-28 23:53:36.714 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:36.714 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:36.715 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:36.740 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:36.760 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
DELETE FROM "Places"
WHERE "PlaceId" = @p2;
DELETE FROM "Places"
WHERE "PlaceId" = @p3;
2025-03-28 23:53:36.774 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:36.779 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:36.781 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:36.783 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 66.5946ms
2025-03-28 23:53:36.785 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:36.786 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/154 application/json - - 200 - application/json;+charset=utf-8 72.5185ms
2025-03-28 23:53:37.851 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/155 - -
2025-03-28 23:53:37.852 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:37.852 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/155 - - - 204 - - 1.6744ms
2025-03-28 23:53:37.854 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/155 application/json -
2025-03-28 23:53:37.855 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:37.855 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:37.856 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:37.862 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:37.867 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-28 23:53:37.872 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:37.876 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:37.879 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:37.880 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 22.9556ms
2025-03-28 23:53:37.883 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:37.884 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/155 application/json - - 200 - application/json;+charset=utf-8 30.4129ms
2025-03-28 23:53:38.968 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/156 - -
2025-03-28 23:53:38.968 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:38.969 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/156 - - - 204 - - 1.4424ms
2025-03-28 23:53:38.970 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/156 application/json -
2025-03-28 23:53:38.971 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:38.972 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:38.972 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:38.978 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:38.984 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-28 23:53:38.989 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:39.003 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:39.005 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:39.006 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 32.1532ms
2025-03-28 23:53:39.007 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:39.008 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/156 application/json - - 200 - application/json;+charset=utf-8 38.2741ms
2025-03-28 23:53:40.184 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/157 - -
2025-03-28 23:53:40.185 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:40.185 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/157 - - - 204 - - 1.6814ms
2025-03-28 23:53:40.187 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/157 application/json -
2025-03-28 23:53:40.187 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:40.188 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:40.189 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-28 23:53:40.195 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-28 23:53:40.202 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
DELETE FROM "Places"
WHERE "PlaceId" = @p2;
DELETE FROM "Places"
WHERE "PlaceId" = @p3;
DELETE FROM "Places"
WHERE "PlaceId" = @p4;
2025-03-28 23:53:40.206 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.220 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-28 23:53:40.222 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.223 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 33.2574ms
2025-03-28 23:53:40.225 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-28 23:53:40.225 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/157 application/json - - 200 - application/json;+charset=utf-8 38.7267ms
2025-03-28 23:53:40.703 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:53:40.704 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.709 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.709 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:53:40.710 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:40.716 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.722 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:53:40.724 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.725 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 13.1296ms
2025-03-28 23:53:40.726 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:53:40.727 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 24.1808ms
2025-03-28 23:53:40.799 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json -
2025-03-28 23:53:40.800 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.812 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.813 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.814 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:40.823 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:53:40.826 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:53:40.828 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.829 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:40.831 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.4168ms
2025-03-28 23:53:40.832 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.9840ms
2025-03-28 23:53:40.834 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:40.836 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json - - 200 - application/json;+charset=utf-8 37.6313ms
2025-03-28 23:53:40.837 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:40.840 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.849 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json -
2025-03-28 23:53:40.851 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.854 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.855 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:40.864 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.864 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:40.866 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.870 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:40.872 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.876 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.6061ms
2025-03-28 23:53:40.877 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:40.878 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:53:40.879 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 44.7557ms
2025-03-28 23:53:40.883 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:53:40.885 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.888 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json -
2025-03-28 23:53:40.889 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.890 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 17.5217ms
2025-03-28 23:53:40.891 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.897 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.898 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.906 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.909 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:40.911 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json - - 200 - application/json;+charset=utf-8 61.6073ms
2025-03-28 23:53:40.913 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.915 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:40.918 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:40.924 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.939 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:53:40.945 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.948 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:40.953 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:40.954 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 32.7543ms
2025-03-28 23:53:40.955 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 36.2326ms
2025-03-28 23:53:40.958 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:53:40.959 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:40.960 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json - - 200 - application/json;+charset=utf-8 71.9255ms
2025-03-28 23:53:40.961 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 78.1324ms
2025-03-28 23:53:40.968 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:53:40.969 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:40.972 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:40'.
2025-03-28 23:53:40.973 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:40.974 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:40.981 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.987 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:40.989 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:53:40.992 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 16.2391ms
2025-03-28 23:53:40.993 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:53:40.994 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 26.3330ms
2025-03-28 23:53:41.036 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - -
2025-03-28 23:53:41.037 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.038 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - -
2025-03-28 23:53:41.038 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - - - 204 - - 2.3691ms
2025-03-28 23:53:41.039 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.040 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json -
2025-03-28 23:53:41.041 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - - - 204 - - 2.6720ms
2025-03-28 23:53:41.042 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.043 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:53:41.044 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:41.050 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:53:41.054 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.055 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.2035ms
2025-03-28 23:53:41.056 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json -
2025-03-28 23:53:41.056 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:53:41.057 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.058 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json - - 200 - application/json;+charset=utf-8 17.9829ms
2025-03-28 23:53:41.058 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:53:41.062 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:41.080 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:53:41.094 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.097 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 33.4665ms
2025-03-28 23:53:41.106 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:53:41.107 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json - - 200 - application/json;+charset=utf-8 50.7964ms
2025-03-28 23:53:41.126 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:41.134 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.136 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:41.141 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
2025-03-28 23:53:41.142 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:41.144 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:41.150 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.152 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.062ms
2025-03-28 23:53:41.154 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:41.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.9672ms
2025-03-28 23:53:41.163 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:53:41.164 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.166 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.4401ms
2025-03-28 23:53:41.168 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:41.169 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.170 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:41.175 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
2025-03-28 23:53:41.176 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:41.177 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:41.183 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:41.187 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.188 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.4959ms
2025-03-28 23:53:41.189 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:41.190 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.6107ms
2025-03-28 23:53:41.193 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:53:41.194 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.195 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:41.198 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
2025-03-28 23:53:41.198 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:41.200 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:41.205 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.207 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.011ms
2025-03-28 23:53:41.209 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:53:41.210 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.2178ms
2025-03-28 23:53:41.217 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:53:41.218 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:41.221 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:53:41.223 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:53:41'.
2025-03-28 23:53:41.224 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:41.225 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:53:41.231 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:53:41.235 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:41.237 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.6883ms
2025-03-28 23:53:41.238 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:53:41.238 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 20.8813ms
2025-03-28 23:53:43.994 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - -
2025-03-28 23:53:43.994 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:43.995 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - - - 204 - - 1.4253ms
2025-03-28 23:53:43.996 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102
2025-03-28 23:53:43.997 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:43.998 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:43.998 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:44.004 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:53:44.010 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:53:44.014 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:53:44.015 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:44.016 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.7868ms
2025-03-28 23:53:44.017 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:44.018 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102 - 200 - application/json;+charset=utf-8 22.0167ms
2025-03-28 23:53:48.870 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 103
2025-03-28 23:53:48.871 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:48.871 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:48.872 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:48.877 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:53:48.883 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:53:48.894 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:53:48.896 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:48.897 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 24.1773ms
2025-03-28 23:53:48.898 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:48.899 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 103 - 200 - application/json;+charset=utf-8 29.2567ms
2025-03-28 23:53:52.750 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - -
2025-03-28 23:53:52.751 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:52.752 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - - - 204 - - 2.0101ms
2025-03-28 23:53:52.753 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102
2025-03-28 23:53:52.754 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:53:52.754 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:52.755 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:53:52.760 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:53:52.765 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:53:52.768 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:53:52.770 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:53:52.771 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 14.5077ms
2025-03-28 23:53:52.772 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:53:52.773 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102 - 200 - application/json;+charset=utf-8 19.7870ms
2025-03-28 23:54:03.555 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - -
2025-03-28 23:54:03.556 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:03.557 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - - - 204 - - 2.4390ms
2025-03-28 23:54:03.558 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json -
2025-03-28 23:54:03.560 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:03.561 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:03.562 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:03.584 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:54:03.589 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:03.590 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 26.8439ms
2025-03-28 23:54:03.593 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:03.594 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json - - 200 - application/json;+charset=utf-8 35.5561ms
2025-03-28 23:54:05.496 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:54:05.501 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.507 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 11.1600ms
2025-03-28 23:54:05.512 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:05.514 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.517 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:05.554 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:54:05.557 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
2025-03-28 23:54:05.558 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.561 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:05.562 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 8.6698ms
2025-03-28 23:54:05.577 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:05.578 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:05.583 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.590 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:05.593 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:05.599 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.6462ms
2025-03-28 23:54:05.606 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
2025-03-28 23:54:05.607 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:05.607 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:05.610 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:05.612 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 100.1423ms
2025-03-28 23:54:05.634 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:05.655 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:05.724 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:05.731 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 112.473ms
2025-03-28 23:54:05.738 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.744 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:05.745 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:05.748 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 171.4047ms
2025-03-28 23:54:05.756 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
2025-03-28 23:54:05.758 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:05.758 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:05.760 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:05.763 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.771 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:05.773 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:05.774 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.4952ms
2025-03-28 23:54:05.794 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:05.795 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 70.8502ms
2025-03-28 23:54:05.793 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:05'.
2025-03-28 23:54:05.800 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:05.801 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:05.811 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:05.847 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:05.861 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 56.1061ms
2025-03-28 23:54:05.867 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:05.889 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:05.989 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:05.988 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 229.2615ms
2025-03-28 23:54:05.939 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:06.008 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:06.028 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:06.032 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:06'.
2025-03-28 23:54:06.035 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:06.037 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:06.042 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:06.042 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:06'.
2025-03-28 23:54:06.045 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:06.046 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:06.048 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:06.050 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.2071ms
2025-03-28 23:54:06.051 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:06.057 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 167.9523ms
2025-03-28 23:54:06.057 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:06.065 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:06.067 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.2783ms
2025-03-28 23:54:06.069 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:06.070 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 131.7386ms
2025-03-28 23:54:06.621 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - -
2025-03-28 23:54:06.621 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:06.622 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/158 - - - 204 - - 1.7237ms
2025-03-28 23:54:06.623 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102
2025-03-28 23:54:06.624 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:06.625 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:54:06.625 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:06.630 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:54:06.636 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:54:06.639 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:54:06.641 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:06.642 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.2747ms
2025-03-28 23:54:06.643 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:54:06.644 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 102 - 200 - application/json;+charset=utf-8 20.5582ms
2025-03-28 23:54:10.103 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 99
2025-03-28 23:54:10.104 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:10.105 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:54:10.105 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:10.110 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:54:10.115 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:54:10.118 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:54:10.120 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:10.121 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 14.7099ms
2025-03-28 23:54:10.122 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:54:10.123 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/158 application/json 99 - 200 - application/json;+charset=utf-8 19.4846ms
2025-03-28 23:54:11.753 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:54:11.754 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json -
2025-03-28 23:54:11.755 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:11.755 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:11.757 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
2025-03-28 23:54:11.759 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
2025-03-28 23:54:11.760 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:11.760 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:54:11.762 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:11.764 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:11.771 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:11.775 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:54:11.778 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:11.779 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:11.781 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:54:11.782 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.7882ms
2025-03-28 23:54:11.784 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.6726ms
2025-03-28 23:54:11.784 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:54:11.785 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:11.786 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json - - 200 - application/json;+charset=utf-8 32.4584ms
2025-03-28 23:54:11.787 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 34.0824ms
2025-03-28 23:54:11.793 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:54:11.794 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:11.799 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:11'.
2025-03-28 23:54:11.800 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:11.801 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:11.807 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:11.813 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:11.816 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:54:11.818 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.2182ms
2025-03-28 23:54:11.819 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:11.820 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 27.4593ms
2025-03-28 23:54:12.757 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - -
2025-03-28 23:54:12.759 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:12.761 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - - - 204 - - 4.4608ms
2025-03-28 23:54:12.763 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json -
2025-03-28 23:54:12.764 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:12.765 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:12.766 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:12.771 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:54:12.774 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:12.776 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 8.6914ms
2025-03-28 23:54:12.777 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:12.778 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json - - 200 - application/json;+charset=utf-8 14.8268ms
2025-03-28 23:54:12.917 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:54:12.919 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:12.922 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.3996ms
2025-03-28 23:54:12.924 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:12.926 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:12.928 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:12.934 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:12'.
2025-03-28 23:54:12.936 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:12.937 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:12.945 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:12.946 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5142ms
2025-03-28 23:54:12.947 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:12.949 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.1499ms
2025-03-28 23:54:13.004 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:54:13.007 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:13.009 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 4.8206ms
2025-03-28 23:54:13.021 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:13.022 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:13.024 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:13.028 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
2025-03-28 23:54:13.030 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:13.033 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:13.071 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:13.083 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:13.085 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 37.3066ms
2025-03-28 23:54:13.086 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:13.087 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 66.7160ms
2025-03-28 23:54:13.098 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:13.100 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:13.101 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:13.116 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
2025-03-28 23:54:13.117 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:13.119 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:13.124 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:13.126 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5725ms
2025-03-28 23:54:13.128 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:13.129 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.3586ms
2025-03-28 23:54:13.153 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:13.154 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:13.155 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:13.160 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:13'.
2025-03-28 23:54:13.161 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:13.163 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:13.174 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:13.179 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:13.182 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.7334ms
2025-03-28 23:54:13.184 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:13.186 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.8242ms
2025-03-28 23:54:40.833 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:54:40.834 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:40.837 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.5560ms
2025-03-28 23:54:40.839 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:40.840 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:40.841 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:40.845 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:40'.
2025-03-28 23:54:40.846 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:40.847 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:40.851 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:40.853 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5063ms
2025-03-28 23:54:40.853 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:40.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 14.7280ms
2025-03-28 23:54:40.863 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:54:40.864 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:40.865 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5208ms
2025-03-28 23:54:40.867 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:40.867 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:40.868 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:40.872 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:40'.
2025-03-28 23:54:40.872 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:40.873 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:40.879 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:40.882 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:40.883 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.2705ms
2025-03-28 23:54:40.884 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:40.885 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 18.0396ms
2025-03-28 23:54:42.793 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json -
2025-03-28 23:54:42.794 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:54:42.795 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:42.796 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:42.797 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
2025-03-28 23:54:42.799 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
2025-03-28 23:54:42.800 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:54:42.801 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:42.802 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:42.803 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:42.809 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:54:42.812 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:42.813 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:42.817 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.9803ms
2025-03-28 23:54:42.817 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:42.819 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:54:42.823 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:54:42.824 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/158 application/json - - 200 - application/json;+charset=utf-8 30.7444ms
2025-03-28 23:54:42.825 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.4709ms
2025-03-28 23:54:42.827 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:42.828 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 34.0853ms
2025-03-28 23:54:42.835 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:54:42.838 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:42.840 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:42'.
2025-03-28 23:54:42.842 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:42.843 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:42.853 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:42.865 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:42.870 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:54:42.873 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.3812ms
2025-03-28 23:54:42.874 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:54:42.875 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 39.6248ms
2025-03-28 23:54:43.599 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - -
2025-03-28 23:54:43.600 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.603 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/158 - - - 204 - - 3.8568ms
2025-03-28 23:54:43.606 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json -
2025-03-28 23:54:43.607 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.607 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:43.608 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:54:43.614 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:54:43.617 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:43.620 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.1709ms
2025-03-28 23:54:43.621 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:54:43.622 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/158 application/json - - 200 - application/json;+charset=utf-8 16.4175ms
2025-03-28 23:54:43.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:43.753 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.754 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:43.760 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
2025-03-28 23:54:43.761 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:43.763 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:43.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:43.769 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.223ms
2025-03-28 23:54:43.770 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:43.773 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.1743ms
2025-03-28 23:54:43.787 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:43.788 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.790 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:43.792 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
2025-03-28 23:54:43.793 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:43.794 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:43.803 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:43.808 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:43.810 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.4856ms
2025-03-28 23:54:43.812 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:43.813 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.3145ms
2025-03-28 23:54:43.905 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:54:43.915 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.921 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:43.934 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
2025-03-28 23:54:43.935 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:43.936 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:43.940 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:54:43.943 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:54:43.944 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:43.944 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:54:43.945 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.0008ms
2025-03-28 23:54:43.948 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:54:43'.
2025-03-28 23:54:43.949 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:54:43.949 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:43.950 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 44.9785ms
2025-03-28 23:54:43.951 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:54:43.964 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:54:43.968 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:54:43.970 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.212ms
2025-03-28 23:54:43.971 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:54:43.972 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.2036ms
2025-03-28 23:55:42.133 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:55:42.134 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:55:42.135 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9887ms
2025-03-28 23:55:42.139 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:55:42.140 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:55:42.142 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:55:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:55:42.148 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:55:42'.
2025-03-28 23:55:42.149 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:55:42.150 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:55:42.156 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:55:42.159 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6778ms
2025-03-28 23:55:42.161 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:55:42.170 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:55:42.170 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.6912ms
2025-03-28 23:55:42.170 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:55:42.172 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9895ms
2025-03-28 23:55:42.174 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:55:42.175 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:55:42.177 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:55:42'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:55:42.180 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:55:42'.
2025-03-28 23:55:42.182 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:55:42.183 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:55:42.188 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:55:42.192 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:55:42.195 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.9458ms
2025-03-28 23:55:42.196 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:55:42.197 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.4672ms
2025-03-28 23:56:06.984 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:56:06.985 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:06.985 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.5996ms
2025-03-28 23:56:06.987 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:56:06.988 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:06.989 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:06.992 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:06'.
2025-03-28 23:56:06.993 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:06.994 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:06.999 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:07.000 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2384ms
2025-03-28 23:56:07.001 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:07.002 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 14.9797ms
2025-03-28 23:56:07.010 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:56:07.011 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:07.012 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7619ms
2025-03-28 23:56:07.013 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:56:07.014 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:07.016 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:07'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:07.020 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:07'.
2025-03-28 23:56:07.021 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:07.021 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:07.026 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:56:07.030 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:07.031 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.3374ms
2025-03-28 23:56:07.032 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:07.033 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 20.0120ms
2025-03-28 23:56:28.334 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:56:28.335 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:28.338 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.8112ms
2025-03-28 23:56:28.340 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:56:28.340 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:28.342 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:28.345 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:28'.
2025-03-28 23:56:28.346 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:28.347 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:28.350 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:28.352 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.529ms
2025-03-28 23:56:28.354 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:28.354 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 14.7651ms
2025-03-28 23:56:28.368 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:56:28.368 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:28.369 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5096ms
2025-03-28 23:56:28.371 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:56:28.372 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:28.373 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:28.375 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:28'.
2025-03-28 23:56:28.375 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:28.376 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:28.382 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:56:28.385 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:28.386 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.13ms
2025-03-28 23:56:28.387 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:28.388 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 17.1701ms
2025-03-28 23:56:32.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:56:32.556 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:32.556 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:32.560 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:32'.
2025-03-28 23:56:32.561 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:32.562 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:32.566 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:32.567 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0429ms
2025-03-28 23:56:32.568 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:32.569 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 13.9512ms
2025-03-28 23:56:32.578 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:56:32.579 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:32.581 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:32.583 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:32'.
2025-03-28 23:56:32.584 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:32.584 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:32.591 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:56:32.594 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:32.595 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.8571ms
2025-03-28 23:56:32.595 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:32.596 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 17.7755ms
2025-03-28 23:56:49.768 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:56:49.770 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:49.770 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.3341ms
2025-03-28 23:56:49.772 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:56:49.776 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:49.777 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:49.782 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:49'.
2025-03-28 23:56:49.783 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:49.784 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:49.790 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:49.791 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6453ms
2025-03-28 23:56:49.792 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:49.793 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.3809ms
2025-03-28 23:56:49.798 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:56:49.798 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:49.799 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.4333ms
2025-03-28 23:56:49.802 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:56:49.802 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:49.803 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:49.806 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:49'.
2025-03-28 23:56:49.807 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:49.808 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:49.813 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:56:49.816 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:49.817 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 7.8037ms
2025-03-28 23:56:49.818 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:49.819 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 17.2829ms
2025-03-28 23:56:56.672 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:56:56.673 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:56.674 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.5875ms
2025-03-28 23:56:56.676 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:56:56.677 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:56.679 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:56.681 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:56'.
2025-03-28 23:56:56.683 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:56.684 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:56.691 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:56.692 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.4171ms
2025-03-28 23:56:56.693 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:56:56.695 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.3374ms
2025-03-28 23:56:56.704 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:56:56.705 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:56.706 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.1798ms
2025-03-28 23:56:56.707 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:56:56.708 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:56:56.711 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:56'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:56:56.714 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:56:56'.
2025-03-28 23:56:56.716 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:56.718 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:56:56.725 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:56:56.728 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:56:56.729 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.4946ms
2025-03-28 23:56:56.730 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:56:56.733 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.4288ms
2025-03-28 23:57:15.083 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:57:15.088 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.093 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.095 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:57:15.099 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.109 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.127 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:57:15.132 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.136 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 32.3663ms
2025-03-28 23:57:15.137 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:57:15.139 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 55.7744ms
2025-03-28 23:57:15.267 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json -
2025-03-28 23:57:15.282 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.310 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.311 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.314 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.329 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:57:15.337 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:57:15.357 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.359 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.361 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 31.1038ms
2025-03-28 23:57:15.364 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 46.0166ms
2025-03-28 23:57:15.365 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json -
2025-03-28 23:57:15.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:57:15.366 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.369 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.370 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.371 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json - - 200 - application/json;+charset=utf-8 104.1702ms
2025-03-28 23:57:15.374 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.379 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.380 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.386 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.388 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.389 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.395 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.403 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:57:15.403 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.407 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.407 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.6898ms
2025-03-28 23:57:15.408 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.7454ms
2025-03-28 23:57:15.418 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.419 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.421 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 54.9744ms
2025-03-28 23:57:15.422 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json - - 200 - application/json;+charset=utf-8 56.1375ms
2025-03-28 23:57:15.443 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:57:15.455 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.457 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json -
2025-03-28 23:57:15.467 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.468 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.469 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:57:15.478 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.481 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.483 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.497 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.509 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.531 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:57:15.539 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.541 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.547 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:57:15.550 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 27.1188ms
2025-03-28 23:57:15.554 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 64.9552ms
2025-03-28 23:57:15.555 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:57:15.558 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:57:15.560 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/159 application/json - - 200 - application/json;+charset=utf-8 103.8482ms
2025-03-28 23:57:15.564 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 121.5929ms
2025-03-28 23:57:15.571 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:57:15.574 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.584 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.588 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:57:15.589 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.602 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.615 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.617 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:57:15.623 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.5236ms
2025-03-28 23:57:15.640 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:57:15.647 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 75.6925ms
2025-03-28 23:57:15.703 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/159 - -
2025-03-28 23:57:15.704 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.705 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/159 - -
2025-03-28 23:57:15.707 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.707 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/159 - - - 204 - - 4.4934ms
2025-03-28 23:57:15.708 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/159 - - - 204 - - 2.3973ms
2025-03-28 23:57:15.712 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/159 application/json -
2025-03-28 23:57:15.714 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.717 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:57:15.719 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.738 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:57:15.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.771 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 48.8302ms
2025-03-28 23:57:15.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/159 application/json -
2025-03-28 23:57:15.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:57:15.780 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:57:15.781 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.782 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.783 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/159 application/json - - 200 - application/json;+charset=utf-8 71.5692ms
2025-03-28 23:57:15.784 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:57:15.790 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.791 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:15.804 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.810 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.816 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:57:15.816 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.820 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:57:15.825 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.829 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.831 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 11.2236ms
2025-03-28 23:57:15.830 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.7173ms
2025-03-28 23:57:15.831 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.838 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:57:15.838 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:57:15.840 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.2274ms
2025-03-28 23:57:15.842 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.843 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/159 application/json - - 200 - application/json;+charset=utf-8 66.0519ms
2025-03-28 23:57:15.845 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.846 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.851 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:57:15.852 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 74.9865ms
2025-03-28 23:57:15.856 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.858 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.860 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:15.866 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.867 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.895 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.909 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.914 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.916 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.917 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.919 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.377ms
2025-03-28 23:57:15.920 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:57:15.921 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:15.922 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:15.923 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 87.4503ms
2025-03-28 23:57:15.923 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.926 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:15.928 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.546ms
2025-03-28 23:57:15.931 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:15'.
2025-03-28 23:57:15.933 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:15.934 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:15.935 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 83.4236ms
2025-03-28 23:57:15.936 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:15.944 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:15.949 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:15.951 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.1798ms
2025-03-28 23:57:15.953 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:15.954 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 34.3901ms
2025-03-28 23:57:20.019 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/159 - -
2025-03-28 23:57:20.020 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:20.022 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/159 - - - 204 - - 3.3223ms
2025-03-28 23:57:20.026 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102
2025-03-28 23:57:20.026 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:20.027 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:20.030 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:20.052 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:57:20.067 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:57:20.089 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:57:20.093 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:20.095 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 54.4618ms
2025-03-28 23:57:20.096 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:20.100 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102 - 200 - application/json;+charset=utf-8 74.3489ms
2025-03-28 23:57:23.479 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102
2025-03-28 23:57:23.480 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:23.481 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:23.482 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:23.488 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:57:23.491 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:57:23.495 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:57:23.497 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:23.499 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.5062ms
2025-03-28 23:57:23.500 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:23.501 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102 - 200 - application/json;+charset=utf-8 21.6955ms
2025-03-28 23:57:25.280 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/159 - -
2025-03-28 23:57:25.281 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:25.282 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/159 - - - 204 - - 1.5125ms
2025-03-28 23:57:25.283 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102
2025-03-28 23:57:25.283 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:25.284 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:25.285 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:57:25.290 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:57:25.294 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:57:25.297 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:57:25.299 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:25.300 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 13.3942ms
2025-03-28 23:57:25.301 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:57:25.301 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/159 application/json 102 - 200 - application/json;+charset=utf-8 18.5637ms
2025-03-28 23:57:49.974 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:57:49.976 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:49.978 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.8142ms
2025-03-28 23:57:49.982 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:57:49.984 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:49.986 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:49.991 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:49'.
2025-03-28 23:57:49.994 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:49.996 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:50.001 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:50.004 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.002ms
2025-03-28 23:57:50.006 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:57:50.008 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 25.7397ms
2025-03-28 23:57:50.057 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:57:50.058 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:50.059 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.0901ms
2025-03-28 23:57:50.061 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:57:50.061 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:57:50.063 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:57:50.067 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:57:50'.
2025-03-28 23:57:50.068 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:50.070 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:57:50.082 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:57:50.086 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:57:50.090 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.0725ms
2025-03-28 23:57:50.092 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:57:50.094 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.1890ms
2025-03-28 23:58:08.022 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:58:08.023 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:08.025 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.2945ms
2025-03-28 23:58:08.027 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:58:08.030 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:08.033 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:08.038 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:08'.
2025-03-28 23:58:08.040 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:08.041 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:08.047 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:58:08.048 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:08.049 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7733ms
2025-03-28 23:58:08.050 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:58:08.051 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:08.053 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:08'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:08.056 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:08'.
2025-03-28 23:58:08.057 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:08.058 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:09.293 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:09.294 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:58:09.298 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 1255.7323ms
2025-03-28 23:58:09.299 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:09.300 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:09.301 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 1240.4658ms
2025-03-28 23:58:09.302 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 1274.9417ms
2025-03-28 23:58:09.303 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:09.304 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 1253.7917ms
2025-03-28 23:58:46.605 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:58:46.622 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:46.642 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 36.6932ms
2025-03-28 23:58:46.648 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:58:46.656 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:46.658 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:46.662 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:46'.
2025-03-28 23:58:46.663 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:46.664 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:46.670 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:46.671 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1682ms
2025-03-28 23:58:46.673 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:46.675 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.9484ms
2025-03-28 23:58:46.730 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:58:46.731 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:46.732 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.8179ms
2025-03-28 23:58:46.735 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:58:46.737 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:46.739 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:46.742 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:46'.
2025-03-28 23:58:46.743 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:46.743 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:46.754 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:58:46.756 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:46.757 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.0955ms
2025-03-28 23:58:46.758 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:46.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.3365ms
2025-03-28 23:58:59.696 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:58:59.698 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:59.699 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.8426ms
2025-03-28 23:58:59.701 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:58:59.702 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:59.704 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:59.708 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:59'.
2025-03-28 23:58:59.708 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:59.709 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:59.714 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:59.715 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3342ms
2025-03-28 23:58:59.717 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:58:59.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.8634ms
2025-03-28 23:58:59.729 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:58:59.730 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:59.732 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.2539ms
2025-03-28 23:58:59.734 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:58:59.735 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:58:59.737 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:58:59.740 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:58:59'.
2025-03-28 23:58:59.740 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:59.741 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:58:59.748 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:58:59.751 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:58:59.754 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.5917ms
2025-03-28 23:58:59.755 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:58:59.756 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.2091ms
2025-03-28 23:59:12.222 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:59:12.223 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:12.224 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.6932ms
2025-03-28 23:59:12.226 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:12.226 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:12.227 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:12.235 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:12'.
2025-03-28 23:59:12.239 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:12.241 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:12.246 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:12.247 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2363ms
2025-03-28 23:59:12.248 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:12.249 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.3944ms
2025-03-28 23:59:12.253 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:59:12.254 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:12.255 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5377ms
2025-03-28 23:59:12.256 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:12.257 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:12.258 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:12.261 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:12'.
2025-03-28 23:59:12.261 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:12.262 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:12.267 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:12.270 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:12.271 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 7.7564ms
2025-03-28 23:59:12.273 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:12.273 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 17.3051ms
2025-03-28 23:59:26.972 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:59:26.973 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:26.974 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.5987ms
2025-03-28 23:59:26.976 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:26.978 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:26.979 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:26.983 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:26'.
2025-03-28 23:59:26.985 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:26.986 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:26.991 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:26.992 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5147ms
2025-03-28 23:59:26.994 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:26.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.1318ms
2025-03-28 23:59:27.014 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:59:27.015 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:27.015 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8568ms
2025-03-28 23:59:27.017 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:27.018 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:27.019 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:27.022 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:27'.
2025-03-28 23:59:27.023 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:27.024 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:27.030 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:27.034 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:27.035 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.7946ms
2025-03-28 23:59:27.036 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:27.037 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 19.7176ms
2025-03-28 23:59:29.407 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-28 23:59:29.408 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.411 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.412 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:59:29.413 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:29.419 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:29.423 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-28 23:59:29.425 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:29.426 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 12.4089ms
2025-03-28 23:59:29.427 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-28 23:59:29.428 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 21.2311ms
2025-03-28 23:59:29.511 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json -
2025-03-28 23:59:29.512 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.516 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.518 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.518 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:29.525 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:59:29.530 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:29.531 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 11.4929ms
2025-03-28 23:59:29.532 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.533 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json - - 200 - application/json;+charset=utf-8 22.2138ms
2025-03-28 23:59:29.561 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:29.566 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:29.568 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.572 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.573 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:29.574 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:29.581 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:29.586 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.2727ms
2025-03-28 23:59:29.587 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json -
2025-03-28 23:59:29.587 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:29.600 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 38.1215ms
2025-03-28 23:59:29.589 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.610 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.612 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.614 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:29.623 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:59:29.631 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:29.635 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 19.5374ms
2025-03-28 23:59:29.637 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.638 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json - - 200 - application/json;+charset=utf-8 50.7342ms
2025-03-28 23:59:29.671 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:59:29.671 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json -
2025-03-28 23:59:29.673 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.677 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.679 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.685 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.686 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:59:29.687 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.689 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:29.690 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:29.700 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:29.704 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-28 23:59:29.711 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:29.712 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:29.714 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:59:29.717 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 23.1968ms
2025-03-28 23:59:29.718 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 26.2914ms
2025-03-28 23:59:29.719 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-28 23:59:29.720 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:59:29.721 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/160 application/json - - 200 - application/json;+charset=utf-8 49.6022ms
2025-03-28 23:59:29.724 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 53.2374ms
2025-03-28 23:59:29.732 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-28 23:59:29.733 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:29.740 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:29'.
2025-03-28 23:59:29.743 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:59:29.745 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:29.758 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:29.767 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:29.775 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 23:59:29.776 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.637ms
2025-03-28 23:59:29.777 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-28 23:59:29.780 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 48.0913ms
2025-03-28 23:59:29.843 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/160 - -
2025-03-28 23:59:29.846 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/160 - -
2025-03-28 23:59:29.853 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:29.856 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:29.856 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/160 - - - 204 - - 13.0362ms
2025-03-28 23:59:29.858 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/160 - - - 204 - - 11.8634ms
2025-03-28 23:59:29.860 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/160 application/json -
2025-03-28 23:59:29.863 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:29.864 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:59:29.865 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:29.877 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:59:29.969 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:29.999 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:29.983 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:30.019 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:30.038 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/160 application/json -
2025-03-28 23:59:30.075 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
2025-03-28 23:59:30.020 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 150.9844ms
2025-03-28 23:59:30.060 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:30.075 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:30.082 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:30.085 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:59:30.086 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:30.087 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:59:30.088 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:30.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/160 application/json - - 200 - application/json;+charset=utf-8 228.4528ms
2025-03-28 23:59:30.092 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
2025-03-28 23:59:30.093 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:30.095 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:30.096 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.099 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:30.100 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.1234ms
2025-03-28 23:59:30.103 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:59:30.101 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:30.106 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:30.109 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.113 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 143.0599ms
2025-03-28 23:59:30.109 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:30.109 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:30.114 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 16.6705ms
2025-03-28 23:59:30.117 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.118 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:30.119 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-28 23:59:30.120 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.3916ms
2025-03-28 23:59:30.121 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:30.122 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
2025-03-28 23:59:30.123 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/160 application/json - - 200 - application/json;+charset=utf-8 84.8116ms
2025-03-28 23:59:30.124 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:30.124 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:30.126 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:30.127 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 111.6698ms
2025-03-28 23:59:30.128 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:30.129 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:30.135 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:30'.
2025-03-28 23:59:30.137 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:30.138 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:30.140 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.142 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.9292ms
2025-03-28 23:59:30.143 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:30.144 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 42.7948ms
2025-03-28 23:59:30.147 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:30.150 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:30.151 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.2037ms
2025-03-28 23:59:30.152 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:30.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.6931ms
2025-03-28 23:59:32.474 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/160 - -
2025-03-28 23:59:32.475 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.476 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/160 - - - 204 - - 1.5516ms
2025-03-28 23:59:32.477 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/160 application/json 103
2025-03-28 23:59:32.478 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.479 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:59:32.482 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-28 23:59:32.489 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-28 23:59:32.494 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-28 23:59:32.499 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-28 23:59:32.504 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.505 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 21.3947ms
2025-03-28 23:59:32.508 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-28 23:59:32.516 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/160 application/json 103 - 200 - application/json;+charset=utf-8 38.4582ms
2025-03-28 23:59:32.601 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-28 23:59:32.602 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.603 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.8906ms
2025-03-28 23:59:32.605 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:32.605 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.607 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.609 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.610 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.610 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.615 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.616 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5474ms
2025-03-28 23:59:32.617 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.618 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 13.5742ms
2025-03-28 23:59:32.625 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-28 23:59:32.626 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.627 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8881ms
2025-03-28 23:59:32.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:32.630 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.631 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.635 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.636 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.637 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.642 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:32.646 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.648 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.5906ms
2025-03-28 23:59:32.649 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.649 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 20.5686ms
2025-03-28 23:59:32.651 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:32.652 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.655 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.657 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.658 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.658 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.664 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.665 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6663ms
2025-03-28 23:59:32.668 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.669 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 17.5672ms
2025-03-28 23:59:32.679 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:32.683 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.686 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.689 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.691 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.691 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.698 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:32.702 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.703 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.4188ms
2025-03-28 23:59:32.704 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.705 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.9940ms
2025-03-28 23:59:32.707 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-28 23:59:32.708 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.711 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.713 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.714 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.715 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.719 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.720 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.588ms
2025-03-28 23:59:32.722 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-28 23:59:32.723 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.1520ms
2025-03-28 23:59:32.730 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-28 23:59:32.731 +01:00 [INF] CORS policy execution successful.
2025-03-28 23:59:32.732 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-28 23:59:32.735 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '28.03.2025 22:59:32'.
2025-03-28 23:59:32.736 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.737 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-28 23:59:32.747 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-28 23:59:32.749 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 23:59:32.752 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.0578ms
2025-03-28 23:59:32.753 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-28 23:59:32.754 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.9409ms
