2025-03-26 00:01:16.589 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:01:16.593 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.608 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.615 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:01:16.616 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:16.674 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:16.680 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:01:16.683 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:16.684 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 67.4287ms
2025-03-26 00:01:16.686 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:01:16.687 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 98.0621ms
2025-03-26 00:01:16.783 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json -
2025-03-26 00:01:16.784 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.788 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.789 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:16.790 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:16.798 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:01:16.801 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:16.805 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.284ms
2025-03-26 00:01:16.812 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:16.816 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json - - 200 - application/json;+charset=utf-8 32.6144ms
2025-03-26 00:01:16.819 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:01:16.831 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:16.832 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 12.6477ms
2025-03-26 00:01:16.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:16.838 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:16.840 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.845 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.846 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:16.847 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:16.857 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json -
2025-03-26 00:01:16.860 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:16.862 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.2551ms
2025-03-26 00:01:16.864 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.865 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:16.870 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.872 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.5546ms
2025-03-26 00:01:16.872 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:16.874 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:16.887 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:01:16.890 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:16.895 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.9499ms
2025-03-26 00:01:16.899 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:16.900 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json - - 200 - application/json;+charset=utf-8 43.8118ms
2025-03-26 00:01:16.924 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:01:16.926 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json -
2025-03-26 00:01:16.931 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.934 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:16.938 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.945 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:16'.
2025-03-26 00:01:16.945 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:16.947 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:16.948 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:16.949 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:16.959 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.007 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.014 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:17.017 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 66.1297ms
2025-03-26 00:01:17.026 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:17.027 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 102.6055ms
2025-03-26 00:01:17.034 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:01:17.038 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:17.046 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
2025-03-26 00:01:17.048 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:17.049 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:01:17.051 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:17.054 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.056 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 103.894ms
2025-03-26 00:01:17.060 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.060 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:01:17.067 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/115 application/json - - 200 - application/json;+charset=utf-8 141.4086ms
2025-03-26 00:01:17.068 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.072 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:17.073 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.2579ms
2025-03-26 00:01:17.074 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:17.075 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 40.7840ms
2025-03-26 00:01:17.179 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/115 - -
2025-03-26 00:01:17.180 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.181 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/115 - - - 204 - - 2.9224ms
2025-03-26 00:01:17.184 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/115 - -
2025-03-26 00:01:17.185 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/115 application/json -
2025-03-26 00:01:17.196 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.197 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.202 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/115 - - - 204 - - 18.2191ms
2025-03-26 00:01:17.203 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:01:17.209 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:17.242 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:01:17.249 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.251 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 39.9162ms
2025-03-26 00:01:17.255 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:17.255 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/115 application/json -
2025-03-26 00:01:17.258 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:01:17.261 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.274 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:17.263 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/115 application/json - - 200 - application/json;+charset=utf-8 78.6186ms
2025-03-26 00:01:17.262 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.289 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
2025-03-26 00:01:17.291 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:01:17.291 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:17.292 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:01:17.293 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:17.310 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.316 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 16.1887ms
2025-03-26 00:01:17.317 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:01:17.318 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:17.324 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.327 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 72.1252ms
2025-03-26 00:01:17.337 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 39.6768ms
2025-03-26 00:01:17.348 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:01:17.354 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/115 application/json - - 200 - application/json;+charset=utf-8 98.6440ms
2025-03-26 00:01:17.361 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:01:17.380 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.383 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 21.5724ms
2025-03-26 00:01:17.395 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:01:17.397 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.402 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:17.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:17.411 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
2025-03-26 00:01:17.412 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.413 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:17.416 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:17.419 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:17.435 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.445 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
2025-03-26 00:01:17.450 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.450 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:17.452 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 30.6342ms
2025-03-26 00:01:17.452 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:17.456 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:01:17.456 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:17.459 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:17.460 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 64.3474ms
2025-03-26 00:01:17.461 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:17.462 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.468 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:17'.
2025-03-26 00:01:17.469 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 10.9155ms
2025-03-26 00:01:17.470 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:17.471 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:17.472 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:17.473 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 69.4204ms
2025-03-26 00:01:17.486 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:17.489 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:17.491 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 16.2201ms
2025-03-26 00:01:17.494 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:17.497 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 40.7970ms
2025-03-26 00:01:48.145 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:01:48.147 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:48.151 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:48'.
2025-03-26 00:01:48.151 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:01:48.156 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:48.163 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:48.165 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 7.0866ms
2025-03-26 00:01:48.166 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:01:48.167 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 22.4482ms
2025-03-26 00:01:48.191 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:01:48.194 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:48.197 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:48'.
2025-03-26 00:01:48.198 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:01:48.199 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:48.204 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:48.205 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.7108ms
2025-03-26 00:01:48.206 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:01:48.207 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 16.1128ms
2025-03-26 00:01:49.893 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:01:49.894 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:49.895 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.9271ms
2025-03-26 00:01:49.898 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:49.898 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:49.899 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:49.902 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:49'.
2025-03-26 00:01:49.904 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:49.905 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:49.909 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:49.911 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7116ms
2025-03-26 00:01:49.913 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:49.914 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.3930ms
2025-03-26 00:01:51.143 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:01:51.145 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.149 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.150 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:51.152 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.161 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.168 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.171 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:51.172 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.9501ms
2025-03-26 00:01:51.178 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:51.179 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 36.2906ms
2025-03-26 00:01:51.185 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:01:51.186 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.195 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.196 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:51.197 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.204 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.212 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.215 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:51.217 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.5407ms
2025-03-26 00:01:51.218 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:01:51.219 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 34.6507ms
2025-03-26 00:01:51.262 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:01:51.263 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:01:51.263 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.265 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.266 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 4.5575ms
2025-03-26 00:01:51.269 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:01:51.267 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 4.4049ms
2025-03-26 00:01:51.272 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.274 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.276 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 00:01:51.277 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 00:01:51.280 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.279 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.280 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.281 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 4.6545ms
2025-03-26 00:01:51.284 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 00:01:51.285 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 8.9150ms
2025-03-26 00:01:51.295 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 00:01:51.311 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.312 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.314 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.316 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:01:51.316 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.323 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.327 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:51.328 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.334 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.337 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.340 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:51.344 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:01:51.350 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:01:51.350 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.356 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.357 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.360 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:01:51.362 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.367 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 72.4166ms
2025-03-26 00:01:51.370 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.376 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.385 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 24.5407ms
2025-03-26 00:01:51.396 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:01:51.388 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 119.3919ms
2025-03-26 00:01:51.396 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:01:51.372 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 13.7108ms
2025-03-26 00:01:51.377 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:01:51.371 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 46.6057ms
2025-03-26 00:01:51.401 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.403 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.404 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:51.408 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.406 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.407 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:01:51.408 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.409 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 82.1190ms
2025-03-26 00:01:51.413 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.413 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.419 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:51.417 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.414 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 118.4445ms
2025-03-26 00:01:51.423 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.425 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:51.422 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.428 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.442 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:01:51.449 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.446 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:01:51.449 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.442 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.455 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.3377ms
2025-03-26 00:01:51.457 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.458 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 136.9453ms
2025-03-26 00:01:51.461 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.462 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:01:51.463 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 29.4494ms
2025-03-26 00:01:51.472 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 79.0286ms
2025-03-26 00:01:51.466 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.471 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 43.4472ms
2025-03-26 00:01:51.473 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:01:51.473 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:01:51.475 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 191.0174ms
2025-03-26 00:01:51.476 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:51.477 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.477 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 100.5031ms
2025-03-26 00:01:51.479 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 82.4599ms
2025-03-26 00:01:51.480 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.485 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.487 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:51.487 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.497 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.498 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:01:51.503 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.504 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.505 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.8764ms
2025-03-26 00:01:51.506 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 7.3812ms
2025-03-26 00:01:51.508 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:01:51.508 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:01:51.510 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.510 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 37.1821ms
2025-03-26 00:01:51.512 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.517 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.519 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:01:51.526 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:01:51.526 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.549 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.564 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:01:51.569 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:01:51'.
2025-03-26 00:01:51.571 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:01:51.572 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:01:51.585 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:51.585 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:51.588 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 33.9058ms
2025-03-26 00:01:51.588 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 14.72ms
2025-03-26 00:01:51.592 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:01:51.593 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:01:51.594 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 85.5810ms
2025-03-26 00:01:51.594 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 68.8723ms
2025-03-26 00:01:51.607 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 00:01:51.608 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 00:01:51.609 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.609 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.610 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 2.7426ms
2025-03-26 00:01:51.611 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 3.3570ms
2025-03-26 00:01:51.613 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 00:01:51.613 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 00:01:51.614 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.614 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:51.615 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:01:51.615 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:01:51.620 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.621 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:51.629 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:51.635 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:01:51.637 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:01:51.639 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:51.641 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 17.9002ms
2025-03-26 00:01:51.641 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 16.0149ms
2025-03-26 00:01:51.642 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:01:51.643 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:01:51.644 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 30.8744ms
2025-03-26 00:01:51.645 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 31.7811ms
2025-03-26 00:01:56.549 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/110 - -
2025-03-26 00:01:56.550 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:56.551 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/110 - - - 204 - - 1.7623ms
2025-03-26 00:01:56.552 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/110 application/json -
2025-03-26 00:01:56.553 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:56.553 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:56.557 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:56.582 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-03-26 00:01:56.601 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:01:56.616 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:56.635 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:01:56.640 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:56.641 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 83.1155ms
2025-03-26 00:01:56.642 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:56.643 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/110 application/json - - 200 - application/json;+charset=utf-8 91.0267ms
2025-03-26 00:01:57.930 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/111 - -
2025-03-26 00:01:57.932 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:57.932 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/111 - - - 204 - - 1.8078ms
2025-03-26 00:01:57.933 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/111 application/json -
2025-03-26 00:01:57.934 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:57.934 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:57.935 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:57.941 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:01:57.947 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:57.951 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:01:57.954 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:57.955 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 18.7293ms
2025-03-26 00:01:57.956 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:57.959 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/111 application/json - - 200 - application/json;+charset=utf-8 25.8523ms
2025-03-26 00:01:59.455 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/112 - -
2025-03-26 00:01:59.456 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:59.456 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/112 - - - 204 - - 1.2826ms
2025-03-26 00:01:59.457 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/112 application/json -
2025-03-26 00:01:59.458 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:01:59.459 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:59.459 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:01:59.465 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:01:59.469 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:01:59.473 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:01:59.476 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:01:59.477 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 16.2786ms
2025-03-26 00:01:59.478 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:01:59.479 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/112 application/json - - 200 - application/json;+charset=utf-8 21.6010ms
2025-03-26 00:02:00.836 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/113 - -
2025-03-26 00:02:00.837 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:00.837 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/113 - - - 204 - - 1.4622ms
2025-03-26 00:02:00.838 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/113 application/json -
2025-03-26 00:02:00.839 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:00.840 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:00.841 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:00.847 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:02:00.852 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:00.857 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:02:00.859 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:00.860 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 18.1142ms
2025-03-26 00:02:00.861 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:00.862 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/113 application/json - - 200 - application/json;+charset=utf-8 23.7912ms
2025-03-26 00:02:02.238 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/114 - -
2025-03-26 00:02:02.239 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:02.239 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/114 - - - 204 - - 1.3283ms
2025-03-26 00:02:02.240 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/114 application/json -
2025-03-26 00:02:02.241 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:02.242 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:02.242 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:02.248 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:02:02.254 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:02.259 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:02:02.261 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:02.262 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 18.1474ms
2025-03-26 00:02:02.263 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:02.265 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/114 application/json - - 200 - application/json;+charset=utf-8 24.2231ms
2025-03-26 00:02:03.509 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/115 - -
2025-03-26 00:02:03.510 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:03.511 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/115 - - - 204 - - 1.6202ms
2025-03-26 00:02:03.512 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/115 application/json -
2025-03-26 00:02:03.512 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:03.513 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:03.513 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:03.519 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:02:03.523 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:03.527 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:02:03.529 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:03.532 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 16.815ms
2025-03-26 00:02:03.533 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:02:03.534 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/115 application/json - - 200 - application/json;+charset=utf-8 21.9814ms
2025-03-26 00:02:04.210 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:02:04.212 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.215 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.216 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:02:04.217 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.223 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.229 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:02:04.232 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.233 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 14.909ms
2025-03-26 00:02:04.234 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:02:04.235 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 24.6567ms
2025-03-26 00:02:04.301 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json -
2025-03-26 00:02:04.304 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.309 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.311 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.314 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.321 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:04.330 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.331 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.7184ms
2025-03-26 00:02:04.333 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.335 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json - - 200 - application/json;+charset=utf-8 33.7348ms
2025-03-26 00:02:04.336 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:02:04.337 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.341 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.0932ms
2025-03-26 00:02:04.343 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:04.344 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.345 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.351 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.351 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json -
2025-03-26 00:02:04.352 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.354 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.356 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.359 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.362 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.364 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.364 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.367 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6424ms
2025-03-26 00:02:04.372 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:04.373 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.377 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.377 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 34.2023ms
2025-03-26 00:02:04.379 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.2749ms
2025-03-26 00:02:04.380 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.382 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json - - 200 - application/json;+charset=utf-8 30.7527ms
2025-03-26 00:02:04.388 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:02:04.390 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.396 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.398 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json -
2025-03-26 00:02:04.398 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:04.399 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.402 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.405 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.407 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.408 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.411 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.418 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:04.422 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.425 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.427 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:04.429 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 18.5405ms
2025-03-26 00:02:04.434 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.3156ms
2025-03-26 00:02:04.436 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:02:04.438 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:04.439 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/116 application/json - - 200 - application/json;+charset=utf-8 41.6437ms
2025-03-26 00:02:04.441 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 52.9057ms
2025-03-26 00:02:04.448 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:02:04.449 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.453 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.454 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:04.455 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.466 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.474 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.479 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:04.480 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 23.3968ms
2025-03-26 00:02:04.482 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:04.483 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 35.5832ms
2025-03-26 00:02:04.531 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/116 - -
2025-03-26 00:02:04.533 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.534 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/116 - - - 204 - - 2.6533ms
2025-03-26 00:02:04.536 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/116 - -
2025-03-26 00:02:04.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/116 application/json -
2025-03-26 00:02:04.537 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.538 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.539 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/116 - - - 204 - - 2.9998ms
2025-03-26 00:02:04.539 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:02:04.541 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.548 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:02:04.552 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.556 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 13.016ms
2025-03-26 00:02:04.557 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/116 application/json -
2025-03-26 00:02:04.557 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:02:04.558 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.559 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/116 application/json - - 200 - application/json;+charset=utf-8 22.9727ms
2025-03-26 00:02:04.560 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:02:04.563 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:04.575 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:02:04.586 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.588 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 22.9882ms
2025-03-26 00:02:04.594 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:02:04.596 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/116 application/json - - 200 - application/json;+charset=utf-8 39.3000ms
2025-03-26 00:02:04.635 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:04.636 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.638 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.647 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.648 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.651 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.658 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.664 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 11.3773ms
2025-03-26 00:02:04.665 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.666 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.9741ms
2025-03-26 00:02:04.676 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:02:04.677 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.679 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6429ms
2025-03-26 00:02:04.682 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:04.683 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.684 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.689 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.692 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:04.693 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.703 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.706 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:04.709 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.710 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.712 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.6446ms
2025-03-26 00:02:04.713 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.714 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:04.718 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.718 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.0524ms
2025-03-26 00:02:04.719 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.724 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.729 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.731 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1108ms
2025-03-26 00:02:04.732 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:04.733 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.2083ms
2025-03-26 00:02:04.734 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:04.736 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:04.739 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:04.742 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:04'.
2025-03-26 00:02:04.743 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:04.744 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:04.749 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:04.754 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:04.755 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.3144ms
2025-03-26 00:02:04.756 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:04.757 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.0572ms
2025-03-26 00:02:08.049 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/116 - -
2025-03-26 00:02:08.050 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:08.050 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/116 - - - 204 - - 1.5552ms
2025-03-26 00:02:08.052 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/116 application/json 101
2025-03-26 00:02:08.052 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:08.053 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:02:08.057 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:08.092 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:02:08.148 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 00:02:08.180 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapPlacesQuantity" = @p0
WHERE "MapId" = @p1;
2025-03-26 00:02:08.181 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:08.182 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 124.2929ms
2025-03-26 00:02:08.183 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:02:08.184 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/116 application/json 101 - 200 - application/json;+charset=utf-8 132.5039ms
2025-03-26 00:02:11.797 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/116 - -
2025-03-26 00:02:11.797 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/116 - -
2025-03-26 00:02:11.798 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:11.799 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:11.799 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/116 - - - 204 - - 2.4910ms
2025-03-26 00:02:11.800 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/116 - - - 204 - - 2.7445ms
2025-03-26 00:02:11.801 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/116 application/json -
2025-03-26 00:02:11.802 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:11.803 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:02:11.807 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:11.814 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:11.819 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:11.822 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:11.823 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 15.2675ms
2025-03-26 00:02:11.824 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/116 application/json -
2025-03-26 00:02:11.824 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:02:11.825 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:11.826 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/116 application/json - - 200 - application/json;+charset=utf-8 25.0594ms
2025-03-26 00:02:11.827 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:02:11.828 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:11.837 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:11.842 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:11.846 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:11.848 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 16.1394ms
2025-03-26 00:02:11.850 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:02:11.851 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/116 application/json - - 200 - application/json;+charset=utf-8 26.6997ms
2025-03-26 00:02:19.716 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryhbBZDeASBwUV2gIT 240
2025-03-26 00:02:19.717 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:19.718 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:02:19.723 +01:00 [INF] Route matched with {action = "SaveMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] SaveMap(System.String, Microsoft.AspNetCore.Http.IFormFile) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:02:19.786 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:02:19.789 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:02:20.136 +01:00 [INF] Received HTTP response headers after 343.896ms - 200
2025-03-26 00:02:20.137 +01:00 [INF] End processing HTTP request after 353.5004ms - 200
2025-03-26 00:02:20.145 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:02:20.147 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:02:20.357 +01:00 [INF] Received HTTP response headers after 209.4528ms - 200
2025-03-26 00:02:20.358 +01:00 [INF] End processing HTTP request after 212.8257ms - 200
2025-03-26 00:02:20.520 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:20.525 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:02:20.529 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?', @p1='?', @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapDescription" = @p0, "MapName" = @p1, "MapPlacesQuantity" = @p2
WHERE "MapId" = @p3;
2025-03-26 00:02:20.531 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:20.532 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.SaveMap (JurMaps) in 807.453ms
2025-03-26 00:02:20.535 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:02:20.536 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryhbBZDeASBwUV2gIT 240 - 200 - application/json;+charset=utf-8 820.3297ms
2025-03-26 00:02:21.827 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:02:21.827 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:02:21.827 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:02:21.828 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.829 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.830 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:02:21.831 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.831 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:02:21.834 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:02:21.840 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:21.841 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:21.842 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:21.862 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:02:21.865 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.869 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 27.3864ms
2025-03-26 00:02:21.871 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:02:21.871 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:02:21.872 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.876 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 49.0467ms
2025-03-26 00:02:21.877 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:02:21.879 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:21.888 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:02:21.892 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.893 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:02:21.893 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 11.6095ms
2025-03-26 00:02:21.893 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:02:21.896 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:02:21.898 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 26.5537ms
2025-03-26 00:02:21.899 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:02:21.903 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.905 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.0950ms
2025-03-26 00:02:21.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:21.906 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:02:21.911 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.913 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.914 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:21.915 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 66.0986ms
2025-03-26 00:02:21.917 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:02:21.919 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
2025-03-26 00:02:21.920 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:02:21.923 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.924 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:21.925 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 98.1921ms
2025-03-26 00:02:21.925 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:02:21.926 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:21.928 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:21.928 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:02:21.935 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.935 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.944 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:02:21.945 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:21.941 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 13.5191ms
2025-03-26 00:02:21.945 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 13.0713ms
2025-03-26 00:02:21.947 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.948 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.955 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:21.957 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 23.2517ms
2025-03-26 00:02:21.958 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:21.958 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 51.7738ms
2025-03-26 00:02:21.959 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:02:21.962 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
2025-03-26 00:02:21.963 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 45.8534ms
2025-03-26 00:02:21.965 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:21.969 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:21.972 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:21.973 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:21.975 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:21.977 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:21.981 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:21'.
2025-03-26 00:02:21.986 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.987 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:21.988 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 16.0022ms
2025-03-26 00:02:21.988 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:21.989 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:21.992 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 46.6512ms
2025-03-26 00:02:21.993 +01:00 [INF] Executed DbCommand (125ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:02:21.994 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:21.995 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:21.996 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.359ms
2025-03-26 00:02:21.997 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:22.001 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:22.002 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:22'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:22.002 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.9651ms
2025-03-26 00:02:22.006 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:22'.
2025-03-26 00:02:22.007 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:22.008 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:22.009 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:22.011 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 167.4056ms
2025-03-26 00:02:22.012 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:02:22.013 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:02:22.022 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:22.027 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:22.024 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:22.023 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 196.4681ms
2025-03-26 00:02:22.030 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 20.1495ms
2025-03-26 00:02:22.030 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:02:22.032 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:22.032 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:02:22.034 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.8789ms
2025-03-26 00:02:22.040 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:02:22.042 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:22.045 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 9.988ms
2025-03-26 00:02:22.046 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:02:22.048 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 34.6029ms
2025-03-26 00:02:24.613 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:02:24.614 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.618 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.618 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:02:24.619 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:24.623 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.624 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 3.8788ms
2025-03-26 00:02:24.627 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:02:24.628 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 15.0770ms
2025-03-26 00:02:24.724 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:24.725 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.726 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.730 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.731 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:24.732 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:24.737 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.739 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.531ms
2025-03-26 00:02:24.740 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:24.743 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.7337ms
2025-03-26 00:02:24.761 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:02:24.763 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.768 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.770 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:24.771 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:24.778 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:24.784 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:24.787 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:24.788 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 15.5381ms
2025-03-26 00:02:24.790 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:24.792 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 30.6728ms
2025-03-26 00:02:24.797 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:02:24.801 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.805 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.806 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:24.807 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:24.814 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:24.821 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:24.827 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:24.836 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 26.9822ms
2025-03-26 00:02:24.837 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:02:24.838 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 40.7464ms
2025-03-26 00:02:24.864 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:02:24.867 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:02:24.868 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.869 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.870 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 5.8355ms
2025-03-26 00:02:24.871 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 3.9715ms
2025-03-26 00:02:24.871 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:02:24.873 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.874 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.876 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:24.880 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 00:02:24.880 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 00:02:24.881 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.882 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.883 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 2.6896ms
2025-03-26 00:02:24.886 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 5.3715ms
2025-03-26 00:02:24.887 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 00:02:24.888 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:02:24.892 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 00:02:24.894 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.897 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.898 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.898 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.900 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:02:24.900 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 21.614ms
2025-03-26 00:02:24.901 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:02:24.902 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:24.903 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:24.904 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.907 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.912 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 40.4969ms
2025-03-26 00:02:24.912 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.914 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:02:24.915 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:24.919 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:24.918 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:02:24.934 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:02:24.926 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.928 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.939 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.941 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.942 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 33.0381ms
2025-03-26 00:02:24.944 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.945 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 34.3091ms
2025-03-26 00:02:24.946 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 18.8351ms
2025-03-26 00:02:24.947 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.951 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.953 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:24.955 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:02:24.956 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:02:24.958 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 70.9279ms
2025-03-26 00:02:24.958 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:24.959 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.960 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 67.8348ms
2025-03-26 00:02:24.961 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 59.3306ms
2025-03-26 00:02:24.962 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:24.966 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.975 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.976 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.977 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6923ms
2025-03-26 00:02:24.978 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:24.979 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:24.980 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:24.980 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 61.6581ms
2025-03-26 00:02:24.983 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:02:24.988 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:24.989 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:24.993 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:24.994 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:24.995 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.4587ms
2025-03-26 00:02:24.997 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:24'.
2025-03-26 00:02:24.999 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:25.002 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:25.003 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 50.3932ms
2025-03-26 00:02:25.004 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:25.009 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:02:25.009 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:25.010 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.011 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4751ms
2025-03-26 00:02:25.013 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:25.014 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:02:25.019 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
2025-03-26 00:02:25.021 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 38.4923ms
2025-03-26 00:02:25.022 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:25.023 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:25.030 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:25.037 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:25.037 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:02:25.039 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.8965ms
2025-03-26 00:02:25.040 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.043 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:02:25.044 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 6.6684ms
2025-03-26 00:02:25.048 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 39.5405ms
2025-03-26 00:02:25.049 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:02:25.052 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.053 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:25.057 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
2025-03-26 00:02:25.058 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:02:25.065 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:25.067 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:02:25.070 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.072 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:02:25.072 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:25.075 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:02:25'.
2025-03-26 00:02:25.076 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 7.6954ms
2025-03-26 00:02:25.077 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:02:25.080 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:02:25.080 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:02:25.081 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 32.5251ms
2025-03-26 00:02:25.085 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:25.086 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 00:02:25.087 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 00:02:25.087 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 4.0443ms
2025-03-26 00:02:25.087 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.088 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.089 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:02:25.090 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 3.4168ms
2025-03-26 00:02:25.091 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 23.7063ms
2025-03-26 00:02:25.090 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 3.5931ms
2025-03-26 00:02:25.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 00:02:25.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 00:02:25.095 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.096 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:02:25.096 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:02:25.097 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:02:25.097 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:25.098 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:02:25.103 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:02:25.106 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:02:25.108 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:02:25.111 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:02:25.113 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 13.7201ms
2025-03-26 00:02:25.113 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 12.6239ms
2025-03-26 00:02:25.114 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:02:25.115 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:02:25.115 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 23.7713ms
2025-03-26 00:02:25.117 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 25.0358ms
2025-03-26 00:04:00.321 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:04:00.323 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:00.323 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.0576ms
2025-03-26 00:04:00.325 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:04:00.325 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:00.327 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:04:00.330 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:00'.
2025-03-26 00:04:00.330 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:04:00.331 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:04:00.336 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:00.337 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.6826ms
2025-03-26 00:04:00.338 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:04:00.339 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 14.1826ms
2025-03-26 00:04:00.342 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:04:00.342 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:00.343 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.4781ms
2025-03-26 00:04:00.344 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:04:00.345 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:00.346 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:04:00.349 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:00'.
2025-03-26 00:04:00.350 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:04:00.351 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:04:00.368 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:04:00.370 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:00.371 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 19.5117ms
2025-03-26 00:04:00.372 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:04:00.373 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.6673ms
2025-03-26 00:04:13.776 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:04:13.776 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:04:13.776 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:04:13.782 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.782 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.783 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.784 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:04:13.784 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:13.785 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:04:13.786 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.786 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.787 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.794 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:04:13.805 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:13.807 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:04:13.806 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.809 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.810 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.822 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:04:13.814 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:04:13.813 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 21.7419ms
2025-03-26 00:04:13.825 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 22.52ms
2025-03-26 00:04:13.813 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:04:13.811 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 22.6941ms
2025-03-26 00:04:13.829 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.825 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.829 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:04:13.837 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:04:13.836 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:13.837 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.838 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:04:13.839 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:13.840 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 17.9981ms
2025-03-26 00:04:13.841 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.844 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:04:13.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:04:13.853 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 76.5765ms
2025-03-26 00:04:13.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 78.4366ms
2025-03-26 00:04:13.855 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:04:13.855 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 79.8859ms
2025-03-26 00:04:13.856 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.858 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:04:13.858 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.859 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.861 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.864 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:13.866 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:04:13.870 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:13.871 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:13.876 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.872 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:04:13.865 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 20.5064ms
2025-03-26 00:04:13.865 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:04:13.874 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:04:13.877 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:04:13.877 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 14.2543ms
2025-03-26 00:04:13.879 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.882 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:13'.
2025-03-26 00:04:13.883 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.885 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:04:13'.
2025-03-26 00:04:13.886 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:13.887 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 19.9942ms
2025-03-26 00:04:13.887 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:04:13.889 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 18.4266ms
2025-03-26 00:04:13.889 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:04:13.890 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 75.7415ms
2025-03-26 00:04:13.891 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:04:13.892 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:04:13.892 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:04:13.893 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:04:13.894 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 81.1017ms
2025-03-26 00:04:13.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 67.5862ms
2025-03-26 00:04:13.898 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.900 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0816ms
2025-03-26 00:04:13.901 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:04:13.902 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:04:13.905 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:13.905 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 59.3967ms
2025-03-26 00:04:13.906 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.5448ms
2025-03-26 00:04:13.908 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:04:13.909 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.5434ms
2025-03-26 00:04:15.142 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?SearchFilters=test&Page=1 - -
2025-03-26 00:04:15.143 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:15.144 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:15.144 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:15.156 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:15.157 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:15.200 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__filter_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t0."MapId", t0."MapName", t0."MapDescription", t0."MapLikes", u."UserName" AS "MapCreatorName", t0."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t0."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded" AND (@__filter_0 = '' OR strpos(m."MapName", @__filter_0) > 0 OR EXISTS (
        SELECT 1
        FROM "MapTag" AS m0
        INNER JOIN "Tags" AS t ON m0."MapTagsTagId" = t."TagId"
        WHERE m."MapId" = m0."MapsWithThisTagMapId" AND (@__filter_0 = '' OR strpos(t."TagName", @__filter_0) > 0)))
    LIMIT @__p_2 OFFSET @__p_1
) AS t0
INNER JOIN "Users" AS u ON t0."MapCreatorId" = u."UserId"
2025-03-26 00:04:15.202 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:15.203 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 57.3258ms
2025-03-26 00:04:15.204 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:15.205 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?SearchFilters=test&Page=1 - - - 200 - application/json;+charset=utf-8 62.3980ms
2025-03-26 00:04:16.585 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:04:16.586 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:16.587 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:16.588 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:16.593 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:16.597 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:16.598 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 8.4343ms
2025-03-26 00:04:16.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:16.600 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 14.7035ms
2025-03-26 00:04:19.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=1&Page=1 - -
2025-03-26 00:04:19.961 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:19.961 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:19.962 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:19.967 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:19.968 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:19.971 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded" AND m."MapPlacesQuantity" < 5
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:19.974 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:19.975 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 11.3757ms
2025-03-26 00:04:19.976 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:19.977 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=1&Page=1 - - - 200 - application/json;+charset=utf-8 17.2695ms
2025-03-26 00:04:20.743 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:04:20.745 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:20.745 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:20.746 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:20.752 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:20.755 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:20.756 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 8.1464ms
2025-03-26 00:04:20.757 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:20.758 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 14.1124ms
2025-03-26 00:04:21.474 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=2&Page=1 - -
2025-03-26 00:04:21.475 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:21.476 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:21.477 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:21.481 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:21.482 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:21.485 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded" AND m."MapPlacesQuantity" >= 5 AND m."MapPlacesQuantity" <= 10
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:21.488 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:21.490 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 11.296ms
2025-03-26 00:04:21.491 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:21.491 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=2&Page=1 - - - 200 - application/json;+charset=utf-8 17.2713ms
2025-03-26 00:04:22.645 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=3&Page=1 - -
2025-03-26 00:04:22.646 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:22.647 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:22.648 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:22.652 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:22.653 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:04:22.656 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded" AND m."MapPlacesQuantity" > 10 AND m."MapPlacesQuantity" <= 15
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:22.659 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:22.661 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 11.3933ms
2025-03-26 00:04:22.662 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:22.662 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?QuantityPlaces=3&Page=1 - - - 200 - application/json;+charset=utf-8 17.7702ms
2025-03-26 00:04:23.739 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:04:23.740 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:04:23.741 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:23.741 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:04:23.747 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:04:23.750 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:04:23.751 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 7.9492ms
2025-03-26 00:04:23.752 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:04:23.753 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 14.5249ms
2025-03-26 00:11:51.166 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 00:11:51.283 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 00:11:51.328 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 00:11:51.330 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 00:11:51.330 +01:00 [INF] Hosting environment: Development
2025-03-26 00:11:51.331 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 00:11:51.802 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:11:55.952 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 00:11:56.064 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:11:56.070 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4272.7309ms
2025-03-26 00:11:56.134 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 00:11:56.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 157.1870ms
2025-03-26 00:11:59.139 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:12:09.153 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:12:09.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10015.2522ms
2025-03-26 00:12:12.187 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:12:17.102 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 00:12:17.106 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 00:12:17.107 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 4920.0067ms
2025-03-26 00:12:18.735 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:12:18.748 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:18.755 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 19.6157ms
2025-03-26 00:12:18.762 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:18.769 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:18.770 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:12:18.796 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:18.797 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 27.3937ms
2025-03-26 00:12:18.800 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:12:18.801 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:18.884 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:18.884 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:18.923 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:18'.
2025-03-26 00:12:18.926 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:18'.
2025-03-26 00:12:18.929 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:18.929 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:18.972 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:18.972 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:26.322 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:12:26.324 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:26.333 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:26'.
2025-03-26 00:12:26.335 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:12:26.340 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:27.527 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:27.600 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8622.0287ms
2025-03-26 00:12:27.603 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:27.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 8843.2703ms
2025-03-26 00:12:27.664 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:12:27.665 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:27.666 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2125ms
2025-03-26 00:12:27.670 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:27.671 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:27.672 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:27.679 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:27'.
2025-03-26 00:12:27.684 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:27.689 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:27.696 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:12:27.698 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:27.699 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.0955ms
2025-03-26 00:12:27.713 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:27.719 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 25.5085ms
2025-03-26 00:12:27.725 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:27.727 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.4307ms
2025-03-26 00:12:29.863 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:29.863 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:29.961 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:29.964 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10988.2504ms
2025-03-26 00:12:29.965 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:12:29.966 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:29.967 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:29.969 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:29.978 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 11178.1118ms
2025-03-26 00:12:29.979 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:29'.
2025-03-26 00:12:29.981 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:29.983 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:30.004 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:30.005 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:30.007 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:30.014 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:30'.
2025-03-26 00:12:30.015 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:30.017 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:30.022 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:30.024 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5741ms
2025-03-26 00:12:30.025 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:30.026 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.2324ms
2025-03-26 00:12:30.062 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:30.066 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:30.068 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 81.4591ms
2025-03-26 00:12:30.069 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:12:30.069 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:30.070 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:30.071 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 106.0872ms
2025-03-26 00:12:30.072 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:30.078 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:30'.
2025-03-26 00:12:30.079 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:30.080 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:30.087 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:30.092 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:30.093 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.8895ms
2025-03-26 00:12:30.094 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:30.095 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.0710ms
2025-03-26 00:12:30.099 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:12:30.119 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:30.121 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 3778.5379ms
2025-03-26 00:12:30.122 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:12:30.123 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 3801.8315ms
2025-03-26 00:12:32.681 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:12:32.685 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:32.691 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 8.5377ms
2025-03-26 00:12:32.693 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:32.698 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:32.703 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:32.715 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:32'.
2025-03-26 00:12:32.718 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:32.719 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:32.725 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:32.726 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.8923ms
2025-03-26 00:12:32.728 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:32.732 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.8311ms
2025-03-26 00:12:34.094 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json -
2025-03-26 00:12:34.098 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.108 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.109 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.115 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:34.146 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json -
2025-03-26 00:12:34.148 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.155 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.156 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.158 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:34.184 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:12:34.184 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:12:34.192 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:12:34.192 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json -
2025-03-26 00:12:34.195 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.196 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.193 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.197 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.198 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 37.5378ms
2025-03-26 00:12:34.206 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.207 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 90.7918ms
2025-03-26 00:12:34.214 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.215 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.216 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:12:34.217 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.218 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.220 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json - - 200 - application/json;+charset=utf-8 73.1111ms
2025-03-26 00:12:34.223 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json - - 200 - application/json;+charset=utf-8 128.5780ms
2025-03-26 00:12:34.225 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.224 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:34.241 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:12:34.246 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.254 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.259 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 27.0191ms
2025-03-26 00:12:34.260 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:12:34.261 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.262 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/117 application/json - - 200 - application/json;+charset=utf-8 69.6721ms
2025-03-26 00:12:34.268 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:12:34.273 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 43.0076ms
2025-03-26 00:12:34.274 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:12:34.275 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 83.1602ms
2025-03-26 00:12:34.282 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:12:34.285 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.294 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.296 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:12:34.297 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.307 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.315 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.323 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:12:34.329 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 26.905ms
2025-03-26 00:12:34.330 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:12:34.331 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 49.2026ms
2025-03-26 00:12:34.491 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/117 - -
2025-03-26 00:12:34.493 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.495 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/117 - -
2025-03-26 00:12:34.503 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/117 - - - 204 - - 12.6278ms
2025-03-26 00:12:34.505 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.508 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/117 application/json -
2025-03-26 00:12:34.511 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/117 - - - 204 - - 16.0753ms
2025-03-26 00:12:34.512 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.515 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:12:34.519 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:34.560 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:34.562 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.567 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.579 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:12:34.581 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.588 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:34.588 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.589 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.591 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:12:34.595 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.598 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.598 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 7.5481ms
2025-03-26 00:12:34.600 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:12:34.600 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.0219ms
2025-03-26 00:12:34.603 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.605 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:34.606 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.610 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/117 application/json -
2025-03-26 00:12:34.608 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 84.9994ms
2025-03-26 00:12:34.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 46.1399ms
2025-03-26 00:12:34.614 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.616 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.618 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:12:34.620 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:34.621 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:12:34.622 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/117 application/json - - 200 - application/json;+charset=utf-8 113.1049ms
2025-03-26 00:12:34.622 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.625 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:34.634 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.625 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:12:34.641 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.642 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.644 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.4395ms
2025-03-26 00:12:34.647 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:12:34.648 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.649 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:34.652 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.658 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.659 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 58.8907ms
2025-03-26 00:12:34.661 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 24.7233ms
2025-03-26 00:12:34.662 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:34.664 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:12:34.665 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.669 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/117 application/json - - 200 - application/json;+charset=utf-8 59.1332ms
2025-03-26 00:12:34.678 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.684 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.3175ms
2025-03-26 00:12:34.688 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:12:34.689 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 64.2474ms
2025-03-26 00:12:34.704 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:12:34.706 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:34.718 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:12:34.727 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:12:34'.
2025-03-26 00:12:34.731 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:34.732 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:12:34.752 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:12:34.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:34.768 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 30.9411ms
2025-03-26 00:12:34.769 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:12:34.770 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 66.1608ms
2025-03-26 00:12:47.220 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/117 - -
2025-03-26 00:12:47.221 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:47.222 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/117 - - - 204 - - 1.8750ms
2025-03-26 00:12:47.223 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/117 application/json 103
2025-03-26 00:12:47.224 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:12:47.224 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:12:47.228 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:12:47.274 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:12:47.315 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 00:12:47.340 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:12:47.343 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:12:47.344 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 115.0068ms
2025-03-26 00:12:47.345 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:12:47.346 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/117 application/json 103 - 200 - application/json;+charset=utf-8 123.0538ms
2025-03-26 00:13:33.872 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/117 - -
2025-03-26 00:13:33.874 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:13:33.875 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/117 - - - 204 - - 2.4164ms
2025-03-26 00:13:33.876 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/117 application/json 101
2025-03-26 00:13:33.877 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:13:33.880 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:13:33.881 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:13:46.484 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:13:52.880 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 00:14:09.628 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:14:09.631 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:14:09.632 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 35748.1939ms
2025-03-26 00:14:09.633 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:14:09.634 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/117 application/json 101 - 200 - application/json;+charset=utf-8 35758.2349ms
2025-03-26 00:22:52.876 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/117 - -
2025-03-26 00:22:52.876 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/117 - -
2025-03-26 00:22:52.877 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:22:52.878 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:22:52.879 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/117 - - - 204 - - 2.4892ms
2025-03-26 00:22:52.882 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/117 - - - 204 - - 5.6086ms
2025-03-26 00:22:52.884 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/117 application/json -
2025-03-26 00:22:52.891 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:22:52.892 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:22:52.897 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:22:52.957 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:22:52.963 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:22:52.970 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:22:52.974 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 75.5519ms
2025-03-26 00:22:52.975 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/117 application/json -
2025-03-26 00:22:52.976 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:22:52.976 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:22:52.977 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/117 application/json - - 200 - application/json;+charset=utf-8 92.9675ms
2025-03-26 00:22:52.977 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:22:52.979 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:22:52.985 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:22:52.992 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:22:52.997 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:22:52.999 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 17.6938ms
2025-03-26 00:22:53.000 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:22:53.001 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/117 application/json - - 200 - application/json;+charset=utf-8 25.8817ms
2025-03-26 00:23:01.788 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryWQGw1JMVSELA2qY6 242
2025-03-26 00:23:01.792 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:01.793 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:23:01.801 +01:00 [INF] Route matched with {action = "SaveMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] SaveMap(System.String, Microsoft.AspNetCore.Http.IFormFile) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:23:01.914 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:01.927 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.199 +01:00 [INF] Received HTTP response headers after 265.8641ms - 400
2025-03-26 00:23:02.203 +01:00 [INF] End processing HTTP request after 295.5659ms - 400
2025-03-26 00:23:02.210 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.212 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.477 +01:00 [INF] Received HTTP response headers after 263.3477ms - 200
2025-03-26 00:23:02.480 +01:00 [INF] End processing HTTP request after 270.0505ms - 200
2025-03-26 00:23:02.491 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.494 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.592 +01:00 [INF] Received HTTP response headers after 96.5437ms - 400
2025-03-26 00:23:02.593 +01:00 [INF] End processing HTTP request after 101.6258ms - 400
2025-03-26 00:23:02.595 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.597 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:23:02.851 +01:00 [INF] Received HTTP response headers after 252.0882ms - 200
2025-03-26 00:23:02.852 +01:00 [INF] End processing HTTP request after 257.0381ms - 200
2025-03-26 00:23:02.897 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:23:02.908 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:23:02.915 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:23:02.919 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:02.920 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.SaveMap (JurMaps) in 1117.1288ms
2025-03-26 00:23:02.922 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:23:02.923 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryWQGw1JMVSELA2qY6 242 - 200 - application/json;+charset=utf-8 1134.6157ms
2025-03-26 00:23:06.068 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:23:06.088 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:23:06.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:23:06.131 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.137 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:23:06.133 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.129 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.145 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:23:06.149 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:23:06.151 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:23:06.151 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.156 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 10.4889ms
2025-03-26 00:23:06.158 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:23:06.161 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.166 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:23:06.172 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.178 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.171 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.181 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:23:06.204 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
2025-03-26 00:23:06.226 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.232 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:23:06.234 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:23:06.242 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:23:06.234 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 53.1212ms
2025-03-26 00:23:06.254 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:23:06.286 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.288 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.289 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.290 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 82.5925ms
2025-03-26 00:23:06.292 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:23:06.293 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:23:06.296 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:23:06.296 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:23:06.294 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.0225ms
2025-03-26 00:23:06.299 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:23:06.304 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
2025-03-26 00:23:06.318 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:23:06.311 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 210.6721ms
2025-03-26 00:23:06.312 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.315 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:23:06.316 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.310 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:23:06.324 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:23:06.327 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 169.1534ms
2025-03-26 00:23:06.333 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.330 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:23:06.321 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:23:06.365 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
2025-03-26 00:23:06.341 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:23:06.373 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:23:06.390 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.392 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:23:06.392 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:23:06.408 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:23:06.398 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 180.016ms
2025-03-26 00:23:06.420 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.420 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.422 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:23:06.431 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.433 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 16.6805ms
2025-03-26 00:23:06.438 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 213.8774ms
2025-03-26 00:23:06.434 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:23:06.449 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:23:06.453 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:23:06.462 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.449 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:23:06.456 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.435 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 366.8206ms
2025-03-26 00:23:06.495 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:23:06.487 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:23:06.495 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 406.7589ms
2025-03-26 00:23:06.504 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:23:06.506 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.496 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 197.1973ms
2025-03-26 00:23:06.533 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 186.0684ms
2025-03-26 00:23:06.536 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:23:06.538 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:23:06.515 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:23:06.543 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.544 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 247.6383ms
2025-03-26 00:23:06.545 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:23:06.551 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.552 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 35.0008ms
2025-03-26 00:23:06.561 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.565 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 66.8625ms
2025-03-26 00:23:06.567 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:23:06.571 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 204.2789ms
2025-03-26 00:23:06.573 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:23:06.573 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:23:06.574 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 124.7909ms
2025-03-26 00:23:06.574 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:23:06.581 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 173.4366ms
2025-03-26 00:23:06.588 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:23:06.594 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 341.6798ms
2025-03-26 00:23:06.616 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:23:06.630 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:23:06'.
2025-03-26 00:23:06.634 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:23:06.635 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:23:06.715 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:23:06.727 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:23:06.734 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 31.6002ms
2025-03-26 00:23:06.842 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:23:06.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 281.0132ms
2025-03-26 00:25:50.637 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 00:25:50.760 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 00:25:50.950 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 00:25:50.951 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 00:25:50.952 +01:00 [INF] Hosting environment: Development
2025-03-26 00:25:50.952 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 00:25:51.319 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:25:55.480 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 00:25:55.592 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:25:55.597 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4282.8105ms
2025-03-26 00:25:55.694 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 00:25:55.861 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 167.2894ms
2025-03-26 00:25:58.693 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:26:08.704 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:26:08.706 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10013.0643ms
2025-03-26 00:26:11.723 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:26:16.793 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 00:26:16.798 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 00:26:16.799 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 5075.7392ms
2025-03-26 00:26:17.966 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:26:17.974 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:17.977 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 10.6488ms
2025-03-26 00:26:17.979 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:26:17.983 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:18.003 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:26:18.007 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:18.008 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 5.0204ms
2025-03-26 00:26:18.010 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:26:18.016 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:18.057 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:18.057 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:18.089 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:18'.
2025-03-26 00:26:18.090 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:18'.
2025-03-26 00:26:18.093 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:18.093 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:18.122 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:18.122 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:26.653 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:26.714 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8587.2214ms
2025-03-26 00:26:26.717 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:26.719 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 8739.9587ms
2025-03-26 00:26:26.764 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:26:26.765 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:26.766 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.3837ms
2025-03-26 00:26:26.768 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:26:26.769 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:26.770 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:26'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:26.776 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:26'.
2025-03-26 00:26:26.777 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:26.778 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:26.789 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:26:26.790 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:26.791 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.6287ms
2025-03-26 00:26:26.793 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:26.796 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.2177ms
2025-03-26 00:26:26.797 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:26.798 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.0803ms
2025-03-26 00:26:29.163 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:26:29.316 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:29.358 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:26:29.358 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11231.4327ms
2025-03-26 00:26:29.359 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:29.361 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:29.362 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:29.381 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
2025-03-26 00:26:29.383 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:29.385 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:29.390 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 11380.1131ms
2025-03-26 00:26:29.419 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:26:29.428 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:29.431 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 41.3251ms
2025-03-26 00:26:29.433 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:29.435 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 76.9494ms
2025-03-26 00:26:29.457 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:26:29.469 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:29.471 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:29.486 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
2025-03-26 00:26:29.492 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:29.494 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:29.501 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:29.504 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.6319ms
2025-03-26 00:26:29.505 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:26:29.506 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 49.2292ms
2025-03-26 00:26:29.510 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:26:29.511 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:26:29.513 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:26:29.527 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:26:29'.
2025-03-26 00:26:29.529 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:29.531 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:26:29.618 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:26:29.626 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:26:29.629 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 93.8122ms
2025-03-26 00:26:29.630 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:26:29.631 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 120.8506ms
2025-03-26 00:28:49.359 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:28:49.361 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:49.368 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:49'.
2025-03-26 00:28:49.372 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:28:49.382 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:49.396 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:49.547 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:28:49.573 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:49.576 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 191.1374ms
2025-03-26 00:28:49.579 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:28:49.581 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 221.6880ms
2025-03-26 00:28:52.602 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:28:52.603 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:52.604 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.6292ms
2025-03-26 00:28:52.606 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:52.608 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:52.609 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:52.617 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:52'.
2025-03-26 00:28:52.618 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:52.621 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:52.625 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:52.628 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1276ms
2025-03-26 00:28:52.630 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:52.631 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.6614ms
2025-03-26 00:28:53.812 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json -
2025-03-26 00:28:53.816 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:53.824 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
2025-03-26 00:28:53.825 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:53.831 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:53.868 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json -
2025-03-26 00:28:53.872 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:53.880 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
2025-03-26 00:28:53.881 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:53.883 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:53.920 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:53.934 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json -
2025-03-26 00:28:53.935 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:53.936 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:53.942 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 105.0521ms
2025-03-26 00:28:53.965 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:28:53.981 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
2025-03-26 00:28:53.982 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:53.984 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:53.984 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:53.985 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json - - 200 - application/json;+charset=utf-8 173.0849ms
2025-03-26 00:28:53.997 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:53'.
2025-03-26 00:28:54.012 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:54.014 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:54.028 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.031 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:54.048 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:54.048 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.058 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.061 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 43.6473ms
2025-03-26 00:28:54.061 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.067 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:54.069 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 183.2315ms
2025-03-26 00:28:54.073 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json - - 200 - application/json;+charset=utf-8 138.3794ms
2025-03-26 00:28:54.074 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:54.078 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/118 application/json - - 200 - application/json;+charset=utf-8 210.0129ms
2025-03-26 00:28:54.076 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.088 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:28:54.095 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 49.6027ms
2025-03-26 00:28:54.097 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:54.101 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 135.3098ms
2025-03-26 00:28:54.110 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:28:54.116 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:54.125 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
2025-03-26 00:28:54.126 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:54.129 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.136 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.143 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.148 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:28:54.150 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.5569ms
2025-03-26 00:28:54.152 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:54.153 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 42.2860ms
2025-03-26 00:28:54.297 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/118 - -
2025-03-26 00:28:54.302 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/118 - -
2025-03-26 00:28:54.307 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.308 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.309 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/118 - - - 204 - - 11.5881ms
2025-03-26 00:28:54.310 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/118 - - - 204 - - 7.7124ms
2025-03-26 00:28:54.314 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/118 application/json -
2025-03-26 00:28:54.318 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.322 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:54.330 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:54.360 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:54.396 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.387 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:28:54.399 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:28:54.407 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:54.414 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.426 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 26.4183ms
2025-03-26 00:28:54.424 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
2025-03-26 00:28:54.414 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.427 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:28:54.429 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:54.431 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.433 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.435 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:54.440 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.444 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
2025-03-26 00:28:54.446 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.4687ms
2025-03-26 00:28:54.447 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:54.448 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:54.449 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:54.451 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.455 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 94.8614ms
2025-03-26 00:28:54.452 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.456 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 123.4515ms
2025-03-26 00:28:54.476 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.460 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/118 application/json -
2025-03-26 00:28:54.478 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:54.478 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:54.488 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.489 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.494 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
2025-03-26 00:28:54.499 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:54.495 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/118 application/json - - 200 - application/json;+charset=utf-8 182.5506ms
2025-03-26 00:28:54.497 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:54.498 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:28:54.497 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 39.0195ms
2025-03-26 00:28:54.500 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.502 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:54.503 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:54.504 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:54.510 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.511 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:54.511 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 83.7293ms
2025-03-26 00:28:54.513 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.0427ms
2025-03-26 00:28:54.519 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:28:54.521 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:54'.
2025-03-26 00:28:54.531 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:54.527 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.523 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:54.532 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:54.534 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 24.8903ms
2025-03-26 00:28:54.539 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:54.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 86.1063ms
2025-03-26 00:28:54.548 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:54.551 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/118 application/json - - 200 - application/json;+charset=utf-8 91.0499ms
2025-03-26 00:28:54.572 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:54.580 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 42.8789ms
2025-03-26 00:28:54.582 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:54.583 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 84.4254ms
2025-03-26 00:28:58.010 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:28:58.012 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.018 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.019 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:28:58.019 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.029 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.039 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:28:58.042 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.044 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 22.174ms
2025-03-26 00:28:58.045 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:28:58.046 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 36.6837ms
2025-03-26 00:28:58.108 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json -
2025-03-26 00:28:58.109 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.116 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.117 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.118 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.126 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:58.131 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.133 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.2485ms
2025-03-26 00:28:58.134 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:28:58.135 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.136 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.137 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json - - 200 - application/json;+charset=utf-8 29.4152ms
2025-03-26 00:28:58.138 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.8725ms
2025-03-26 00:28:58.141 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:58.144 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.145 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json -
2025-03-26 00:28:58.145 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.152 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.165 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.180 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.183 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.184 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.184 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:28:58.185 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.186 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json -
2025-03-26 00:28:58.187 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.190 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.197 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.207 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:58.199 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.216 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.227 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.233 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.235 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 41.1441ms
2025-03-26 00:28:58.237 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:58.239 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.241 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 41.223ms
2025-03-26 00:28:58.243 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.245 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.246 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.247 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.249 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 108.4176ms
2025-03-26 00:28:58.261 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json - - 200 - application/json;+charset=utf-8 115.6466ms
2025-03-26 00:28:58.263 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.268 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:28:58.290 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.298 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.307 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:28:58.310 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 54.1315ms
2025-03-26 00:28:58.316 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 63.4083ms
2025-03-26 00:28:58.318 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:28:58.322 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:58.323 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/119 application/json - - 200 - application/json;+charset=utf-8 137.4967ms
2025-03-26 00:28:58.325 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 140.2712ms
2025-03-26 00:28:58.332 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:28:58.334 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.347 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.350 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:58.352 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.361 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.375 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.384 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:28:58.387 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 31.1407ms
2025-03-26 00:28:58.391 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:28:58.393 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 60.5466ms
2025-03-26 00:28:58.445 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/119 - -
2025-03-26 00:28:58.447 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.448 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/119 - - - 204 - - 3.0615ms
2025-03-26 00:28:58.450 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/119 - -
2025-03-26 00:28:58.450 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/119 application/json -
2025-03-26 00:28:58.451 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.452 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.453 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/119 - - - 204 - - 3.5659ms
2025-03-26 00:28:58.454 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:58.456 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.494 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:28:58.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:58.534 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.535 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.540 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 82.1883ms
2025-03-26 00:28:58.542 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.543 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/119 application/json -
2025-03-26 00:28:58.544 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:58.551 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.553 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/119 application/json - - 200 - application/json;+charset=utf-8 103.8543ms
2025-03-26 00:28:58.557 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.558 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:58.561 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.562 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:28:58.564 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:28:58.569 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.571 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.572 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.574 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.85ms
2025-03-26 00:28:58.573 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:28:58.582 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.583 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.8632ms
2025-03-26 00:28:58.590 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:58.589 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.593 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.595 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 27.092ms
2025-03-26 00:28:58.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:28:58.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:28:58.600 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/119 application/json - - 200 - application/json;+charset=utf-8 57.7597ms
2025-03-26 00:28:58.604 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.604 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.613 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.618 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.617 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.621 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.623 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 25.8568ms
2025-03-26 00:28:58.626 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:58.628 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 63.6789ms
2025-03-26 00:28:58.630 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.632 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:28:58.632 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.478ms
2025-03-26 00:28:58.634 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:28:58.636 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:28:58.637 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:28:58.638 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 41.1960ms
2025-03-26 00:28:58.647 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:28:58'.
2025-03-26 00:28:58.650 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:58.651 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:28:58.658 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:28:58.662 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:28:58.664 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.0887ms
2025-03-26 00:28:58.665 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:28:58.666 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 34.5934ms
2025-03-26 00:29:02.192 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/119 - -
2025-03-26 00:29:02.193 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:02.193 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/119 - - - 204 - - 1.4165ms
2025-03-26 00:29:02.194 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/119 application/json 102
2025-03-26 00:29:02.195 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:02.196 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:29:02.199 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:29:02.230 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:29:02.260 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 00:29:02.273 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:29:02.276 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:02.277 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 75.3212ms
2025-03-26 00:29:02.278 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:29:02.279 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/119 application/json 102 - 200 - application/json;+charset=utf-8 84.5408ms
2025-03-26 00:29:07.510 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/119 - -
2025-03-26 00:29:07.510 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/119 - -
2025-03-26 00:29:07.511 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:07.512 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:07.513 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/119 - - - 204 - - 2.5039ms
2025-03-26 00:29:07.514 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/119 - - - 204 - - 3.1977ms
2025-03-26 00:29:07.516 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/119 application/json -
2025-03-26 00:29:07.518 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:07.519 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:29:07.524 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:29:07.533 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:29:07.539 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:29:07.548 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:29:07.554 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 28.3625ms
2025-03-26 00:29:07.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/119 application/json -
2025-03-26 00:29:07.556 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:29:07.557 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:07.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/119 application/json - - 200 - application/json;+charset=utf-8 41.8539ms
2025-03-26 00:29:07.558 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:29:07.560 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:29:07.569 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:29:07.577 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:29:07.584 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:29:07.588 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 24.3875ms
2025-03-26 00:29:07.589 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:29:07.592 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/119 application/json - - 200 - application/json;+charset=utf-8 36.8318ms
2025-03-26 00:29:13.307 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundary1qlr8kxSjf6pAKai 238
2025-03-26 00:29:13.309 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:13.310 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:29:13.313 +01:00 [INF] Route matched with {action = "SaveMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] SaveMap(System.String, Microsoft.AspNetCore.Http.IFormFile) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:29:13.355 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:29:13.358 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:29:13.755 +01:00 [INF] Received HTTP response headers after 393.9333ms - 200
2025-03-26 00:29:13.756 +01:00 [INF] End processing HTTP request after 402.5668ms - 200
2025-03-26 00:29:13.764 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:29:13.766 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:29:13.979 +01:00 [INF] Received HTTP response headers after 212.1129ms - 200
2025-03-26 00:29:13.980 +01:00 [INF] End processing HTTP request after 215.7426ms - 200
2025-03-26 00:29:13.990 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:29:13.997 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:29:14.003 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:29:14.005 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:14.006 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.SaveMap (JurMaps) in 690.6967ms
2025-03-26 00:29:14.007 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:29:14.008 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundary1qlr8kxSjf6pAKai 238 - 200 - application/json;+charset=utf-8 700.5236ms
2025-03-26 00:29:15.406 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:29:15.406 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:29:15.406 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:29:15.407 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.410 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:29:15.409 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.409 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.412 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:29:15.413 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:29:15.417 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.418 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.419 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.470 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:29:15.476 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:29:15.482 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:29:15.483 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.484 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:29:15.488 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 66.907ms
2025-03-26 00:29:15.489 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:29:15.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:29:15.492 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:29:15.495 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.496 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.497 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 90.7550ms
2025-03-26 00:29:15.504 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:29:15.498 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 8.7736ms
2025-03-26 00:29:15.502 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:29:15.502 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:29:15.513 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.512 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.517 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:29:15.515 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.520 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:29:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:29:15.523 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:29:15.522 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 96.5196ms
2025-03-26 00:29:15.523 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.519 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.530 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:29:15.531 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:29:15'.
2025-03-26 00:29:15.532 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.540 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:29:15.533 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:29:15.533 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 16.1859ms
2025-03-26 00:29:15.535 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:29:15.536 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 115.8291ms
2025-03-26 00:29:15.541 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.549 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:29:15.550 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:29:15.551 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.552 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 145.6322ms
2025-03-26 00:29:15.553 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:29:15.554 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:29:15.559 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:29:15.557 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:29:15.558 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.556 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 31.3592ms
2025-03-26 00:29:15.560 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:29:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:29:15.561 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:29:15.566 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 154.9084ms
2025-03-26 00:29:15.566 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:29:15.571 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:29:15.578 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.8128ms
2025-03-26 00:29:15.574 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:29:15'.
2025-03-26 00:29:15.584 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:29:15.580 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 90.7517ms
2025-03-26 00:29:15.586 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.586 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:29:15.587 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:29:15.590 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.592 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 26.6002ms
2025-03-26 00:29:15.593 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 88.7837ms
2025-03-26 00:29:15.593 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:29:15.595 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 18.7161ms
2025-03-26 00:29:15.596 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:29:15.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:29:15.600 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 76.6647ms
2025-03-26 00:29:15.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 61.3258ms
2025-03-26 00:29:15.603 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:29:15.608 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:29:15.609 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.9253ms
2025-03-26 00:29:15.610 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:29:15.611 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 75.9487ms
2025-03-26 00:35:44.606 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:35:44.608 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:44.615 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:44'.
2025-03-26 00:35:44.616 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:35:44.621 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:44.629 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:44.632 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 8.6385ms
2025-03-26 00:35:44.633 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:35:44.633 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 27.5369ms
2025-03-26 00:35:44.654 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:35:44.658 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:44.665 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:44'.
2025-03-26 00:35:44.668 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:35:44.669 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:44.674 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:44.676 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.1114ms
2025-03-26 00:35:44.677 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:35:44.679 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 24.5409ms
2025-03-26 00:35:45.964 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:35:45.966 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:45.967 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.4145ms
2025-03-26 00:35:45.969 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:35:45.969 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:45.970 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:45.979 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:45'.
2025-03-26 00:35:45.981 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:45.982 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:45.987 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:45.988 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3035ms
2025-03-26 00:35:45.989 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:45.990 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.4962ms
2025-03-26 00:35:47.245 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:35:47.247 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.271 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.274 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:35:47.276 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.437 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:47.443 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:47.448 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:35:47.450 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 167.4904ms
2025-03-26 00:35:47.452 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:35:47.453 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 208.3668ms
2025-03-26 00:35:47.461 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:35:47.462 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.470 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.473 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:35:47.474 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.483 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:47.488 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:47.492 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:35:47.497 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.7786ms
2025-03-26 00:35:47.499 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:35:47.501 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 39.8077ms
2025-03-26 00:35:47.538 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:35:47.539 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:35:47.543 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.544 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.544 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 6.9547ms
2025-03-26 00:35:47.545 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 5.9046ms
2025-03-26 00:35:47.547 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:35:47.550 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.551 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 00:35:47.551 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.551 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 00:35:47.556 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.557 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 6.1539ms
2025-03-26 00:35:47.552 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.560 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 9.7972ms
2025-03-26 00:35:47.561 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 00:35:47.561 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:47.565 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 00:35:47.578 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.573 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.580 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.579 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:35:47.582 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:47.588 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:47.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:35:47.635 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:35:47.732 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:35:47.644 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.773 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.794 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 73.8919ms
2025-03-26 00:35:47.802 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 226.8643ms
2025-03-26 00:35:47.791 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.762 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:35:47.761 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:35:47.637 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:35:47.801 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:35:47.801 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:35:47.806 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:35:47.806 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:35:47.807 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.814 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.814 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.817 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.817 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.818 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.820 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.824 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 277.8501ms
2025-03-26 00:35:47.827 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:47.828 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 66.2883ms
2025-03-26 00:35:47.824 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.835 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 242.2813ms
2025-03-26 00:35:47.837 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.830 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 242.1866ms
2025-03-26 00:35:47.831 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 193.3388ms
2025-03-26 00:35:47.833 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.834 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 33.4602ms
2025-03-26 00:35:47.841 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:35:47.842 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:35:47.842 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.843 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:35:47.848 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.849 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.854 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 293.0513ms
2025-03-26 00:35:47.856 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.861 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.2989ms
2025-03-26 00:35:47.856 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.857 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:47.866 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.867 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:47.871 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.859 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 297.6011ms
2025-03-26 00:35:47.863 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:35:47.863 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:35:47.882 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:35:47.882 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.883 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 287.0530ms
2025-03-26 00:35:47.896 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.898 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.899 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.904 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:35:47.906 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:35:47.902 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.908 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.920 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:47.920 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.921 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 49.0737ms
2025-03-26 00:35:47.922 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.926 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:47.967 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:47.962 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:35:47.932 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.967 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:35:47.972 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 59.6601ms
2025-03-26 00:35:47.969 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:35:47.968 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:47.975 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:35:47.969 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 162.6666ms
2025-03-26 00:35:47.984 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:35:47.992 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 190.1793ms
2025-03-26 00:35:47.987 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 23.8464ms
2025-03-26 00:35:47.990 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:47.992 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:47.984 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 41.3692ms
2025-03-26 00:35:47.995 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:35:47.996 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:35:47.997 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.5844ms
2025-03-26 00:35:48.000 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:35:48.001 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 159.9571ms
2025-03-26 00:35:48.010 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 168.7070ms
2025-03-26 00:35:48.010 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 00:35:48.009 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:35:48.008 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:35:47'.
2025-03-26 00:35:48.011 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 00:35:48.013 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:48.014 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 151.8910ms
2025-03-26 00:35:48.016 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:35:48.019 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 00:35:48.017 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:48.017 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 7.2850ms
2025-03-26 00:35:48.020 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:35:48.021 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:48.022 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 10.6842ms
2025-03-26 00:35:48.024 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 00:35:48.025 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:35:48.031 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:48.031 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:48.036 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:48.036 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:48.037 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:35:48.038 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.5336ms
2025-03-26 00:35:48.043 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:35:48.044 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 68.3191ms
2025-03-26 00:35:48.046 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:35:48.046 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:48.052 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:35:48.055 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 15.1122ms
2025-03-26 00:35:48.056 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:35:48.057 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 38.2843ms
2025-03-26 00:35:48.060 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:35:48.065 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:48.067 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 14.9066ms
2025-03-26 00:35:48.071 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:35:48.072 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 47.8102ms
2025-03-26 00:35:50.147 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=2 - -
2025-03-26 00:35:50.148 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:50.149 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=2 - - - 204 - - 2.0296ms
2025-03-26 00:35:50.151 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=2 application/json -
2025-03-26 00:35:50.152 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:35:50.152 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:35:50.154 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:35:50.161 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_2
2025-03-26 00:35:50.165 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:35:50.167 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 11.8571ms
2025-03-26 00:35:50.169 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:35:50.170 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=2 application/json - - 200 - application/json;+charset=utf-8 19.3083ms
2025-03-26 00:36:57.648 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 00:36:57.767 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 00:36:57.815 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 00:36:57.816 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 00:36:57.816 +01:00 [INF] Hosting environment: Development
2025-03-26 00:36:57.817 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 00:36:58.280 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:37:02.422 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 00:37:02.527 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:37:02.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4254.8786ms
2025-03-26 00:37:02.599 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 00:37:02.824 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 225.2934ms
2025-03-26 00:37:05.594 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:37:15.621 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 00:37:15.624 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10030.2104ms
2025-03-26 00:37:18.660 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 00:37:21.309 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 00:37:21.319 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 00:37:21.320 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 2660.7547ms
2025-03-26 00:37:22.857 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:37:22.869 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:22.874 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 16.5789ms
2025-03-26 00:37:22.881 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:37:22.884 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:22.998 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:37:23.004 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:23.053 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 55.5076ms
2025-03-26 00:37:23.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:37:23.100 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:23.145 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:23.145 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:23.221 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:23'.
2025-03-26 00:37:23.222 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:23'.
2025-03-26 00:37:23.226 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:23.227 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:23.285 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:23.285 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:31.947 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:32.010 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8718.0972ms
2025-03-26 00:37:32.014 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:32.016 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 9134.6549ms
2025-03-26 00:37:32.059 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:37:32.060 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:32.061 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2855ms
2025-03-26 00:37:32.066 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:37:32.069 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:32.072 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:32.079 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:32'.
2025-03-26 00:37:32.081 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:32.082 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:32.142 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:37:32.143 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:32.173 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:32.186 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 45.1199ms
2025-03-26 00:37:32.194 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 108.2381ms
2025-03-26 00:37:32.196 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:32.197 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 130.8581ms
2025-03-26 00:37:34.365 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:37:34.476 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:34.480 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11189.2499ms
2025-03-26 00:37:34.481 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:37:34.482 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:34.483 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:34.485 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:34.490 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 11422.5680ms
2025-03-26 00:37:34.491 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
2025-03-26 00:37:34.493 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:34.494 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:34.514 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:37:34.518 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:34.519 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.6627ms
2025-03-26 00:37:34.521 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:34.522 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 40.5562ms
2025-03-26 00:37:34.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:37:34.534 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:34.537 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:34.543 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
2025-03-26 00:37:34.544 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:34.545 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:34.550 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:34.552 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8802ms
2025-03-26 00:37:34.553 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:37:34.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.3480ms
2025-03-26 00:37:34.556 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:37:34.557 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:37:34.559 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:37:34.565 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:37:34'.
2025-03-26 00:37:34.566 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:34.566 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:37:34.615 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:37:34.619 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:37:34.620 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 52.4131ms
2025-03-26 00:37:34.622 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:37:34.623 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 66.2973ms
2025-03-26 00:44:23.816 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:44:23.820 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:23.826 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
2025-03-26 00:44:23.828 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:23.836 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:23.864 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:44:23.864 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:44:23.867 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:23.871 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:23.878 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
2025-03-26 00:44:23.885 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:23'.
2025-03-26 00:44:23.885 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:23.886 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:23.890 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:23.893 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:23.961 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:23.977 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:23.989 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:23.998 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:24.005 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:24.014 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 111.8238ms
2025-03-26 00:44:24.015 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:24.017 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 152.2461ms
2025-03-26 00:44:24.202 +01:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:44:24.203 +01:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:44:24.224 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:24.224 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:24.226 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 386.7289ms
2025-03-26 00:44:24.227 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 334.4896ms
2025-03-26 00:44:24.227 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:24.229 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:24.230 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 414.1263ms
2025-03-26 00:44:24.230 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 366.0909ms
2025-03-26 00:44:27.212 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:44:27.215 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:27.216 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.1906ms
2025-03-26 00:44:27.217 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:27.218 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:27.219 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:27.224 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:27'.
2025-03-26 00:44:27.225 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:27.225 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:27.231 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:27.232 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0642ms
2025-03-26 00:44:27.234 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:27.236 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.7457ms
2025-03-26 00:44:28.371 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json -
2025-03-26 00:44:28.373 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.378 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.379 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.384 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:28.408 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json -
2025-03-26 00:44:28.411 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.416 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.418 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.421 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:28.460 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:44:28.465 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json -
2025-03-26 00:44:28.468 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.481 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:44:28.477 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:44:28.486 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.491 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.495 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.497 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.502 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.503 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:28.504 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 118.9776ms
2025-03-26 00:44:28.506 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 81.7649ms
2025-03-26 00:44:28.507 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.508 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.509 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.510 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.511 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:28.514 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json - - 200 - application/json;+charset=utf-8 142.7685ms
2025-03-26 00:44:28.516 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json - - 200 - application/json;+charset=utf-8 108.6722ms
2025-03-26 00:44:28.521 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:28.529 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:44:28.533 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:28.539 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.544 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:28.545 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 23.7399ms
2025-03-26 00:44:28.547 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:44:28.549 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 35.8335ms
2025-03-26 00:44:28.549 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/121 application/json - - 200 - application/json;+charset=utf-8 84.3394ms
2025-03-26 00:44:28.551 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:28.556 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 95.6537ms
2025-03-26 00:44:28.562 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:44:28.566 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.577 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.579 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:28.581 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.591 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:28.601 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:28.611 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:28.613 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 28.134ms
2025-03-26 00:44:28.614 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:28.615 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 52.6754ms
2025-03-26 00:44:28.818 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/121 - -
2025-03-26 00:44:28.822 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.823 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/121 - -
2025-03-26 00:44:28.829 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/121 - - - 204 - - 11.1779ms
2025-03-26 00:44:28.831 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/121 application/json -
2025-03-26 00:44:28.830 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.833 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.834 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/121 - - - 204 - - 10.7384ms
2025-03-26 00:44:28.835 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:44:28.842 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:28.884 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:28.885 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.887 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.905 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.907 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:28.909 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.914 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.916 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:44:28.919 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.146ms
2025-03-26 00:44:28.919 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.920 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:28.921 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 4.7896ms
2025-03-26 00:44:28.923 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 39.6880ms
2025-03-26 00:44:28.924 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:28.926 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.927 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.934 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.936 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:28.937 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.946 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:28.947 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:28.952 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.952 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.953 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.954 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.349ms
2025-03-26 00:44:28.960 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.960 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:28.961 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:28.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 37.9891ms
2025-03-26 00:44:28.963 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.970 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:28.972 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6781ms
2025-03-26 00:44:28.973 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:28.974 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.2300ms
2025-03-26 00:44:28.975 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:28.977 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:28.978 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:28.984 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:28'.
2025-03-26 00:44:28.985 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:28.987 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:28.995 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:29.000 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:29.002 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.7758ms
2025-03-26 00:44:29.004 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:29.006 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 30.9252ms
2025-03-26 00:44:29.243 +01:00 [INF] Executed DbCommand (371ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:44:29.246 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:29.266 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 421.335ms
2025-03-26 00:44:29.268 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/121 application/json -
2025-03-26 00:44:29.271 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:44:29.272 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:29.273 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/121 application/json - - 200 - application/json;+charset=utf-8 442.0920ms
2025-03-26 00:44:29.274 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:44:29.277 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:29.448 +01:00 [INF] Executed DbCommand (164ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:44:29.450 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:29.453 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 173.1237ms
2025-03-26 00:44:29.454 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:44:29.455 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/121 application/json - - 200 - application/json;+charset=utf-8 186.5988ms
2025-03-26 00:44:31.267 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:44:31.270 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:31.275 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:31'.
2025-03-26 00:44:31.277 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:31.278 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:44:31.287 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:31.470 +01:00 [ERR] Bd w CreateMapController.CreateMap
System.Exception: Moesz stworzy tylko 5 map na dzie. Wyczerpae limit.
   at JurMaps.Services.MapService.SaveMapAndReturnIdAsync(Int32 userId) in E:\jurmaps2\Services\MapService.cs:line 68
   at JurMaps.Controllers.CreateMapController.CreateMap(String authorizationHeader) in E:\jurmaps2\Controllers\CreateMapController.cs:line 75
2025-03-26 00:44:31.482 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:31.484 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 202.9575ms
2025-03-26 00:44:31.486 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:44:31.487 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 220.1130ms
2025-03-26 00:44:34.117 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:44:34.119 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.120 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1240ms
2025-03-26 00:44:34.121 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:34.122 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.123 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.128 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.129 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.130 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.134 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.137 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0836ms
2025-03-26 00:44:34.138 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.139 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.1590ms
2025-03-26 00:44:34.142 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:44:34.143 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.144 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8184ms
2025-03-26 00:44:34.147 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:34.148 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.149 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.154 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.155 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.156 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.163 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:34.167 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.168 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:34.169 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.2428ms
2025-03-26 00:44:34.170 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.171 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.172 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.173 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 26.1074ms
2025-03-26 00:44:34.178 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.179 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.180 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.185 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.186 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0828ms
2025-03-26 00:44:34.188 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 20.3126ms
2025-03-26 00:44:34.191 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:34.191 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.194 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.197 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.199 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.200 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.206 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:34.209 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.210 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.2392ms
2025-03-26 00:44:34.211 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.212 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:34.213 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.5970ms
2025-03-26 00:44:34.216 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.217 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.225 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.229 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.230 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.235 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.236 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0161ms
2025-03-26 00:44:34.237 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:34.237 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:34.238 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.4476ms
2025-03-26 00:44:34.239 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:34.241 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:34.246 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:34'.
2025-03-26 00:44:34.247 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.248 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:34.253 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:34.257 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:34.258 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.4002ms
2025-03-26 00:44:34.259 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:34.260 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.6277ms
2025-03-26 00:44:38.869 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:44:38.870 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:38.877 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:38'.
2025-03-26 00:44:38.878 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:44:38.884 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:38.892 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:38.896 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 10.9793ms
2025-03-26 00:44:38.899 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:44:38.903 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 34.1374ms
2025-03-26 00:44:40.035 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:44:40.036 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:40.038 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0885ms
2025-03-26 00:44:40.041 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:40.042 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:40.043 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:40.050 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:40'.
2025-03-26 00:44:40.050 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:40.051 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:40.058 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:40.061 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.9853ms
2025-03-26 00:44:40.063 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:40.064 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.1632ms
2025-03-26 00:44:41.282 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:44:41.285 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.291 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.292 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:41.294 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.304 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.310 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.314 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:41.316 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.6231ms
2025-03-26 00:44:41.320 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:41.323 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 39.5240ms
2025-03-26 00:44:41.332 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:44:41.333 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.340 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.342 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:41.343 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.352 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.360 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.363 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:41.364 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.1112ms
2025-03-26 00:44:41.365 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:44:41.366 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 34.5597ms
2025-03-26 00:44:41.434 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:44:41.436 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:44:41.439 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.439 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.439 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 3.9122ms
2025-03-26 00:44:41.441 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 6.2664ms
2025-03-26 00:44:41.443 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:44:41.446 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.447 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.447 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 00:44:41.448 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 00:44:41.450 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.451 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.458 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 10.0288ms
2025-03-26 00:44:41.452 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 4.3722ms
2025-03-26 00:44:41.459 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 00:44:41.454 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.468 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 00:44:41.469 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.474 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.475 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:44:41.476 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.478 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.481 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.494 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:41.495 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.496 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.503 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.507 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:41.506 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:44:41.509 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.517 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:44:41.517 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:44:41.519 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.522 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.523 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.525 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.526 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:44:41.531 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 50.1503ms
2025-03-26 00:44:41.533 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 50.6933ms
2025-03-26 00:44:41.538 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.534 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.4307ms
2025-03-26 00:44:41.536 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.536 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 62.8012ms
2025-03-26 00:44:41.549 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.541 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 73.2283ms
2025-03-26 00:44:41.544 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:41.546 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 19.1138ms
2025-03-26 00:44:41.538 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:44:41.540 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:44:41.550 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:41.551 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 107.7126ms
2025-03-26 00:44:41.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 60.1391ms
2025-03-26 00:44:41.556 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.556 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 97.0111ms
2025-03-26 00:44:41.557 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.560 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:44:41.563 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.563 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.564 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.569 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.573 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.575 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:41.578 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:44:41.583 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.584 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.586 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.587 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:41.590 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 19.645ms
2025-03-26 00:44:41.592 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.596 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.595 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:44:41.601 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.602 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.603 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 64.8089ms
2025-03-26 00:44:41.607 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.1474ms
2025-03-26 00:44:41.605 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.9535ms
2025-03-26 00:44:41.613 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:44:41.617 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:44:41.618 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:41.619 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.620 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 58.2759ms
2025-03-26 00:44:41.623 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 72.6245ms
2025-03-26 00:44:41.625 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.628 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:44:41.635 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.635 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.637 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:41.638 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 10.1709ms
2025-03-26 00:44:41.640 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.642 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:44:41.645 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.646 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.652 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.660 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.660 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:44:41.662 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.663 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:44:41.664 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.665 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 21.3753ms
2025-03-26 00:44:41.669 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:44:41.668 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:44:41.670 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 56.6487ms
2025-03-26 00:44:41.670 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.675 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:44:41'.
2025-03-26 00:44:41.678 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:44:41.679 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:44:41.690 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:41.690 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:41.692 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 15.2575ms
2025-03-26 00:44:41.693 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 12.9528ms
2025-03-26 00:44:41.694 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:44:41.695 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:44:41.696 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 53.3787ms
2025-03-26 00:44:41.697 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 36.4714ms
2025-03-26 00:44:41.704 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 00:44:41.704 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 00:44:41.705 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.706 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.707 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 2.9449ms
2025-03-26 00:44:41.707 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 3.3241ms
2025-03-26 00:44:41.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 00:44:41.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 00:44:41.710 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.710 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:41.711 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:44:41.711 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:44:41.716 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.716 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:41.724 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:44:41.727 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:41.730 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:41.732 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:44:41.734 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 16.2943ms
2025-03-26 00:44:41.735 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:44:41.736 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 16.3896ms
2025-03-26 00:44:41.736 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 27.6405ms
2025-03-26 00:44:41.737 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:44:41.739 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 30.1008ms
2025-03-26 00:44:50.769 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/116 - -
2025-03-26 00:44:50.769 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:50.770 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/116 - - - 204 - - 1.4438ms
2025-03-26 00:44:50.771 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/116 application/json -
2025-03-26 00:44:50.772 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:50.772 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:50.775 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:50.796 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-03-26 00:44:50.805 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:50.848 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 00:44:50.860 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:50.875 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:50.878 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:50.879 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 101.602ms
2025-03-26 00:44:50.880 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:50.880 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/116 application/json - - 200 - application/json;+charset=utf-8 109.3008ms
2025-03-26 00:44:52.426 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/117 - -
2025-03-26 00:44:52.426 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:52.427 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/117 - - - 204 - - 1.2259ms
2025-03-26 00:44:52.428 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/117 application/json -
2025-03-26 00:44:52.429 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:52.429 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:52.430 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:52.439 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:52.573 +01:00 [INF] Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-26 00:44:52.586 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:52.592 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:52.594 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:52.595 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 163.445ms
2025-03-26 00:44:52.596 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:52.597 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/117 application/json - - 200 - application/json;+charset=utf-8 169.0947ms
2025-03-26 00:44:53.709 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/118 - -
2025-03-26 00:44:53.709 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:53.710 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/118 - - - 204 - - 1.4643ms
2025-03-26 00:44:53.711 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/118 application/json -
2025-03-26 00:44:53.712 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:53.713 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:53.713 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:53.726 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:53.731 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:53.736 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:53.738 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:53.739 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 23.8851ms
2025-03-26 00:44:53.740 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:53.742 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/118 application/json - - 200 - application/json;+charset=utf-8 30.3757ms
2025-03-26 00:44:55.014 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/119 - -
2025-03-26 00:44:55.014 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:55.015 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/119 - - - 204 - - 1.2912ms
2025-03-26 00:44:55.016 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/119 application/json -
2025-03-26 00:44:55.017 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:55.017 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:55.018 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:55.023 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:55.029 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 00:44:55.032 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:55.042 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:55.044 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:55.045 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 25.5582ms
2025-03-26 00:44:55.047 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:55.048 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/119 application/json - - 200 - application/json;+charset=utf-8 32.3399ms
2025-03-26 00:44:56.340 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/120 - -
2025-03-26 00:44:56.340 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:56.341 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/120 - - - 204 - - 1.5835ms
2025-03-26 00:44:56.343 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/120 application/json -
2025-03-26 00:44:56.343 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:56.344 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:56.345 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:56.350 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:56.355 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:56.360 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:56.362 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:56.363 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 16.6009ms
2025-03-26 00:44:56.364 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:56.365 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/120 application/json - - 200 - application/json;+charset=utf-8 21.8879ms
2025-03-26 00:44:57.776 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/121 - -
2025-03-26 00:44:57.777 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:57.777 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/121 - - - 204 - - 1.2438ms
2025-03-26 00:44:57.778 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/121 application/json -
2025-03-26 00:44:57.779 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:44:57.779 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:57.780 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:44:57.786 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 00:44:57.791 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:44:57.796 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 00:44:57.798 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:44:57.799 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 16.8642ms
2025-03-26 00:44:57.800 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 00:44:57.800 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/121 application/json - - 200 - application/json;+charset=utf-8 22.0988ms
2025-03-26 00:45:02.986 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 00:45:02.987 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:02.992 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:02'.
2025-03-26 00:45:02.993 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:45:02.994 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.000 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.007 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 00:45:03.010 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.012 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 16.1156ms
2025-03-26 00:45:03.012 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 00:45:03.014 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 27.7736ms
2025-03-26 00:45:03.095 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json -
2025-03-26 00:45:03.096 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.101 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.103 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.103 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.112 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:03.117 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.119 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.0651ms
2025-03-26 00:45:03.120 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.125 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:45:03.125 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json - - 200 - application/json;+charset=utf-8 30.5977ms
2025-03-26 00:45:03.126 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.130 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.3215ms
2025-03-26 00:45:03.131 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:03.132 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.134 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.142 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.144 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json -
2025-03-26 00:45:03.144 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.146 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.146 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.153 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.158 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.159 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.159 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.164 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.1425ms
2025-03-26 00:45:03.166 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:03.167 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.173 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.174 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 42.5020ms
2025-03-26 00:45:03.176 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.6533ms
2025-03-26 00:45:03.178 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.179 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json - - 200 - application/json;+charset=utf-8 35.1861ms
2025-03-26 00:45:03.195 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:45:03.196 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json -
2025-03-26 00:45:03.197 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.199 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.208 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.216 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.218 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:03.220 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.221 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.222 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.229 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.232 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:03.237 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.241 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.245 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:03.249 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 23.3751ms
2025-03-26 00:45:03.251 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 27.6478ms
2025-03-26 00:45:03.252 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 00:45:03.255 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:03.257 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/122 application/json - - 200 - application/json;+charset=utf-8 60.9713ms
2025-03-26 00:45:03.258 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 62.5168ms
2025-03-26 00:45:03.269 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:45:03.271 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.282 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.284 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:03.284 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.291 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.298 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.302 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:03.304 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.0293ms
2025-03-26 00:45:03.306 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:03.308 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 38.0553ms
2025-03-26 00:45:03.352 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/122 - -
2025-03-26 00:45:03.354 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.355 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/122 - - - 204 - - 2.4360ms
2025-03-26 00:45:03.356 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/122 - -
2025-03-26 00:45:03.356 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/122 application/json -
2025-03-26 00:45:03.358 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.358 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.359 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/122 - - - 204 - - 3.4235ms
2025-03-26 00:45:03.360 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:45:03.361 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.367 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:45:03.371 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.372 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.8397ms
2025-03-26 00:45:03.374 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/122 application/json -
2025-03-26 00:45:03.374 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:45:03.375 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.375 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/122 application/json - - 200 - application/json;+charset=utf-8 19.4653ms
2025-03-26 00:45:03.376 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:45:03.379 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:03.392 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:45:03.402 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.404 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 22.0546ms
2025-03-26 00:45:03.405 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 00:45:03.406 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/122 application/json - - 200 - application/json;+charset=utf-8 32.8362ms
2025-03-26 00:45:03.431 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:03.432 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.434 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.445 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.448 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.449 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.453 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.455 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2911ms
2025-03-26 00:45:03.456 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.457 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.5320ms
2025-03-26 00:45:03.468 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:45:03.471 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.472 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 4.2010ms
2025-03-26 00:45:03.476 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:45:03.478 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.479 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.483 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.485 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:03.485 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.493 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.496 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:03.498 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.498 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.499 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.5001ms
2025-03-26 00:45:03.500 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.501 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:03.510 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.511 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 35.0913ms
2025-03-26 00:45:03.512 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.515 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.520 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.522 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1413ms
2025-03-26 00:45:03.523 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:03.524 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.5521ms
2025-03-26 00:45:03.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:45:03.529 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:03.530 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:03.535 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:03'.
2025-03-26 00:45:03.536 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:03.537 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:03.547 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:03.552 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:03.555 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.071ms
2025-03-26 00:45:03.556 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:03.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.9694ms
2025-03-26 00:45:06.741 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/122 - -
2025-03-26 00:45:06.742 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:06.743 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/122 - - - 204 - - 1.6345ms
2025-03-26 00:45:06.744 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/122 application/json 102
2025-03-26 00:45:06.745 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:06.746 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:45:06.750 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:06.810 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 00:45:06.822 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 00:45:06.849 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:45:06.851 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:06.852 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 100.8473ms
2025-03-26 00:45:06.853 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 00:45:06.854 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/122 application/json 102 - 200 - application/json;+charset=utf-8 110.0986ms
2025-03-26 00:45:09.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/122 - -
2025-03-26 00:45:09.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/122 - -
2025-03-26 00:45:09.164 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:09.165 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:09.166 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/122 - - - 204 - - 2.1097ms
2025-03-26 00:45:09.166 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapdata/122 - - - 204 - - 2.2187ms
2025-03-26 00:45:09.167 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/122 application/json -
2025-03-26 00:45:09.169 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:09.169 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:45:09.174 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:09.181 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:09.186 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:09.189 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:09.191 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 15.7751ms
2025-03-26 00:45:09.192 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/122 application/json -
2025-03-26 00:45:09.192 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:45:09.193 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:09.194 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/122 application/json - - 200 - application/json;+charset=utf-8 27.1179ms
2025-03-26 00:45:09.194 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:45:09.196 +01:00 [INF] Route matched with {action = "GetMapData", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.MapDto]] GetMapData(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:09.201 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:09.206 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:09.209 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:09.211 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapData (JurMaps) in 13.6137ms
2025-03-26 00:45:09.212 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapData (JurMaps)'
2025-03-26 00:45:09.213 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapdata/122 application/json - - 200 - application/json;+charset=utf-8 21.0402ms
2025-03-26 00:45:17.346 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryO4EEk367Fo9PYfVh 238
2025-03-26 00:45:17.347 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:17.347 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:45:17.354 +01:00 [INF] Route matched with {action = "SaveMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] SaveMap(System.String, Microsoft.AspNetCore.Http.IFormFile) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 00:45:17.395 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:45:17.398 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:45:17.765 +01:00 [INF] Received HTTP response headers after 364.834ms - 200
2025-03-26 00:45:17.767 +01:00 [INF] End processing HTTP request after 373.9083ms - 200
2025-03-26 00:45:17.775 +01:00 [INF] Start processing HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:45:17.776 +01:00 [INF] Sending HTTP request POST https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyANNrfkv56iGfDw3imGSIcgtPD1-iAcyH0
2025-03-26 00:45:18.005 +01:00 [INF] Received HTTP response headers after 227.9805ms - 200
2025-03-26 00:45:18.006 +01:00 [INF] End processing HTTP request after 230.7428ms - 200
2025-03-26 00:45:18.015 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:18.020 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:18.025 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:45:18.027 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:18.028 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.SaveMap (JurMaps) in 671.7697ms
2025-03-26 00:45:18.029 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.SaveMap (JurMaps)'
2025-03-26 00:45:18.029 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/savemap multipart/form-data;+boundary=----WebKitFormBoundaryO4EEk367Fo9PYfVh 238 - 200 - application/json;+charset=utf-8 684.0496ms
2025-03-26 00:45:19.217 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:45:19.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:45:19.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:45:19.222 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.224 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.224 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.225 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:45:19.226 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:45:19.227 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:45:19.233 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.235 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.237 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.255 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:45:19.264 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.270 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 33.8433ms
2025-03-26 00:45:19.271 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:45:19.272 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - -
2025-03-26 00:45:19.278 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:45:19.284 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.284 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:45:19.285 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 66.3539ms
2025-03-26 00:45:19.285 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:45:19.287 +01:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-03-26 00:45:19.297 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.299 +01:00 [INF] Route matched with {action = "GetCountryNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetCountryNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.304 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 00:45:19.315 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - -
2025-03-26 00:45:19.319 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.321 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CountryName"
FROM "Countries" AS c
2025-03-26 00:45:19.324 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 20.4681ms
2025-03-26 00:45:19.321 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.305 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 54.5671ms
2025-03-26 00:45:19.313 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:45:19.325 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:19.340 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.327 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:45:19.331 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:45:19.326 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.339 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 00:45:19.340 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.346 +01:00 [INF] Route matched with {action = "GetPopularTagsNames", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[System.String]]] GetPopularTagsNames() on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.349 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetCountryNames (JurMaps) in 32.9956ms
2025-03-26 00:45:19.352 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.348 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 129.6430ms
2025-03-26 00:45:19.355 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetCountryNames (JurMaps)'
2025-03-26 00:45:19.358 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 18.4274ms
2025-03-26 00:45:19.353 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:19.360 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:45:19.360 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."TagId", t."TagName", t."TagQuantity"
FROM "Tags" AS t
ORDER BY t."TagQuantity" DESC
LIMIT @__p_0
2025-03-26 00:45:19.348 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - -
2025-03-26 00:45:19.346 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 101.1125ms
2025-03-26 00:45:19.362 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getcountrynames - - - 200 - application/json;+charset=utf-8 89.8700ms
2025-03-26 00:45:19.368 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:19'.
2025-03-26 00:45:19.368 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.370 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.375 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:19.372 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:19.373 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:45:19.376 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:19.377 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps) in 22.4175ms
2025-03-26 00:45:19.379 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:19.379 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:45:19.380 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 163.2676ms
2025-03-26 00:45:19.385 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:19'.
2025-03-26 00:45:19.387 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetPopularTagsNames (JurMaps)'
2025-03-26 00:45:19.390 +01:00 [INF] Route matched with {action = "GetFilteredMaps", controller = "Maps"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetFilteredMaps(System.String, System.Collections.Generic.List`1[System.String], System.String, System.String) on controller JurMaps.Controllers.MapsController (JurMaps).
2025-03-26 00:45:19.392 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.395 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:19.396 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getpopulartagsnames - - - 200 - application/json;+charset=utf-8 81.5032ms
2025-03-26 00:45:19.401 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.4736ms
2025-03-26 00:45:19.402 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:19.404 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:19.407 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapName", t."MapDescription", t."MapLikes", u."UserName" AS "MapCreatorName", t."MapCreatorId", u."UserProfilePicture" AS "MapCreatorPicture", t."MapThumbnail"
FROM (
    SELECT m."MapId", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapThumbnail"
    FROM "Maps" AS m
    WHERE m."MapUploaded"
    LIMIT @__p_1 OFFSET @__p_0
) AS t
INNER JOIN "Users" AS u ON t."MapCreatorId" = u."UserId"
2025-03-26 00:45:19.410 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 85.0372ms
2025-03-26 00:45:19.413 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.415 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:19.417 +01:00 [INF] Executed action JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps) in 17.8375ms
2025-03-26 00:45:19.421 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:19.421 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.MapsController.GetFilteredMaps (JurMaps)'
2025-03-26 00:45:19.424 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/maps/getfilteredmaps?Page=1 - - - 200 - application/json;+charset=utf-8 76.6216ms
2025-03-26 00:45:19.422 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.7463ms
2025-03-26 00:45:19.429 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:19.430 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 69.9581ms
2025-03-26 00:45:21.425 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 00:45:21.428 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.432 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.434 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:45:21.435 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:21.439 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.441 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 4.4211ms
2025-03-26 00:45:21.442 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 00:45:21.442 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 17.1231ms
2025-03-26 00:45:21.552 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:21.554 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.555 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.566 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.570 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:21.571 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:21.580 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.582 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2596ms
2025-03-26 00:45:21.583 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:21.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.8787ms
2025-03-26 00:45:21.606 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:45:21.609 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.618 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.620 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:21.622 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:21.631 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:21.638 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:21.645 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:21.647 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 22.4274ms
2025-03-26 00:45:21.649 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:21.651 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 45.2933ms
2025-03-26 00:45:21.659 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 00:45:21.661 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.674 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.678 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:21.680 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:21.691 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:21.698 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:21.701 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:21.703 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.793ms
2025-03-26 00:45:21.705 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 00:45:21.706 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 47.0064ms
2025-03-26 00:45:21.747 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:45:21.747 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 00:45:21.748 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.750 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.750 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 3.7019ms
2025-03-26 00:45:21.751 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 4.3700ms
2025-03-26 00:45:21.756 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 00:45:21.756 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 00:45:21.759 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:45:21.762 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.763 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.765 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.771 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 00:45:21.769 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 12.3321ms
2025-03-26 00:45:21.770 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 13.2310ms
2025-03-26 00:45:21.771 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 00:45:21.779 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.783 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:21.785 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.785 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:45:21.792 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.793 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:21.794 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:21.798 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:45:21.810 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:45:21.814 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.798 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:21.825 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 34.298ms
2025-03-26 00:45:21.821 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 00:45:21.819 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:45:21.831 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.832 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:45:21.833 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.834 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 34.0755ms
2025-03-26 00:45:21.837 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.840 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.842 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.842 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.845 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 86.5687ms
2025-03-26 00:45:21.847 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 00:45:21.862 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.848 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.853 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 47.1788ms
2025-03-26 00:45:21.864 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.866 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 95.4661ms
2025-03-26 00:45:21.872 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:21.874 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:21.876 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.889 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.892 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:21.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 120.3506ms
2025-03-26 00:45:21.903 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 00:45:21.903 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:21.910 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.913 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.915 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:21.918 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 21.5495ms
2025-03-26 00:45:21.916 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.7055ms
2025-03-26 00:45:21.929 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:21.931 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:21.924 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 00:45:21.932 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 133.9162ms
2025-03-26 00:45:21.917 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 00:45:21.937 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 00:45:21.943 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 115.1260ms
2025-03-26 00:45:21.946 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:21.950 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.956 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 33.7772ms
2025-03-26 00:45:21.951 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.958 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.959 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:21.964 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 26.4408ms
2025-03-26 00:45:21.958 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 00:45:21.966 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:45:21.978 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 00:45:21.981 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:21.983 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 151.3614ms
2025-03-26 00:45:21.985 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.985 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.986 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:21.992 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.993 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:21.987 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:21.994 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 00:45:22.001 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:22.006 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:22.008 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:22.015 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '25.03.2025 23:45:21'.
2025-03-26 00:45:22.017 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:22.018 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:45:22.020 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:45:22.021 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:22.022 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:22.022 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:22.024 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 00:45:22.032 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:22.028 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8.3217ms
2025-03-26 00:45:22.036 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:22.039 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:22.043 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:22.045 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 00:45:22.046 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 14.1654ms
2025-03-26 00:45:22.048 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 12.2622ms
2025-03-26 00:45:22.050 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.426ms
2025-03-26 00:45:22.051 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 133.2926ms
2025-03-26 00:45:22.053 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:45:22.055 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 00:45:22.056 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 00:45:22.059 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 92.9208ms
2025-03-26 00:45:22.061 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 82.4725ms
2025-03-26 00:45:22.062 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 103.3865ms
2025-03-26 00:45:22.066 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 00:45:22.066 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 00:45:22.067 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:22.068 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:22.071 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 5.1308ms
2025-03-26 00:45:22.075 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 8.5728ms
2025-03-26 00:45:22.076 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 00:45:22.077 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 00:45:22.078 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:22.080 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:22.081 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:45:22.082 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:45:22.083 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:22.084 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:22.094 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 00:45:22.097 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 00:45:22.102 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:22.106 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 00:45:22.109 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 22.2133ms
2025-03-26 00:45:22.111 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 22.1785ms
2025-03-26 00:45:22.112 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 00:45:22.113 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 00:45:22.114 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 38.4176ms
2025-03-26 00:45:22.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 38.9927ms
2025-03-26 00:45:26.429 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/publishmap/122 - -
2025-03-26 00:45:26.430 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:26.430 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/publishmap/122 - - - 204 - - 1.2712ms
2025-03-26 00:45:26.431 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/profile/publishmap/122 application/json 0
2025-03-26 00:45:26.432 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:26.432 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.PublishMap (JurMaps)'
2025-03-26 00:45:26.436 +01:00 [INF] Route matched with {action = "PublishMap", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] PublishMap(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:26.441 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:26.447 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:45:26.449 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:26.450 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.PublishMap (JurMaps) in 13.3885ms
2025-03-26 00:45:26.451 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.PublishMap (JurMaps)'
2025-03-26 00:45:26.452 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/profile/publishmap/122 application/json 0 - 200 - application/json;+charset=utf-8 20.9534ms
2025-03-26 00:45:34.145 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/movemaptodraft/122 - -
2025-03-26 00:45:34.146 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:34.146 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/movemaptodraft/122 - - - 204 - - 1.3146ms
2025-03-26 00:45:34.147 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/profile/movemaptodraft/122 application/json 0
2025-03-26 00:45:34.148 +01:00 [INF] CORS policy execution successful.
2025-03-26 00:45:34.148 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.MoveMapToDraft (JurMaps)'
2025-03-26 00:45:34.151 +01:00 [INF] Route matched with {action = "MoveMapToDraft", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] MoveMapToDraft(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 00:45:34.157 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 00:45:34.162 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 00:45:34.164 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 00:45:34.165 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.MoveMapToDraft (JurMaps) in 12.2918ms
2025-03-26 00:45:34.166 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.MoveMapToDraft (JurMaps)'
2025-03-26 00:45:34.166 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/profile/movemaptodraft/122 application/json 0 - 200 - application/json;+charset=utf-8 19.0637ms
2025-03-26 01:52:54.371 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 01:52:54.588 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 01:52:54.866 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 01:52:54.868 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 01:52:54.869 +01:00 [INF] Hosting environment: Development
2025-03-26 01:52:54.869 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 01:52:55.251 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 01:52:59.427 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 01:52:59.571 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 01:52:59.576 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4329.2605ms
2025-03-26 01:52:59.688 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 01:53:00.917 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 1229.0859ms
2025-03-26 01:53:02.653 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 01:53:06.727 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 01:53:06.729 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4075.4525ms
2025-03-26 01:53:09.747 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 01:53:19.762 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 01:53:19.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10025.3680ms
2025-03-26 01:53:22.801 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 01:53:32.807 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 01:53:32.808 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 10006.8431ms
2025-03-26 01:53:35.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 01:53:44.713 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 01:53:44.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 8879.4200ms
2025-03-26 01:53:44.718 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 01:53:45.951 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 01:53:45.961 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:45.964 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 12.9055ms
2025-03-26 01:53:45.967 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:53:45.976 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:45.994 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 01:53:46.004 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:46.005 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 10.5894ms
2025-03-26 01:53:46.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 01:53:46.008 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:46.117 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:46.117 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:46.170 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:46'.
2025-03-26 01:53:46.170 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:46'.
2025-03-26 01:53:46.173 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:46.173 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:46.239 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:46.239 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:55.055 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:55.169 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8925.1595ms
2025-03-26 01:53:55.172 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:55.175 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 9208.2003ms
2025-03-26 01:53:55.224 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 01:53:55.225 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:55.226 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.7219ms
2025-03-26 01:53:55.228 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:53:55.229 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:55.230 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:55.237 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:55'.
2025-03-26 01:53:55.238 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:55.239 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:55.251 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 01:53:55.252 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:55.253 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.7143ms
2025-03-26 01:53:55.253 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:55.256 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.3375ms
2025-03-26 01:53:55.257 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:55.258 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.2625ms
2025-03-26 01:53:57.330 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:53:57.418 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:57.421 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11177.8054ms
2025-03-26 01:53:57.422 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 01:53:57.423 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:57.423 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:57.425 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:57.429 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
2025-03-26 01:53:57.429 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 11422.2703ms
2025-03-26 01:53:57.430 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:57.431 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:57.449 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:53:57.453 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:57.455 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 22.1309ms
2025-03-26 01:53:57.456 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:57.457 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 35.3798ms
2025-03-26 01:53:57.463 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:53:57.464 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:57.465 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:57.470 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
2025-03-26 01:53:57.471 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:57.471 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:57.477 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:57.478 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8218ms
2025-03-26 01:53:57.479 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:53:57.480 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.8144ms
2025-03-26 01:53:57.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 01:53:57.490 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:53:57.491 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:53:57.495 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:53:57'.
2025-03-26 01:53:57.496 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:57.497 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:53:57.547 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:53:57.551 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:53:57.553 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 54.1163ms
2025-03-26 01:53:57.554 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:53:57.555 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 65.6137ms
2025-03-26 01:58:01.592 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 01:58:01.594 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:01.607 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
2025-03-26 01:58:01.609 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 01:58:01.619 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:01.635 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 01:58:01.635 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 01:58:01.637 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:01.646 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:01.655 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
2025-03-26 01:58:01.664 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:01'.
2025-03-26 01:58:01.666 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:01.669 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 01:58:01.672 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:01.668 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:01.676 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:01.692 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:01.709 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:01.713 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 01:58:01.721 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 37.1879ms
2025-03-26 01:58:01.724 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:01.730 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 95.0781ms
2025-03-26 01:58:01.744 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:01.888 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 01:58:01.888 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 01:58:01.908 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:01.908 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:01.910 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 233.5878ms
2025-03-26 01:58:01.911 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 289.8429ms
2025-03-26 01:58:01.911 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 01:58:01.912 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 01:58:01.913 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 278.4204ms
2025-03-26 01:58:01.914 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 322.2191ms
2025-03-26 01:58:10.691 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 01:58:10.693 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:10.694 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.6010ms
2025-03-26 01:58:10.695 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:58:10.696 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:10.697 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:10'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:10.702 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:10'.
2025-03-26 01:58:10.703 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:10.703 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:10.708 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:10.709 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3217ms
2025-03-26 01:58:10.710 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:10.711 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 15.6900ms
2025-03-26 01:58:12.628 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json -
2025-03-26 01:58:12.634 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:12.642 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
2025-03-26 01:58:12.643 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:12.650 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:12.740 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 01:58:12.740 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json -
2025-03-26 01:58:12.745 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:12.745 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:12.746 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 92.6759ms
2025-03-26 01:58:12.751 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
2025-03-26 01:58:12.752 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:12.753 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:12.753 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json - - 200 - application/json;+charset=utf-8 125.3156ms
2025-03-26 01:58:12.754 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:12.768 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 01:58:12.795 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:12.798 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 41.2094ms
2025-03-26 01:58:12.799 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:12.802 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json - - 200 - application/json;+charset=utf-8 61.0332ms
2025-03-26 01:58:12.898 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 01:58:12.899 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json -
2025-03-26 01:58:12.900 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:12.900 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:12.940 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
2025-03-26 01:58:12.969 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:12'.
2025-03-26 01:58:12.971 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:12.972 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:12.974 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:12.975 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:12.996 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.008 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.011 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 01:58:13.024 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 01:58:13.027 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.030 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 41.0038ms
2025-03-26 01:58:13.030 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 28.1455ms
2025-03-26 01:58:13.031 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:13.034 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 135.9803ms
2025-03-26 01:58:13.032 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 01:58:13.036 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/124 application/json - - 200 - application/json;+charset=utf-8 137.6792ms
2025-03-26 01:58:13.052 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 01:58:13.054 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:13.064 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
2025-03-26 01:58:13.066 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:13.069 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:13.080 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.090 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.104 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 01:58:13.120 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 48.448ms
2025-03-26 01:58:13.129 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 01:58:13.147 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 95.0245ms
2025-03-26 01:58:13.237 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/124 - -
2025-03-26 01:58:13.238 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/124 - -
2025-03-26 01:58:13.250 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.261 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.264 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/124 - - - 204 - - 27.4359ms
2025-03-26 01:58:13.265 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/124 - - - 204 - - 27.1149ms
2025-03-26 01:58:13.268 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/124 application/json -
2025-03-26 01:58:13.269 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.270 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 01:58:13.281 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:13.315 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:58:13.317 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.319 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:13.326 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
2025-03-26 01:58:13.329 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:13.330 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:13.335 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.336 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7379ms
2025-03-26 01:58:13.338 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:13.339 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.0947ms
2025-03-26 01:58:13.354 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 01:58:13.355 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.356 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9996ms
2025-03-26 01:58:13.358 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 01:58:13.360 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.362 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:13.369 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
2025-03-26 01:58:13.370 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:58:13.371 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:13.388 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.389 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 01:58:13.393 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.393 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.397 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.2058ms
2025-03-26 01:58:13.398 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:13.399 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:58:13.404 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
2025-03-26 01:58:13.405 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 47.0881ms
2025-03-26 01:58:13.407 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:13.415 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:13.424 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 01:58:13.424 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.432 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.433 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 14.1301ms
2025-03-26 01:58:13.434 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 01:58:13.436 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 01:58:13.444 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 00:58:13'.
2025-03-26 01:58:13.445 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 56.2884ms
2025-03-26 01:58:13.446 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:58:13.448 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 01:58:13.460 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 01:58:13.481 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.483 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 31.0103ms
2025-03-26 01:58:13.486 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 01:58:13.487 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 63.5238ms
2025-03-26 01:58:13.680 +01:00 [INF] Executed DbCommand (357ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 01:58:13.837 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.859 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 559.7271ms
2025-03-26 01:58:13.861 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 01:58:13.862 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/124 application/json - - 200 - application/json;+charset=utf-8 594.2191ms
2025-03-26 01:58:13.868 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/124 application/json -
2025-03-26 01:58:13.871 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:13.882 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 01:58:13.888 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:13.912 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 01:58:13.917 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:13.920 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 29.1378ms
2025-03-26 01:58:13.923 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 01:58:13.925 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/124 application/json - - 200 - application/json;+charset=utf-8 57.3053ms
2025-03-26 01:58:20.977 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/124 - -
2025-03-26 01:58:20.977 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:20.978 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/124 - - - 204 - - 1.7686ms
2025-03-26 01:58:20.980 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/124 application/json 96
2025-03-26 01:58:20.981 +01:00 [INF] CORS policy execution successful.
2025-03-26 01:58:20.982 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 01:58:20.987 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 01:58:21.023 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 01:58:21.058 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 01:58:21.080 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 01:58:21.083 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 01:58:21.084 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 95.5062ms
2025-03-26 01:58:21.085 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 01:58:21.086 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/124 application/json 96 - 200 - application/json;+charset=utf-8 105.4553ms
2025-03-26 02:00:47.476 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:00:47.477 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:47.478 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2442ms
2025-03-26 02:00:47.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:00:47.480 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:47.482 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:47.488 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:47'.
2025-03-26 02:00:47.489 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:47.490 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:47.496 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:47.497 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6572ms
2025-03-26 02:00:47.499 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:47.500 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 20.1565ms
2025-03-26 02:00:47.504 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:00:47.505 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:47.505 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.4727ms
2025-03-26 02:00:47.507 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:00:47.508 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:47.509 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:47.513 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:47'.
2025-03-26 02:00:47.515 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:47.515 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:47.520 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:47.524 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:47.525 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.9594ms
2025-03-26 02:00:47.526 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:47.527 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 20.2527ms
2025-03-26 02:00:50.694 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:00:50.696 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.702 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.703 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:00:50.704 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:50.710 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:50.718 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:00:50.722 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:50.723 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 17.1494ms
2025-03-26 02:00:50.724 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:00:50.727 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 32.9019ms
2025-03-26 02:00:50.798 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json -
2025-03-26 02:00:50.799 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.807 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.810 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.812 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:50.822 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:00:50.834 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:50.836 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:00:50.839 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 24.4307ms
2025-03-26 02:00:50.840 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:50.842 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.847 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.847 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json - - 200 - application/json;+charset=utf-8 49.8987ms
2025-03-26 02:00:50.859 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json -
2025-03-26 02:00:50.864 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.867 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.868 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:50.878 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:50.877 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.884 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.885 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:50.887 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:50.889 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.703ms
2025-03-26 02:00:50.894 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:50.895 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 59.4521ms
2025-03-26 02:00:50.898 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:00:50.901 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:00:50.905 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:50.907 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json -
2025-03-26 02:00:50.908 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.908 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.3563ms
2025-03-26 02:00:50.909 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:50.919 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.921 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.930 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:50'.
2025-03-26 02:00:50.935 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.932 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json - - 200 - application/json;+charset=utf-8 72.6917ms
2025-03-26 02:00:50.931 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:00:50.937 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:50.941 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:50.951 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:00:50.961 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:50.965 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 21.3756ms
2025-03-26 02:00:50.979 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:00:50.987 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/125 application/json - - 200 - application/json;+charset=utf-8 80.2428ms
2025-03-26 02:00:51.028 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.033 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.036 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:00:51.037 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 90.8732ms
2025-03-26 02:00:51.039 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:00:51.040 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 139.5610ms
2025-03-26 02:00:51.046 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:00:51.047 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:51.054 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
2025-03-26 02:00:51.056 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:00:51.058 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:51.066 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.075 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.082 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:00:51.091 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 30.5505ms
2025-03-26 02:00:51.094 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:00:51.096 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 50.4050ms
2025-03-26 02:00:51.151 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/125 - -
2025-03-26 02:00:51.152 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.154 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/125 - -
2025-03-26 02:00:51.156 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/125 - - - 204 - - 4.9711ms
2025-03-26 02:00:51.157 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.158 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/125 application/json -
2025-03-26 02:00:51.159 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/125 - - - 204 - - 4.9435ms
2025-03-26 02:00:51.160 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.164 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:00:51.165 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:51.203 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:00:51.219 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.221 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 53.7322ms
2025-03-26 02:00:51.228 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/125 application/json -
2025-03-26 02:00:51.231 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:00:51.234 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.235 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/125 application/json - - 200 - application/json;+charset=utf-8 76.9274ms
2025-03-26 02:00:51.245 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:00:51.254 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:51.251 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:00:51.261 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.266 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:00:51.272 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:51.279 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.286 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:00:51.290 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
2025-03-26 02:00:51.294 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:51.292 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.292 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 33.4761ms
2025-03-26 02:00:51.299 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:51.301 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:51.304 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:00:51.311 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.319 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
2025-03-26 02:00:51.320 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/125 application/json - - 200 - application/json;+charset=utf-8 91.9387ms
2025-03-26 02:00:51.327 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:00:51.325 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:51.324 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 16.7679ms
2025-03-26 02:00:51.328 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.330 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:51.331 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:51.335 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:51.351 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 100.4479ms
2025-03-26 02:00:51.362 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.364 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
2025-03-26 02:00:51.370 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.370 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:51.372 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 23.5276ms
2025-03-26 02:00:51.373 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:51.374 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:51.375 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:00:51.377 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 91.1324ms
2025-03-26 02:00:51.378 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:51.379 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.381 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:00:51.382 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3411ms
2025-03-26 02:00:51.387 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:00:51'.
2025-03-26 02:00:51.388 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:00:51.389 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:51.390 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 62.8848ms
2025-03-26 02:00:51.391 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:00:51.399 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:00:51.403 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:51.404 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.3914ms
2025-03-26 02:00:51.405 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:00:51.407 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.0067ms
2025-03-26 02:00:56.458 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/125 - -
2025-03-26 02:00:56.459 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:56.459 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/125 - - - 204 - - 1.3069ms
2025-03-26 02:00:56.460 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/125 application/json 103
2025-03-26 02:00:56.461 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:00:56.462 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:00:56.463 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:00:56.470 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:00:56.475 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:00:56.479 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:00:56.481 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:00:56.482 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 18.0235ms
2025-03-26 02:00:56.484 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:00:56.485 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/125 application/json 103 - 200 - application/json;+charset=utf-8 24.3631ms
2025-03-26 02:02:40.952 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:02:40.954 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:40.956 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.8818ms
2025-03-26 02:02:40.961 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:02:40.963 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:40.966 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:40.974 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:40'.
2025-03-26 02:02:40.976 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:40.977 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:40.983 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:40.986 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.8164ms
2025-03-26 02:02:40.988 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:40.989 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.3582ms
2025-03-26 02:02:41.018 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:02:41.019 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:41.020 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9173ms
2025-03-26 02:02:41.022 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:02:41.023 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:41.025 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:41.035 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:41'.
2025-03-26 02:02:41.037 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:41.038 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:41.048 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:41.051 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:41.053 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.7663ms
2025-03-26 02:02:41.055 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:41.056 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 34.2280ms
2025-03-26 02:02:46.117 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:02:46.118 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.123 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.124 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:02:46.125 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.132 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:46.139 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:02:46.142 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.144 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 17.1913ms
2025-03-26 02:02:46.145 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:02:46.146 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 28.7868ms
2025-03-26 02:02:46.295 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json -
2025-03-26 02:02:46.299 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.313 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.319 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.321 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.334 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:02:46.339 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.342 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 16.0577ms
2025-03-26 02:02:46.344 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.346 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json - - 200 - application/json;+charset=utf-8 51.1338ms
2025-03-26 02:02:46.370 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:02:46.371 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.373 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0349ms
2025-03-26 02:02:46.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:02:46.377 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.381 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.391 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.396 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:46.397 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:46.399 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json -
2025-03-26 02:02:46.404 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.407 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.418 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.419 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 17.1813ms
2025-03-26 02:02:46.434 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:46.430 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.437 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 61.2234ms
2025-03-26 02:02:46.439 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.465 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:02:46.475 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json -
2025-03-26 02:02:46.468 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:02:46.482 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.485 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.486 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.488 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 35.9607ms
2025-03-26 02:02:46.502 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.511 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.513 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.514 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.515 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:02:46.516 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json - - 200 - application/json;+charset=utf-8 117.6324ms
2025-03-26 02:02:46.517 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.519 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:46.529 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:02:46.535 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:46.538 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.546 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:46.548 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 24.7662ms
2025-03-26 02:02:46.555 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:02:46.556 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:02:46.558 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 30.9947ms
2025-03-26 02:02:46.561 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/126 application/json - - 200 - application/json;+charset=utf-8 86.3992ms
2025-03-26 02:02:46.563 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:02:46.565 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 97.2124ms
2025-03-26 02:02:46.573 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:02:46.576 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.584 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.587 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:02:46.588 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:46.606 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:46.617 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:46.624 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:02:46.628 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 31.3335ms
2025-03-26 02:02:46.630 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:02:46.631 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 58.1388ms
2025-03-26 02:02:46.728 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/126 - -
2025-03-26 02:02:46.729 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.731 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/126 - - - 204 - - 2.3552ms
2025-03-26 02:02:46.733 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/126 application/json -
2025-03-26 02:02:46.734 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.735 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:02:46.736 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.741 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:02:46.745 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.747 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.7871ms
2025-03-26 02:02:46.748 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:02:46.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/126 application/json -
2025-03-26 02:02:46.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/126 application/json - - 200 - application/json;+charset=utf-8 16.1420ms
2025-03-26 02:02:46.750 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.752 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:02:46.753 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:46.762 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:02:46.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.769 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 11.9997ms
2025-03-26 02:02:46.770 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:02:46.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/126 application/json - - 200 - application/json;+charset=utf-8 23.2820ms
2025-03-26 02:02:46.864 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:02:46.866 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.867 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.875 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.877 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:46.878 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:46.884 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:46.910 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 29.7575ms
2025-03-26 02:02:46.925 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:46.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 62.6000ms
2025-03-26 02:02:46.964 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:02:46.966 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.967 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.2211ms
2025-03-26 02:02:46.981 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:02:46.985 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:46.986 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:46.997 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:46'.
2025-03-26 02:02:46.999 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:47.001 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:47.010 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:47.015 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:47.016 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.9131ms
2025-03-26 02:02:47.018 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:47.019 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.5488ms
2025-03-26 02:02:47.022 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:02:47.023 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:47.026 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:47.033 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:47'.
2025-03-26 02:02:47.034 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:47.035 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:47.040 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:47.042 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.664ms
2025-03-26 02:02:47.043 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:02:47.044 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.1734ms
2025-03-26 02:02:47.059 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:02:47.060 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:47.061 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:02:47.065 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:02:47'.
2025-03-26 02:02:47.066 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:47.067 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:02:47.075 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:02:47.078 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:47.079 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.1545ms
2025-03-26 02:02:47.081 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:02:47.082 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 22.9079ms
2025-03-26 02:02:50.507 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/126 - -
2025-03-26 02:02:50.509 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:50.510 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/126 - - - 204 - - 2.8965ms
2025-03-26 02:02:50.519 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/126 application/json 103
2025-03-26 02:02:50.520 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:50.521 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:02:50.522 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:50.529 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:02:50.536 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:02:50.543 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:02:50.546 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:50.547 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 23.0057ms
2025-03-26 02:02:50.548 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:02:50.549 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/126 application/json 103 - 200 - application/json;+charset=utf-8 36.2865ms
2025-03-26 02:02:57.946 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/126 - -
2025-03-26 02:02:57.948 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:57.949 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/126 - - - 204 - - 2.6240ms
2025-03-26 02:02:57.950 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/126 application/json 102
2025-03-26 02:02:57.951 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:02:57.952 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:02:57.955 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:02:57.985 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:02:58.007 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:02:58.012 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:02:58.015 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:02:58.016 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 58.3145ms
2025-03-26 02:02:58.017 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:02:58.018 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/126 application/json 102 - 200 - application/json;+charset=utf-8 68.4265ms
2025-03-26 02:03:53.596 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:03:53.598 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:03:53.599 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.6067ms
2025-03-26 02:03:53.602 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:03:53.603 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:03:53.606 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:03:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:03:53.611 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:03:53'.
2025-03-26 02:03:53.613 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:03:53.614 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:03:53.619 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:03:53.620 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.9797ms
2025-03-26 02:03:53.622 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:03:53.623 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.2648ms
2025-03-26 02:03:53.634 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:03:53.635 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:03:53.636 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9512ms
2025-03-26 02:03:53.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:03:53.639 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:03:53.641 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:03:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:03:53.645 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:03:53'.
2025-03-26 02:03:53.646 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:03:53.647 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:03:53.653 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:03:53.657 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:03:53.659 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.8244ms
2025-03-26 02:03:53.660 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:03:53.662 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.9340ms
2025-03-26 02:04:31.339 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:04:31.341 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:31.342 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.8371ms
2025-03-26 02:04:31.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:31.348 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:31.350 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:31.361 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:31'.
2025-03-26 02:04:31.362 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:31.364 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:31.370 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:31.371 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.9114ms
2025-03-26 02:04:31.373 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:31.374 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.7366ms
2025-03-26 02:04:31.392 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:04:31.392 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:31.395 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.1809ms
2025-03-26 02:04:31.396 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:31.397 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:31.398 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:31.405 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:31'.
2025-03-26 02:04:31.406 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:31.408 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:31.464 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:31.467 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:31.469 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 59.7818ms
2025-03-26 02:04:31.471 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:31.473 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 76.3240ms
2025-03-26 02:04:32.448 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:04:32.450 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:32.455 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:32'.
2025-03-26 02:04:32.456 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:04:32.457 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:32.462 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:32.664 +01:00 [ERR] Bd w CreateMapController.CreateMap
System.Exception: Moesz stworzy tylko 5 map na dzie. Wyczerpae limit.
   at JurMaps.Services.MapService.SaveMapAndReturnIdAsync(Int32 userId) in E:\jurmaps2\Services\MapService.cs:line 68
   at JurMaps.Controllers.CreateMapController.CreateMap(String authorizationHeader) in E:\jurmaps2\Controllers\CreateMapController.cs:line 75
2025-03-26 02:04:32.676 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:32.678 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 219.2128ms
2025-03-26 02:04:32.680 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:04:32.682 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 234.1139ms
2025-03-26 02:04:33.902 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:33.905 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:33.907 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:33.912 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
2025-03-26 02:04:33.913 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:33.915 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:33.922 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:33.923 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0455ms
2025-03-26 02:04:33.924 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:33.925 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.0485ms
2025-03-26 02:04:33.946 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:33.954 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:33.958 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:33.964 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
2025-03-26 02:04:33.967 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:33.968 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:33.976 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:33.979 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:33.980 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.6869ms
2025-03-26 02:04:33.981 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:33.982 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.4979ms
2025-03-26 02:04:33.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:33.986 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:33.988 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:33.997 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:33'.
2025-03-26 02:04:33.999 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:34.000 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:34.008 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:34.009 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.9283ms
2025-03-26 02:04:34.010 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:34.011 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.4528ms
2025-03-26 02:04:34.025 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:34.026 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:34.028 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:34.035 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
2025-03-26 02:04:34.036 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:34.037 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:34.054 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:34.060 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:34.062 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.7718ms
2025-03-26 02:04:34.064 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:34.066 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 41.1440ms
2025-03-26 02:04:34.078 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:34.080 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:34.083 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:34.087 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
2025-03-26 02:04:34.091 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:34.093 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:34.098 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:34.100 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3718ms
2025-03-26 02:04:34.101 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:34.102 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.6695ms
2025-03-26 02:04:34.111 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:34.112 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:34.113 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:34.117 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:34'.
2025-03-26 02:04:34.118 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:34.119 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:34.126 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:34.132 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:34.133 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.5077ms
2025-03-26 02:04:34.135 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:34.136 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.2721ms
2025-03-26 02:04:35.869 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 02:04:35.870 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:35.877 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:35'.
2025-03-26 02:04:35.877 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 02:04:35.884 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:35.890 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:35.891 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 5.6068ms
2025-03-26 02:04:35.892 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 02:04:35.894 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 24.6037ms
2025-03-26 02:04:37.626 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:04:37.627 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:37.628 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.6630ms
2025-03-26 02:04:37.631 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:37.632 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:37.633 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:37.639 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:37'.
2025-03-26 02:04:37.640 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:37.641 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:37.651 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:37.655 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.6379ms
2025-03-26 02:04:37.661 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:37.662 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.4886ms
2025-03-26 02:04:38.720 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:04:38.727 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:38.773 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:38'.
2025-03-26 02:04:38.774 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:38.775 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:38.781 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:38.787 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:38.790 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:38.791 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 13.9087ms
2025-03-26 02:04:38.792 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:38.793 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 73.1109ms
2025-03-26 02:04:38.798 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:04:38.801 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:38.817 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:38'.
2025-03-26 02:04:38.820 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:38.824 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:38.847 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:38.852 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:38.855 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:38.856 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 16.601ms
2025-03-26 02:04:38.858 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:38.860 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 61.3721ms
2025-03-26 02:04:38.994 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 02:04:38.997 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 02:04:38.999 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:38.999 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.000 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 6.1445ms
2025-03-26 02:04:39.001 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 3.9566ms
2025-03-26 02:04:39.002 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 02:04:39.005 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.006 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.011 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.026 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 02:04:39.029 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 02:04:39.031 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.033 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 6.6875ms
2025-03-26 02:04:39.032 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.035 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 5.7184ms
2025-03-26 02:04:39.048 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 02:04:39.053 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 02:04:39.065 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.070 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.071 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 02:04:39.071 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:04:39.072 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.079 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.084 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.084 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.106 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 87.5437ms
2025-03-26 02:04:39.115 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 02:04:39.144 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.121 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:39.167 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 02:04:39.221 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:04:39.231 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.231 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 228.4168ms
2025-03-26 02:04:39.233 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.237 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.244 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 158.844ms
2025-03-26 02:04:39.247 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.248 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.239 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.250 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 02:04:39.255 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:04:39.260 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.263 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 215.3184ms
2025-03-26 02:04:39.267 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.261 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.262 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 40.6157ms
2025-03-26 02:04:39.269 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:39.270 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:39.278 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 184.8777ms
2025-03-26 02:04:39.284 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.286 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.298 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.298 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:04:39.300 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.306 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 253.0874ms
2025-03-26 02:04:39.308 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.309 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.319 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.322 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 18.003ms
2025-03-26 02:04:39.326 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 44.4206ms
2025-03-26 02:04:39.327 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 02:04:39.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:39.328 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:39.330 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:39.331 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:04:39.334 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.335 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.335 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.341 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.336 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 215.9251ms
2025-03-26 02:04:39.342 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 02:04:39.340 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 12.6612ms
2025-03-26 02:04:39.339 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 171.4276ms
2025-03-26 02:04:39.351 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:39.355 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.358 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.364 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.364 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:39.369 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 25.9531ms
2025-03-26 02:04:39.367 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.372 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:39.374 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.375 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:39.390 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.389 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.394 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 126.0912ms
2025-03-26 02:04:39.390 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 02:04:39.395 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.396 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:04:39.396 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.398 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.416 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.418 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 25.9005ms
2025-03-26 02:04:39.420 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:39.421 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.422 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:39.423 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:39.434 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:39'.
2025-03-26 02:04:39.438 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.439 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 113.1119ms
2025-03-26 02:04:39.440 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:04:39.445 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:39.450 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:39.454 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.457 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.146ms
2025-03-26 02:04:39.459 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:39.459 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:39.459 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:39.460 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 87.8576ms
2025-03-26 02:04:39.462 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 24.8335ms
2025-03-26 02:04:39.463 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 14.8235ms
2025-03-26 02:04:39.465 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:04:39.466 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:04:39.467 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 125.2079ms
2025-03-26 02:04:39.469 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 78.3791ms
2025-03-26 02:04:39.482 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 02:04:39.483 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.484 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 02:04:39.485 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 2.4695ms
2025-03-26 02:04:39.486 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.487 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 02:04:39.487 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 3.5560ms
2025-03-26 02:04:39.488 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 02:04:39.490 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 02:04:39.491 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:39.492 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 02:04:39.495 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.496 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:39.503 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:39.507 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 02:04:39.510 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:39.511 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:39.513 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 15.5507ms
2025-03-26 02:04:39.514 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 14.6167ms
2025-03-26 02:04:39.514 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 02:04:39.515 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 02:04:39.516 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 29.1895ms
2025-03-26 02:04:39.517 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 28.0343ms
2025-03-26 02:04:43.264 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/122 - -
2025-03-26 02:04:43.264 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:43.265 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/122 - - - 204 - - 1.1851ms
2025-03-26 02:04:43.266 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/122 application/json -
2025-03-26 02:04:43.267 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:43.267 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:43.271 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:43.299 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-03-26 02:04:43.318 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:04:43.328 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 02:04:43.342 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:43.357 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:04:43.360 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:43.362 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 88.7168ms
2025-03-26 02:04:43.363 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:43.364 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/122 application/json - - 200 - application/json;+charset=utf-8 97.8923ms
2025-03-26 02:04:44.711 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/123 - -
2025-03-26 02:04:44.711 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:44.712 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/123 - - - 204 - - 1.3281ms
2025-03-26 02:04:44.713 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/123 application/json -
2025-03-26 02:04:44.714 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:44.715 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:44.715 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:44.722 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:04:44.728 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:44.733 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:04:44.737 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:44.738 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 21.3613ms
2025-03-26 02:04:44.739 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:44.740 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/123 application/json - - 200 - application/json;+charset=utf-8 26.7933ms
2025-03-26 02:04:45.949 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/124 - -
2025-03-26 02:04:45.950 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:45.950 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/124 - - - 204 - - 1.6098ms
2025-03-26 02:04:45.952 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/124 application/json -
2025-03-26 02:04:45.952 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:45.953 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:45.954 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:45.966 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:04:45.970 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 02:04:45.973 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:45.991 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:04:45.993 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:45.994 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 39.0048ms
2025-03-26 02:04:45.995 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:45.996 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/124 application/json - - 200 - application/json;+charset=utf-8 44.3946ms
2025-03-26 02:04:47.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/125 - -
2025-03-26 02:04:47.165 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:47.166 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/125 - - - 204 - - 2.1470ms
2025-03-26 02:04:47.167 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/125 application/json -
2025-03-26 02:04:47.168 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:47.168 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:47.169 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:47.175 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:04:47.180 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 02:04:47.184 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:47.199 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:04:47.202 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:47.203 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 32.3813ms
2025-03-26 02:04:47.204 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:47.205 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/125 application/json - - 200 - application/json;+charset=utf-8 38.3671ms
2025-03-26 02:04:48.347 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/126 - -
2025-03-26 02:04:48.347 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:48.348 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/126 - - - 204 - - 1.2589ms
2025-03-26 02:04:48.349 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/126 application/json -
2025-03-26 02:04:48.350 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:48.350 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:48.351 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:04:48.357 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:04:48.377 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-26 02:04:48.389 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:48.409 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:04:48.418 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:48.426 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 73.56ms
2025-03-26 02:04:48.427 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:04:48.428 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/126 application/json - - 200 - application/json;+charset=utf-8 79.2831ms
2025-03-26 02:04:49.615 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:04:49.617 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:49.619 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.2694ms
2025-03-26 02:04:49.622 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:49.624 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:49.626 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:49.638 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:49'.
2025-03-26 02:04:49.639 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:49.640 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:49.645 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:49.646 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.0639ms
2025-03-26 02:04:49.647 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:49.649 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.8412ms
2025-03-26 02:04:49.650 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:04:49.652 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:49.653 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.8233ms
2025-03-26 02:04:49.655 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:49.655 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:49.657 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:49.662 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:49'.
2025-03-26 02:04:49.664 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:49.665 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:49.673 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:49.676 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:49.678 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.4618ms
2025-03-26 02:04:49.679 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:49.680 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.2287ms
2025-03-26 02:04:50.023 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:04:50.024 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.030 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.031 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:04:50.032 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.039 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.044 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:04:50.047 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.049 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 14.4028ms
2025-03-26 02:04:50.050 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:04:50.051 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 27.6199ms
2025-03-26 02:04:50.137 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json -
2025-03-26 02:04:50.140 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.153 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.154 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.155 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.162 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:04:50.165 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.168 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 10.6249ms
2025-03-26 02:04:50.169 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.171 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json - - 200 - application/json;+charset=utf-8 34.1621ms
2025-03-26 02:04:50.185 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:50.189 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.190 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json -
2025-03-26 02:04:50.190 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.191 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.196 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.203 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.204 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.207 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.208 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.209 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.214 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.216 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0784ms
2025-03-26 02:04:50.217 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.221 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:04:50.221 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.1541ms
2025-03-26 02:04:50.225 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.228 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.2597ms
2025-03-26 02:04:50.230 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.231 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json - - 200 - application/json;+charset=utf-8 41.2899ms
2025-03-26 02:04:50.235 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:04:50.236 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.243 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json -
2025-03-26 02:04:50.248 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.250 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.250 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:50.262 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.263 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.264 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.270 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.276 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.305 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:04:50.312 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.319 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.324 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:50.325 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 46.6033ms
2025-03-26 02:04:50.327 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 59.4984ms
2025-03-26 02:04:50.328 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:04:50.329 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:50.331 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/127 application/json - - 200 - application/json;+charset=utf-8 86.9565ms
2025-03-26 02:04:50.333 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 98.3454ms
2025-03-26 02:04:50.339 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:04:50.341 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.349 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.352 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:50.356 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.368 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.378 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.384 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:04:50.387 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 26.7726ms
2025-03-26 02:04:50.388 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:04:50.389 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 50.0865ms
2025-03-26 02:04:50.469 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/127 - -
2025-03-26 02:04:50.470 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.471 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/127 - - - 204 - - 1.7540ms
2025-03-26 02:04:50.473 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/127 application/json -
2025-03-26 02:04:50.474 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.475 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:04:50.477 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.482 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:04:50.487 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.488 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.0942ms
2025-03-26 02:04:50.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/127 application/json -
2025-03-26 02:04:50.489 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:04:50.491 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.492 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/127 application/json - - 200 - application/json;+charset=utf-8 19.2149ms
2025-03-26 02:04:50.493 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:04:50.494 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:50.501 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:04:50.504 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.506 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.3802ms
2025-03-26 02:04:50.507 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:04:50.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/127 application/json - - 200 - application/json;+charset=utf-8 18.7488ms
2025-03-26 02:04:50.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:50.598 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.600 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.635 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.643 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.645 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.653 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.655 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2921ms
2025-03-26 02:04:50.659 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.661 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 63.7456ms
2025-03-26 02:04:50.695 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:50.697 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.699 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.715 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.716 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:50.717 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.729 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.733 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.735 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.5019ms
2025-03-26 02:04:50.737 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:50.738 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.6077ms
2025-03-26 02:04:50.747 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:04:50.748 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.749 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.756 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.757 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.758 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.763 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.766 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.1628ms
2025-03-26 02:04:50.769 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:04:50.771 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.9673ms
2025-03-26 02:04:50.785 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:04:50.785 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:50.787 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:04:50.794 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:04:50'.
2025-03-26 02:04:50.796 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:50.797 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:04:50.805 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:04:50.809 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:50.811 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.2333ms
2025-03-26 02:04:50.812 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:04:50.813 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 28.4091ms
2025-03-26 02:04:53.848 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/127 - -
2025-03-26 02:04:53.849 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:53.849 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/127 - - - 204 - - 1.3437ms
2025-03-26 02:04:53.850 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/127 application/json 101
2025-03-26 02:04:53.851 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:04:53.851 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:04:53.852 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:04:53.857 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:04:53.863 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:04:53.866 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:04:53.868 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:04:53.869 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.2921ms
2025-03-26 02:04:53.870 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:04:53.871 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/127 application/json 101 - 200 - application/json;+charset=utf-8 21.3293ms
2025-03-26 02:05:19.618 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:05:19.620 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:19.624 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 6.1504ms
2025-03-26 02:05:19.631 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:19.635 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:19.648 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:19.672 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:19'.
2025-03-26 02:05:19.675 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:19.677 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:19.682 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:19.684 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0016ms
2025-03-26 02:05:19.686 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:19.688 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 57.0864ms
2025-03-26 02:05:19.707 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:05:19.708 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:19.709 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.6763ms
2025-03-26 02:05:19.714 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:19.716 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:19.721 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:19'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:19.737 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:19'.
2025-03-26 02:05:19.740 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:19.742 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:19.755 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:19.762 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:19.766 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 19.9743ms
2025-03-26 02:05:19.768 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:19.770 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 55.5830ms
2025-03-26 02:05:20.053 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:20.055 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:20.057 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:20.076 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:20'.
2025-03-26 02:05:20.083 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:20.090 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:20.103 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:20.107 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.6637ms
2025-03-26 02:05:20.108 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:20.110 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 56.4285ms
2025-03-26 02:05:20.124 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:20.125 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:20.126 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:20.132 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:20'.
2025-03-26 02:05:20.133 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:20.136 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:20.143 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:20.147 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:20.149 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.8929ms
2025-03-26 02:05:20.151 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:20.152 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.9910ms
2025-03-26 02:05:31.059 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/127 - -
2025-03-26 02:05:31.060 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:31.061 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/127 - - - 204 - - 1.4430ms
2025-03-26 02:05:31.062 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/127 application/json 102
2025-03-26 02:05:31.062 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:31.063 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:05:31.063 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:31.071 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:05:31.075 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:05:31.078 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:05:31.081 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:31.082 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.4861ms
2025-03-26 02:05:31.083 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:05:31.083 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/127 application/json 102 - 200 - application/json;+charset=utf-8 21.8352ms
2025-03-26 02:05:44.000 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:05:44.002 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:44.004 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.9311ms
2025-03-26 02:05:44.006 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:44.008 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:44.009 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:44.013 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:44'.
2025-03-26 02:05:44.014 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:44.015 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:44.020 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:44.022 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2149ms
2025-03-26 02:05:44.024 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:44.024 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.2108ms
2025-03-26 02:05:44.041 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:05:44.042 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:44.043 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8947ms
2025-03-26 02:05:44.045 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:44.046 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:44.047 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:44.054 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:44'.
2025-03-26 02:05:44.055 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:44.057 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:44.065 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:44.071 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:44.075 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.832ms
2025-03-26 02:05:44.076 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:44.077 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 32.2331ms
2025-03-26 02:05:46.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:46.941 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:46.942 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:46.950 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:46'.
2025-03-26 02:05:46.952 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:46.954 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:46.957 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:46.959 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.6974ms
2025-03-26 02:05:46.960 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:46.961 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 26.9490ms
2025-03-26 02:05:46.971 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:46.972 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:46.973 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:46.977 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:46'.
2025-03-26 02:05:46.978 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:46.979 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:46.984 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:46.988 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:46.989 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.3766ms
2025-03-26 02:05:46.990 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:46.991 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 19.5874ms
2025-03-26 02:05:47.815 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:05:47.816 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:47.819 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:47'.
2025-03-26 02:05:47.820 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:47.821 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:47.826 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:47.830 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:47.833 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:05:47.834 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 11.6981ms
2025-03-26 02:05:47.835 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:47.836 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 20.8900ms
2025-03-26 02:05:47.840 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:05:47.841 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:47.844 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:47'.
2025-03-26 02:05:47.845 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:47.846 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:47.851 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:47.856 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:47.858 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:05:47.859 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 11.6779ms
2025-03-26 02:05:47.860 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:47.860 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 20.1033ms
2025-03-26 02:05:48.980 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:48.981 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:48.989 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:49.017 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:48'.
2025-03-26 02:05:49.019 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:49.019 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:49.024 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:49.025 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.1223ms
2025-03-26 02:05:49.027 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:49.031 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 51.4468ms
2025-03-26 02:05:49.044 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:49.045 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:49.047 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:49.053 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
2025-03-26 02:05:49.054 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:49.056 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:49.067 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:49.077 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:49.080 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 22.4772ms
2025-03-26 02:05:49.082 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:49.086 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 42.0968ms
2025-03-26 02:05:49.159 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:05:49.164 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:49.166 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 6.2158ms
2025-03-26 02:05:49.171 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:49.175 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:49.177 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:49.191 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
2025-03-26 02:05:49.194 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:49.196 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:49.202 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:49.204 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1076ms
2025-03-26 02:05:49.208 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:05:49.208 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:49.209 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:49.210 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 38.2037ms
2025-03-26 02:05:49.210 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.7383ms
2025-03-26 02:05:49.215 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:49.217 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:49.219 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:49.259 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
2025-03-26 02:05:49.261 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:49.263 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:49.277 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:49.282 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:49.284 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.3964ms
2025-03-26 02:05:49.284 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:49.287 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 71.1921ms
2025-03-26 02:05:49.748 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:05:49.750 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:49.756 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
2025-03-26 02:05:49.757 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:05:49.757 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:49.765 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:49.858 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:05:49.861 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:49.864 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 104.3569ms
2025-03-26 02:05:49.865 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:05:49.867 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 118.4124ms
2025-03-26 02:05:49.971 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json -
2025-03-26 02:05:49.996 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.004 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:49'.
2025-03-26 02:05:50.005 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.009 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:50.019 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:05:50.024 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.026 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.9445ms
2025-03-26 02:05:50.029 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json -
2025-03-26 02:05:50.032 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:50.032 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.034 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.034 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:50.035 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json - - 200 - application/json;+charset=utf-8 64.3474ms
2025-03-26 02:05:50.045 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.046 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.047 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.061 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.061 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:50.062 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:50.068 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:50.076 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:05:50.079 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.083 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.7443ms
2025-03-26 02:05:50.082 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.086 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:50.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 55.7330ms
2025-03-26 02:05:50.087 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 20.0535ms
2025-03-26 02:05:50.092 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.094 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json - - 200 - application/json;+charset=utf-8 65.2471ms
2025-03-26 02:05:50.094 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:05:50.096 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.107 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json -
2025-03-26 02:05:50.112 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.114 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.119 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.120 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:50.121 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.123 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:50.123 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:50.144 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:50.154 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:05:50.165 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:50.165 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.173 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:05:50.175 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 45.5866ms
2025-03-26 02:05:50.178 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 50.2335ms
2025-03-26 02:05:50.179 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:05:50.181 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:50.183 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/128 application/json - - 200 - application/json;+charset=utf-8 76.2078ms
2025-03-26 02:05:50.185 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 90.7009ms
2025-03-26 02:05:50.199 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:05:50.202 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.236 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.247 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:50.249 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:50.261 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:50.274 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:50.280 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:05:50.282 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 27.39ms
2025-03-26 02:05:50.284 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:05:50.285 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 86.4755ms
2025-03-26 02:05:50.640 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/128 - -
2025-03-26 02:05:50.642 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:50.643 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/128 - - - 204 - - 2.6824ms
2025-03-26 02:05:50.645 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/128 application/json -
2025-03-26 02:05:50.647 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:50.648 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:05:50.649 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:50.661 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:05:50.666 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.669 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 14.0096ms
2025-03-26 02:05:50.671 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/128 application/json -
2025-03-26 02:05:50.672 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:05:50.672 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:50.673 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/128 application/json - - 200 - application/json;+charset=utf-8 27.9894ms
2025-03-26 02:05:50.676 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:05:50.681 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:50.692 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:05:50.695 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.697 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 13.356ms
2025-03-26 02:05:50.699 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:05:50.700 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/128 application/json - - 200 - application/json;+charset=utf-8 28.9678ms
2025-03-26 02:05:50.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:50.896 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:50.908 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:50.926 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:50'.
2025-03-26 02:05:50.927 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:50.928 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:50.933 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:50.934 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5718ms
2025-03-26 02:05:50.936 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:50.937 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 42.6921ms
2025-03-26 02:05:51.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:51.018 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:51.022 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:51.032 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
2025-03-26 02:05:51.033 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:51.034 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:51.044 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:51.048 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:51.049 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.0482ms
2025-03-26 02:05:51.051 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:51.052 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 35.7235ms
2025-03-26 02:05:51.055 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:05:51.057 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:51.060 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:51.069 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
2025-03-26 02:05:51.072 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:51.073 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:51.082 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:51.084 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5848ms
2025-03-26 02:05:51.086 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:05:51.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.4851ms
2025-03-26 02:05:51.098 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:05:51.099 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:51.101 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:05:51.109 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:05:51'.
2025-03-26 02:05:51.113 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:51.115 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:05:51.126 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:05:51.131 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:51.134 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.4531ms
2025-03-26 02:05:51.135 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:05:51.136 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 37.9099ms
2025-03-26 02:05:52.939 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/128 - -
2025-03-26 02:05:52.940 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:52.940 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/128 - - - 204 - - 1.5844ms
2025-03-26 02:05:52.942 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/128 application/json 103
2025-03-26 02:05:52.942 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:05:52.943 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:05:52.943 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:05:52.949 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:05:52.955 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:05:52.958 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:05:52.960 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:05:52.961 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.6849ms
2025-03-26 02:05:52.962 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:05:52.963 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/128 application/json 103 - 200 - application/json;+charset=utf-8 21.7621ms
2025-03-26 02:07:16.202 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:07:16.205 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:07:16.206 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 4.0507ms
2025-03-26 02:07:16.209 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:07:16.213 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:07:16.216 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:07:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:07:16.227 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:07:16'.
2025-03-26 02:07:16.228 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:07:16.229 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:07:16.235 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:07:16.237 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.176ms
2025-03-26 02:07:16.240 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:07:16.242 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 32.4207ms
2025-03-26 02:07:16.254 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:07:16.255 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:07:16.256 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.9144ms
2025-03-26 02:07:16.258 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:07:16.259 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:07:16.259 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:07:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:07:16.265 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:07:16'.
2025-03-26 02:07:16.267 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:07:16.269 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:07:16.282 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:07:16.284 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:07:16.286 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.6392ms
2025-03-26 02:07:16.287 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:07:16.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 31.4492ms
2025-03-26 02:10:17.159 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:10:17.160 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:10:17.162 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.5219ms
2025-03-26 02:10:17.165 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:10:17.167 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:10:17.169 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:10:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:10:17.180 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:10:17'.
2025-03-26 02:10:17.182 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:10:17.184 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:10:17.189 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:10:17.190 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.3889ms
2025-03-26 02:10:17.192 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:10:17.193 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 28.6960ms
2025-03-26 02:10:17.211 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:10:17.212 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:10:17.214 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.8477ms
2025-03-26 02:10:17.216 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:10:17.217 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:10:17.219 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:10:17'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:10:17.224 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:10:17'.
2025-03-26 02:10:17.225 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:10:17.226 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:10:17.282 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:10:17.285 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:10:17.286 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 58.9525ms
2025-03-26 02:10:17.287 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:10:17.288 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 72.1664ms
2025-03-26 02:11:47.799 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:11:47.800 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:11:47.802 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.7708ms
2025-03-26 02:11:47.805 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:11:47.806 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:11:47.808 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:11:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:11:47.825 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:11:47'.
2025-03-26 02:11:47.827 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:11:47.828 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:11:47.834 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:11:47.837 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3218ms
2025-03-26 02:11:47.839 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:11:47.841 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.3597ms
2025-03-26 02:11:47.857 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:11:47.858 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:11:47.859 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.7657ms
2025-03-26 02:11:47.861 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:11:47.862 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:11:47.863 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:11:47'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:11:47.874 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:11:47'.
2025-03-26 02:11:47.876 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:11:47.878 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:11:47.886 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:11:47.893 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:11:47.894 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.7289ms
2025-03-26 02:11:47.896 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:11:47.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.5495ms
2025-03-26 02:12:43.381 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:12:43.382 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.386 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.388 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:12:43.389 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:43.395 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:43.401 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:12:43.404 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:43.405 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 14.6228ms
2025-03-26 02:12:43.406 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:12:43.407 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 26.1678ms
2025-03-26 02:12:43.494 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json -
2025-03-26 02:12:43.496 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.504 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.505 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.508 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:43.523 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:12:43.531 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:43.534 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 22.1631ms
2025-03-26 02:12:43.536 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.538 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json - - 200 - application/json;+charset=utf-8 44.0600ms
2025-03-26 02:12:43.575 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:12:43.577 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:43.578 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0959ms
2025-03-26 02:12:43.581 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:12:43.583 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:43.585 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.598 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.600 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:43.601 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json -
2025-03-26 02:12:43.601 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:43.603 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.609 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:43.647 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.663 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 57.3344ms
2025-03-26 02:12:43.668 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.669 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:43.675 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:43.676 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 95.0590ms
2025-03-26 02:12:43.710 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:12:43.716 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:43.724 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json -
2025-03-26 02:12:43.724 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:12:43.730 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 45.1288ms
2025-03-26 02:12:43.739 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.740 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.742 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.753 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.768 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.769 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json - - 200 - application/json;+charset=utf-8 168.0167ms
2025-03-26 02:12:43.771 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.773 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:12:43.777 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:43.779 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:43.787 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:12:43.798 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:43.808 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 26.868ms
2025-03-26 02:12:43.815 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:12:43.816 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/129 application/json - - 200 - application/json;+charset=utf-8 91.7846ms
2025-03-26 02:12:43.858 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:43.864 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:43.868 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:12:43.870 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 87.1091ms
2025-03-26 02:12:43.871 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:12:43.872 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 147.6400ms
2025-03-26 02:12:43.879 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:12:43.881 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:43.886 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:43'.
2025-03-26 02:12:43.888 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:12:43.889 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:43.898 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:43.904 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:43.908 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:12:43.910 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 19.4737ms
2025-03-26 02:12:43.911 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:12:43.912 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 33.2322ms
2025-03-26 02:12:43.990 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/129 - -
2025-03-26 02:12:43.991 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:43.992 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/129 - - - 204 - - 2.0317ms
2025-03-26 02:12:43.994 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/129 application/json -
2025-03-26 02:12:43.995 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:43.995 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:12:43.996 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:44.013 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:12:44.016 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.017 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 18.6202ms
2025-03-26 02:12:44.019 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/129 application/json -
2025-03-26 02:12:44.019 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:12:44.020 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.021 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/129 application/json - - 200 - application/json;+charset=utf-8 27.3137ms
2025-03-26 02:12:44.022 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:12:44.023 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:44.037 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:12:44.041 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.042 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 17.3827ms
2025-03-26 02:12:44.043 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:12:44.045 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/129 application/json - - 200 - application/json;+charset=utf-8 26.4068ms
2025-03-26 02:12:44.131 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:12:44.132 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.134 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:44.144 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
2025-03-26 02:12:44.146 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:44.148 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:44.155 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.157 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.6664ms
2025-03-26 02:12:44.160 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:44.160 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.7838ms
2025-03-26 02:12:44.223 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:12:44.225 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.226 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.7530ms
2025-03-26 02:12:44.229 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:12:44.231 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.232 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:44.240 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
2025-03-26 02:12:44.241 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:12:44.242 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:44.251 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:44.254 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.256 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.568ms
2025-03-26 02:12:44.257 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:12:44.258 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.0602ms
2025-03-26 02:12:44.263 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:12:44.265 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.267 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:44.273 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
2025-03-26 02:12:44.274 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:44.275 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:44.280 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.281 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.6805ms
2025-03-26 02:12:44.282 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:12:44.284 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 21.3122ms
2025-03-26 02:12:44.301 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:12:44.302 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:44.303 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:12:44.308 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:12:44'.
2025-03-26 02:12:44.310 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:12:44.310 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:12:44.317 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:12:44.322 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:44.323 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.6774ms
2025-03-26 02:12:44.324 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:12:44.325 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.2954ms
2025-03-26 02:12:46.947 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/129 - -
2025-03-26 02:12:46.948 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:46.949 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/129 - - - 204 - - 1.3001ms
2025-03-26 02:12:46.950 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/129 application/json 102
2025-03-26 02:12:46.950 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:46.951 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:12:46.952 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:46.956 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:12:46.962 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:12:46.965 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:12:46.967 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:46.968 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 15.281ms
2025-03-26 02:12:46.969 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:12:46.970 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/129 application/json 102 - 200 - application/json;+charset=utf-8 20.4994ms
2025-03-26 02:12:50.830 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/129 application/json 102
2025-03-26 02:12:50.830 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:12:50.831 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:12:50.832 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:12:50.837 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:12:50.843 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:12:50.846 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:12:50.848 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:12:50.851 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 17.2494ms
2025-03-26 02:12:50.854 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:12:50.856 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/129 application/json 102 - 200 - application/json;+charset=utf-8 26.2715ms
2025-03-26 02:13:27.439 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:13:27.440 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:27.444 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 5.6333ms
2025-03-26 02:13:27.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:13:27.450 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:27.453 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:27.462 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:27'.
2025-03-26 02:13:27.464 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:27.465 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:27.470 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:27.471 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2858ms
2025-03-26 02:13:27.473 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:27.474 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.4464ms
2025-03-26 02:13:27.480 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:13:27.481 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:27.482 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8867ms
2025-03-26 02:13:27.484 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:13:27.484 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:27.485 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:27'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:27.490 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:27'.
2025-03-26 02:13:27.492 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:27.493 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:27.502 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:27.505 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:27.507 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.4073ms
2025-03-26 02:13:27.508 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:27.509 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.7774ms
2025-03-26 02:13:37.878 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:13:37.879 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:37.880 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.1947ms
2025-03-26 02:13:37.882 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:13:37.883 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:37.884 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:37.889 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:37'.
2025-03-26 02:13:37.891 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:37.893 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:37.897 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:37.899 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4178ms
2025-03-26 02:13:37.901 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:37.901 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.6456ms
2025-03-26 02:13:37.927 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:13:37.928 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:37.929 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.1406ms
2025-03-26 02:13:37.930 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:13:37.931 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:37.932 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:37.938 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:37'.
2025-03-26 02:13:37.939 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:37.940 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:37.947 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:37.951 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:37.952 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.9562ms
2025-03-26 02:13:37.953 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:37.954 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.9374ms
2025-03-26 02:13:39.900 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:13:39.901 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:39.905 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:39'.
2025-03-26 02:13:39.906 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:13:39.907 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:39.913 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:39.918 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:13:39.921 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:39.923 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 14.1523ms
2025-03-26 02:13:39.924 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:13:39.925 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 24.5201ms
2025-03-26 02:13:40.061 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json -
2025-03-26 02:13:40.075 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.138 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.140 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.144 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:40.203 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:13:40.203 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:13:40.204 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json -
2025-03-26 02:13:40.206 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.214 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.215 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.217 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.219 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 71.2228ms
2025-03-26 02:13:40.228 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.236 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.242 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:13:40.249 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json -
2025-03-26 02:13:40.250 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.251 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.249 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.253 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.255 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.255 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:40.256 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.257 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json - - 200 - application/json;+charset=utf-8 195.7720ms
2025-03-26 02:13:40.271 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.265 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.282 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:13:40.292 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.292 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.293 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:13:40.297 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.298 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:40.299 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 24.1564ms
2025-03-26 02:13:40.301 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.307 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.311 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:13:40.316 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 113.1377ms
2025-03-26 02:13:40.304 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 31.3575ms
2025-03-26 02:13:40.319 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.323 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.325 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.336 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json - - 200 - application/json;+charset=utf-8 131.3380ms
2025-03-26 02:13:40.334 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 28.3316ms
2025-03-26 02:13:40.333 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.340 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:13:40.346 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:13:40.347 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/130 application/json - - 200 - application/json;+charset=utf-8 98.1394ms
2025-03-26 02:13:40.349 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 36.988ms
2025-03-26 02:13:40.353 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:13:40.354 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 112.5110ms
2025-03-26 02:13:40.361 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:13:40.365 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.370 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.374 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:13:40.375 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.389 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.411 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.420 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:13:40.421 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 43.6833ms
2025-03-26 02:13:40.431 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:13:40.432 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 70.8063ms
2025-03-26 02:13:40.559 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/130 - -
2025-03-26 02:13:40.561 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.562 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/130 - - - 204 - - 3.1005ms
2025-03-26 02:13:40.566 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/130 application/json -
2025-03-26 02:13:40.567 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.567 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:13:40.569 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:40.583 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:13:40.590 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.592 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.3599ms
2025-03-26 02:13:40.595 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:13:40.597 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/130 application/json - - 200 - application/json;+charset=utf-8 31.6176ms
2025-03-26 02:13:40.602 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/130 application/json -
2025-03-26 02:13:40.603 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.604 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:13:40.604 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:40.611 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:13:40.619 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.624 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 18.0274ms
2025-03-26 02:13:40.634 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:13:40.646 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/130 application/json - - 200 - application/json;+charset=utf-8 44.0210ms
2025-03-26 02:13:40.699 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:13:40.709 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.712 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.720 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.722 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.724 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.732 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.737 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 9.1602ms
2025-03-26 02:13:40.739 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.742 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 43.0269ms
2025-03-26 02:13:40.808 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:13:40.811 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.837 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.845 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.848 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:40.849 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.860 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.864 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.866 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 11.8745ms
2025-03-26 02:13:40.868 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:13:40.868 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:40.870 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.872 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 63.7005ms
2025-03-26 02:13:40.874 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.881 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.882 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.885 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.898 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.902 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.3872ms
2025-03-26 02:13:40.906 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:13:40.907 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 39.1550ms
2025-03-26 02:13:40.924 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:13:40.929 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:40.938 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:13:40.946 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:13:40'.
2025-03-26 02:13:40.950 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:40.955 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:13:40.962 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:13:40.967 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:40.970 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.3444ms
2025-03-26 02:13:40.973 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:13:40.974 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 49.8403ms
2025-03-26 02:13:43.704 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/130 - -
2025-03-26 02:13:43.705 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:43.705 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/130 - - - 204 - - 1.7048ms
2025-03-26 02:13:43.707 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/130 application/json 102
2025-03-26 02:13:43.707 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:13:43.708 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:13:43.708 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:13:43.714 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:13:43.720 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:13:43.723 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:13:43.726 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:13:43.727 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.8676ms
2025-03-26 02:13:43.728 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:13:43.728 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/130 application/json 102 - 200 - application/json;+charset=utf-8 21.9129ms
2025-03-26 02:17:57.388 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:17:57.390 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:57.401 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 12.4916ms
2025-03-26 02:17:57.408 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:17:57.411 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:57.412 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:57.418 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:57'.
2025-03-26 02:17:57.421 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:57.423 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:57.431 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:57.431 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:17:57.438 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 12.4476ms
2025-03-26 02:17:57.439 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:57.441 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:57.443 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 11.6673ms
2025-03-26 02:17:57.444 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 36.5730ms
2025-03-26 02:17:57.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:17:57.449 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:57.450 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:57.456 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:57'.
2025-03-26 02:17:57.460 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:57.463 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:57.548 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:57.554 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:57.557 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 91.3528ms
2025-03-26 02:17:57.560 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:57.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 114.8419ms
2025-03-26 02:17:58.505 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:17:58.506 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.511 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.512 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:17:58.513 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:58.519 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:58.525 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:17:58.527 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:58.528 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 13.6755ms
2025-03-26 02:17:58.530 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:17:58.531 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 25.5975ms
2025-03-26 02:17:58.690 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json -
2025-03-26 02:17:58.698 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.717 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.721 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:58.729 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:58.749 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:17:58.756 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:58.758 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 22.449ms
2025-03-26 02:17:58.759 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:58.761 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json - - 200 - application/json;+charset=utf-8 71.4729ms
2025-03-26 02:17:58.769 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:17:58.770 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:58.777 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.786 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.789 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:58.791 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:58.792 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json -
2025-03-26 02:17:58.798 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.799 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:58.813 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.815 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 18.9824ms
2025-03-26 02:17:58.819 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:58.820 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:58.821 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:58.823 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 54.4335ms
2025-03-26 02:17:58.847 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:17:58.859 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:58.860 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 22.5855ms
2025-03-26 02:17:58.862 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:58.865 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json - - 200 - application/json;+charset=utf-8 72.4028ms
2025-03-26 02:17:58.874 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:17:58.875 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json -
2025-03-26 02:17:58.877 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.878 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.882 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.890 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.892 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:17:58.894 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:58.895 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:58.896 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:58.905 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:58.913 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:58.917 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:17:58.919 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 21.3486ms
2025-03-26 02:17:58.920 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:17:58.921 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 46.9742ms
2025-03-26 02:17:58.930 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:17:58.949 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:58.955 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:58'.
2025-03-26 02:17:58.957 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:17:58.958 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:58.965 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:58.974 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:58.980 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:17:58.987 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 27.4501ms
2025-03-26 02:17:58.993 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:17:58.994 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 63.8237ms
2025-03-26 02:17:58.994 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:17:59.004 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.006 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 102.4707ms
2025-03-26 02:17:59.007 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:17:59.009 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/131 application/json - - 200 - application/json;+charset=utf-8 133.2766ms
2025-03-26 02:17:59.098 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/131 - -
2025-03-26 02:17:59.100 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.101 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/131 - - - 204 - - 2.8758ms
2025-03-26 02:17:59.103 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/131 application/json -
2025-03-26 02:17:59.103 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.104 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:17:59.106 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:59.133 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:17:59.142 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.144 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 34.5072ms
2025-03-26 02:17:59.146 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/131 application/json -
2025-03-26 02:17:59.146 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:17:59.147 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.148 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/131 application/json - - 200 - application/json;+charset=utf-8 45.3887ms
2025-03-26 02:17:59.149 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:17:59.151 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:17:59.177 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:17:59.205 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.208 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 52.4534ms
2025-03-26 02:17:59.209 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:17:59.212 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/131 application/json - - 200 - application/json;+charset=utf-8 65.7767ms
2025-03-26 02:17:59.255 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:17:59.257 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.265 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:59.276 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
2025-03-26 02:17:59.278 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:59.283 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:59.294 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.297 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.84ms
2025-03-26 02:17:59.303 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:59.307 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 51.7532ms
2025-03-26 02:17:59.359 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:17:59.375 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.376 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:59.390 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
2025-03-26 02:17:59.393 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:59.394 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:59.400 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:59.405 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.406 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.885ms
2025-03-26 02:17:59.407 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:59.408 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 48.5558ms
2025-03-26 02:17:59.418 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:17:59.422 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.435 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:59.441 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
2025-03-26 02:17:59.442 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:59.444 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:59.449 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.451 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7462ms
2025-03-26 02:17:59.452 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:17:59.454 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 35.6360ms
2025-03-26 02:17:59.453 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:17:59.456 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:17:59.458 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:17:59.470 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:17:59'.
2025-03-26 02:17:59.472 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:59.473 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:17:59.488 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:17:59.492 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:17:59.496 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.4766ms
2025-03-26 02:17:59.505 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:17:59.506 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 53.5660ms
2025-03-26 02:18:01.372 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/131 - -
2025-03-26 02:18:01.373 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:01.374 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/131 - - - 204 - - 1.4650ms
2025-03-26 02:18:01.375 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/131 application/json 102
2025-03-26 02:18:01.375 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:01.376 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:18:01.376 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:18:01.382 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:18:01.389 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:18:01.392 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:18:01.394 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:18:01.395 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.2101ms
2025-03-26 02:18:01.396 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:18:01.397 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/131 application/json 102 - 200 - application/json;+charset=utf-8 21.8772ms
2025-03-26 02:18:04.631 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/131 application/json 101
2025-03-26 02:18:04.632 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:04.632 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:18:04.633 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:18:04.639 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:18:04.646 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:18:04.659 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:18:04.661 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:18:04.663 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 27.4072ms
2025-03-26 02:18:04.664 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:18:04.665 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/131 application/json 101 - 200 - application/json;+charset=utf-8 33.9296ms
2025-03-26 02:18:12.294 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:18:12.295 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:12.296 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.5979ms
2025-03-26 02:18:12.298 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:18:12.301 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:12.304 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:18:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:18:12.315 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:18:12'.
2025-03-26 02:18:12.317 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:18:12.319 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:18:12.324 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:18:12.325 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6764ms
2025-03-26 02:18:12.327 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:18:12.328 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.5292ms
2025-03-26 02:18:12.335 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:18:12.337 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:12.338 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.5687ms
2025-03-26 02:18:12.340 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:18:12.340 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:18:12.341 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:18:12'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:18:12.349 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:18:12'.
2025-03-26 02:18:12.350 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:18:12.352 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:18:12.362 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:18:12.368 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:18:12.370 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.6012ms
2025-03-26 02:18:12.372 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:18:12.373 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 33.4869ms
2025-03-26 02:19:10.533 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 02:19:10.652 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 02:19:10.689 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 02:19:10.690 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 02:19:10.691 +01:00 [INF] Hosting environment: Development
2025-03-26 02:19:10.691 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 02:19:11.307 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 02:19:15.478 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 02:19:15.563 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 02:19:15.569 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4263.0158ms
2025-03-26 02:19:15.631 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 02:19:15.761 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 130.6008ms
2025-03-26 02:19:18.625 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 02:19:23.090 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 02:19:23.099 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 02:19:23.105 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 4479.8019ms
2025-03-26 02:19:24.050 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:19:24.057 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:24.060 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 10.0111ms
2025-03-26 02:19:24.063 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:19:24.065 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:24.070 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:19:24.078 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:24.079 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 9.6022ms
2025-03-26 02:19:24.082 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:19:24.083 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:24.132 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:24.132 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:24.159 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:24'.
2025-03-26 02:19:24.160 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:24'.
2025-03-26 02:19:24.162 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:24.162 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:24.195 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:24.195 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:32.754 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:32.810 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8609.893ms
2025-03-26 02:19:32.813 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:32.814 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 8751.0719ms
2025-03-26 02:19:32.860 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:19:32.861 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:32.862 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.5242ms
2025-03-26 02:19:32.864 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:19:32.864 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:32.867 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:32.871 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:32'.
2025-03-26 02:19:32.873 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:32.874 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:32.884 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:19:32.884 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:32.885 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5714ms
2025-03-26 02:19:32.890 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:32.892 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 15.5847ms
2025-03-26 02:19:32.894 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:32.894 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.9253ms
2025-03-26 02:19:34.811 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:19:34.897 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:34.900 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10703.1776ms
2025-03-26 02:19:34.901 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:19:34.902 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:34.902 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:34.904 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:34.908 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
2025-03-26 02:19:34.909 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 10826.7879ms
2025-03-26 02:19:34.909 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:34.911 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:34.934 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:19:34.939 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:34.941 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 28.4343ms
2025-03-26 02:19:34.943 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:34.945 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 44.0253ms
2025-03-26 02:19:34.951 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:19:34.953 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:34.956 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:34.961 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
2025-03-26 02:19:34.965 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:34.967 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:34.974 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:34.976 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.9675ms
2025-03-26 02:19:34.979 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:19:34.981 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.1246ms
2025-03-26 02:19:34.985 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:19:34.986 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:19:34.987 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:19:34.994 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:19:34'.
2025-03-26 02:19:34.995 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:34.996 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:19:35.051 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:19:35.055 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:19:35.056 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 57.6267ms
2025-03-26 02:19:35.057 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:19:35.057 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 72.7917ms
2025-03-26 02:20:09.695 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:20:09.701 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:09.714 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:09'.
2025-03-26 02:20:09.716 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:20:09.727 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:09.752 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:09.865 +01:00 [ERR] Bd w CreateMapController.CreateMap
System.Exception: Moesz stworzy tylko 5 map na dzie. Wyczerpae limit.
   at JurMaps.Services.MapService.SaveMapAndReturnIdAsync(Int32 userId) in E:\jurmaps2\Services\MapService.cs:line 68
   at JurMaps.Controllers.CreateMapController.CreateMap(String authorizationHeader) in E:\jurmaps2\Controllers\CreateMapController.cs:line 75
2025-03-26 02:20:09.870 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:09.873 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 136.2356ms
2025-03-26 02:20:09.874 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:20:09.875 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 180.1781ms
2025-03-26 02:20:11.164 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:20:11.166 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.167 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.0766ms
2025-03-26 02:20:11.169 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:11.170 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.173 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.179 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.181 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.182 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.188 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.189 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.7305ms
2025-03-26 02:20:11.190 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.191 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:20:11.192 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 22.9605ms
2025-03-26 02:20:11.193 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.195 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 4.4603ms
2025-03-26 02:20:11.198 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:11.199 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.201 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.207 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.209 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.210 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:11.218 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:11.220 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.224 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.226 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.227 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 15.2011ms
2025-03-26 02:20:11.232 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.234 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.235 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.236 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 38.0587ms
2025-03-26 02:20:11.237 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.241 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:11.242 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.244 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.244 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.247 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.5067ms
2025-03-26 02:20:11.254 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.251 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.255 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.1821ms
2025-03-26 02:20:11.256 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.259 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.270 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:11.272 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:11.276 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.276 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.278 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.4893ms
2025-03-26 02:20:11.280 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.279 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.281 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 39.9740ms
2025-03-26 02:20:11.287 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.290 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.291 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.296 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.297 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:11.298 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.1215ms
2025-03-26 02:20:11.298 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.299 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.301 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.301 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.5447ms
2025-03-26 02:20:11.306 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.307 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.309 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.318 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:11.323 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.323 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:11.325 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.1291ms
2025-03-26 02:20:11.325 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.326 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.327 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.328 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 30.4907ms
2025-03-26 02:20:11.333 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.335 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.337 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.342 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.344 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:11.344 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5469ms
2025-03-26 02:20:11.345 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:11.346 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:11.347 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:11.347 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 23.9106ms
2025-03-26 02:20:11.352 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:11'.
2025-03-26 02:20:11.354 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.355 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:11.360 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:11.364 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:11.365 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 9.2688ms
2025-03-26 02:20:11.366 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:11.367 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.3226ms
2025-03-26 02:20:13.437 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json -
2025-03-26 02:20:13.439 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:13'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:13.444 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:13'.
2025-03-26 02:20:13.445 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 02:20:13.450 +01:00 [INF] Route matched with {action = "GetUserIdFromToken", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserIdFromToken(System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:13.457 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:13.459 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps) in 7.1311ms
2025-03-26 02:20:13.461 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserIdFromToken (JurMaps)'
2025-03-26 02:20:13.462 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/profile/getuseridfromtoken application/json - - 200 - application/json;+charset=utf-8 25.1451ms
2025-03-26 02:20:14.102 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:14.103 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:14.104 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:14.110 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:14'.
2025-03-26 02:20:14.111 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:14.112 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:14.116 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:14.118 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.8248ms
2025-03-26 02:20:14.119 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:14.122 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 19.5831ms
2025-03-26 02:20:15.135 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:20:15.138 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.144 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.145 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:15.150 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.160 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.174 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.181 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:15.190 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 37.5265ms
2025-03-26 02:20:15.192 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:15.193 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 57.8693ms
2025-03-26 02:20:15.200 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:20:15.202 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.209 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.216 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:15.218 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.229 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.237 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.241 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:15.246 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 24.5765ms
2025-03-26 02:20:15.248 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:15.249 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 49.2759ms
2025-03-26 02:20:15.299 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 02:20:15.300 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - -
2025-03-26 02:20:15.303 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.303 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.304 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 4.8684ms
2025-03-26 02:20:15.304 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 - - - 204 - - 4.6095ms
2025-03-26 02:20:15.306 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 02:20:15.308 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.308 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.312 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - -
2025-03-26 02:20:15.314 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.316 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 - - - 204 - - 4.5112ms
2025-03-26 02:20:15.319 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - -
2025-03-26 02:20:15.317 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.331 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json -
2025-03-26 02:20:15.334 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.339 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 - - - 204 - - 20.3291ms
2025-03-26 02:20:15.338 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.341 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 02:20:15.350 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json -
2025-03-26 02:20:15.353 +01:00 [INF] Route matched with {action = "GetPublicatedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPublicatedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.355 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.358 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:15.360 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.361 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.362 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.364 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.373 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.374 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:15.375 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.381 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.383 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.0963ms
2025-03-26 02:20:15.386 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:15.387 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.6009ms
2025-03-26 02:20:15.392 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 02:20:15.400 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:15.403 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.404 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.405 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.412 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.416 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:15.417 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.410 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:20:15.424 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.425 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:15.428 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.429 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.435 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps) in 75.2664ms
2025-03-26 02:20:15.444 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPublicatedMaps (JurMaps)'
2025-03-26 02:20:15.432 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 95.3399ms
2025-03-26 02:20:15.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json -
2025-03-26 02:20:15.430 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.445 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserpublicatedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 114.7553ms
2025-03-26 02:20:15.445 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.450 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.463 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.452 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:15.477 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:15.485 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.476 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 55.8989ms
2025-03-26 02:20:15.492 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.493 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.494 +01:00 [INF] Route matched with {action = "GetLikedMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetLikedMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.497 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:15.497 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - -
2025-03-26 02:20:15.476 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 170.5261ms
2025-03-26 02:20:15.498 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.500 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:20:15.503 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.504 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 106.5400ms
2025-03-26 02:20:15.506 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.511 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."MapId", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "UserMapLikes" AS u
INNER JOIN "Maps" AS m ON u."MapId" = m."MapId"
WHERE u."UserId" = @__userId_0 AND m."MapUploaded"
ORDER BY m."MapId"
LIMIT @__p_2 OFFSET @__p_1
2025-03-26 02:20:15.512 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.515 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.517 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 17.3686ms
2025-03-26 02:20:15.518 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/refresh-token - - - 204 - - 21.9512ms
2025-03-26 02:20:15.524 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:15.526 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 160.146ms
2025-03-26 02:20:15.528 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:15.524 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 02:20:15.522 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.533 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0
2025-03-26 02:20:15.534 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.536 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.538 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 113.6748ms
2025-03-26 02:20:15.539 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.540 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps) in 36.9225ms
2025-03-26 02:20:15.544 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 193.7229ms
2025-03-26 02:20:15.547 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.541 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.550 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetLikedMaps (JurMaps)'
2025-03-26 02:20:15.551 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.556 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.557 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:15.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserlikedmaps?profileId=3&page=0 application/json - - 200 - application/json;+charset=utf-8 119.6188ms
2025-03-26 02:20:15.561 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.561 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:20:15.566 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:15'.
2025-03-26 02:20:15.568 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 25.2365ms
2025-03-26 02:20:15.569 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:20:15.570 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:15.572 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 94.2956ms
2025-03-26 02:20:15.575 +01:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.TokenRefreshResponse]] RefreshToken(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:15.587 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:15.587 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.TokenRefreshResponse, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:15.589 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 14.4788ms
2025-03-26 02:20:15.590 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.RefreshToken (JurMaps) in 13.174ms
2025-03-26 02:20:15.590 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:20:15.591 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.RefreshToken (JurMaps)'
2025-03-26 02:20:15.592 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 68.4684ms
2025-03-26 02:20:15.594 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/auth/refresh-token application/json 0 - 200 - application/json;+charset=utf-8 61.2883ms
2025-03-26 02:20:15.600 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - -
2025-03-26 02:20:15.600 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - -
2025-03-26 02:20:15.601 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.602 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.602 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserdata/3 - - - 204 - - 2.2322ms
2025-03-26 02:20:15.603 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 - - - 204 - - 2.5371ms
2025-03-26 02:20:15.604 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json -
2025-03-26 02:20:15.604 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json -
2025-03-26 02:20:15.605 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.606 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:15.607 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 02:20:15.607 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 02:20:15.611 +01:00 [INF] Route matched with {action = "GetUserData", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.ProfileDto]] GetUserData(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.612 +01:00 [INF] Route matched with {action = "GetPrivateMaps", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MapDto]]] GetPrivateMaps(System.String, System.String) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:15.619 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:15.624 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__ifUploaded_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM "Maps" AS m
WHERE m."MapCreatorId" = @__userId_0 AND m."MapUploaded" = @__ifUploaded_1
ORDER BY m."MapId"
LIMIT @__p_3 OFFSET @__p_2
2025-03-26 02:20:15.626 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.ProfileDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:15.628 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MapDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:15.629 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetUserData (JurMaps) in 17.4068ms
2025-03-26 02:20:15.630 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps) in 15.6401ms
2025-03-26 02:20:15.630 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetUserData (JurMaps)'
2025-03-26 02:20:15.631 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.GetPrivateMaps (JurMaps)'
2025-03-26 02:20:15.632 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserdata/3 application/json - - 200 - application/json;+charset=utf-8 28.2383ms
2025-03-26 02:20:15.633 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/profile/getuserunpublishedmaps?profileId=3&page=1 application/json - - 200 - application/json;+charset=utf-8 29.0703ms
2025-03-26 02:20:18.265 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/127 - -
2025-03-26 02:20:18.266 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:18.267 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/127 - - - 204 - - 1.7407ms
2025-03-26 02:20:18.268 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/127 application/json -
2025-03-26 02:20:18.269 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:18.269 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:18.272 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:18.317 +01:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-03-26 02:20:18.334 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:20:18.436 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-26 02:20:18.466 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:18.490 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:20:18.493 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:18.494 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 219.8428ms
2025-03-26 02:20:18.495 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:18.496 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/127 application/json - - 200 - application/json;+charset=utf-8 227.7946ms
2025-03-26 02:20:20.250 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/128 - -
2025-03-26 02:20:20.251 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:20.252 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/128 - - - 204 - - 1.9025ms
2025-03-26 02:20:20.254 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/128 application/json -
2025-03-26 02:20:20.254 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:20.255 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:20.255 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:20.262 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:20:20.269 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 02:20:20.272 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:20.296 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:20:20.298 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:20.300 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 42.9487ms
2025-03-26 02:20:20.302 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:20.303 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/128 application/json - - 200 - application/json;+charset=utf-8 49.3879ms
2025-03-26 02:20:21.931 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/129 - -
2025-03-26 02:20:21.932 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:21.933 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/129 - - - 204 - - 1.7256ms
2025-03-26 02:20:21.934 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/129 application/json -
2025-03-26 02:20:21.935 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:21.935 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:21.936 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:21.941 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:20:21.946 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-26 02:20:21.951 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:21.962 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:20:21.964 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:21.966 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 28.6183ms
2025-03-26 02:20:21.967 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:21.968 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/129 application/json - - 200 - application/json;+charset=utf-8 33.6224ms
2025-03-26 02:20:23.213 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/130 - -
2025-03-26 02:20:23.214 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:23.214 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/130 - - - 204 - - 1.2728ms
2025-03-26 02:20:23.215 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/130 application/json -
2025-03-26 02:20:23.216 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:23.217 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:23.218 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:23.224 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:20:23.230 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
2025-03-26 02:20:23.236 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:23.246 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:20:23.248 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:23.249 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 29.8428ms
2025-03-26 02:20:23.250 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:23.251 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/130 application/json - - 200 - application/json;+charset=utf-8 36.1031ms
2025-03-26 02:20:24.407 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/131 - -
2025-03-26 02:20:24.408 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:24.408 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/profile/deletemap/131 - - - 204 - - 1.3891ms
2025-03-26 02:20:24.409 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/131 application/json -
2025-03-26 02:20:24.410 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:24.410 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:24.411 +01:00 [INF] Route matched with {action = "DeleteMapById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] DeleteMapByIdAsync(Int32) on controller JurMaps.Controllers.ProfileController (JurMaps).
2025-03-26 02:20:24.417 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity", m1."MapId", m1."CountryId", m1."ConnectionCount", u."UserId", u."MapId"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
LEFT JOIN "MapCountries" AS m1 ON t."MapId" = m1."MapId"
LEFT JOIN "UserMapLikes" AS u ON t."MapId" = u."MapId"
ORDER BY t."MapId", p."PlaceId", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", m1."MapId", m1."CountryId", u."UserId"
2025-03-26 02:20:24.421 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Places"
WHERE "PlaceId" = @p0;
DELETE FROM "Places"
WHERE "PlaceId" = @p1;
2025-03-26 02:20:24.425 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:24.429 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Maps"
WHERE "MapId" = @p0;
2025-03-26 02:20:24.431 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:24.433 +01:00 [INF] Executed action JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps) in 20.3084ms
2025-03-26 02:20:24.434 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.ProfileController.DeleteMapByIdAsync (JurMaps)'
2025-03-26 02:20:24.435 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/profile/deletemap/131 application/json - - 200 - application/json;+charset=utf-8 25.5431ms
2025-03-26 02:20:25.536 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:20:25.539 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:25.544 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:25'.
2025-03-26 02:20:25.546 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:20:25.546 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:25.553 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:25.587 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:20:25.596 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:25.598 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 50.0038ms
2025-03-26 02:20:25.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:20:25.600 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 63.7691ms
2025-03-26 02:20:28.252 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:20:28.253 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:28.253 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 1.5288ms
2025-03-26 02:20:28.255 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:28.255 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:28.256 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:28.261 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:28'.
2025-03-26 02:20:28.262 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:28.262 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:28.267 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:28.268 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.4779ms
2025-03-26 02:20:28.270 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:28.271 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.4027ms
2025-03-26 02:20:29.302 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json -
2025-03-26 02:20:29.304 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.308 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.310 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.314 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:29.336 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:20:29.340 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.344 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 27.5587ms
2025-03-26 02:20:29.345 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.346 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json - - 200 - application/json;+charset=utf-8 43.8172ms
2025-03-26 02:20:29.351 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json -
2025-03-26 02:20:29.354 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.368 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.371 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.372 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:29.382 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:20:29.386 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.387 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 12.5073ms
2025-03-26 02:20:29.388 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.389 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json - - 200 - application/json;+charset=utf-8 37.4140ms
2025-03-26 02:20:29.392 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:20:29.394 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.400 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.402 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:29.403 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json -
2025-03-26 02:20:29.405 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:29.405 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.415 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.415 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:29.416 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.421 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:29.422 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:29.429 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:29.432 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 24.6002ms
2025-03-26 02:20:29.434 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:20:29.435 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:29.440 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.440 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 47.7747ms
2025-03-26 02:20:29.442 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 15.9415ms
2025-03-26 02:20:29.444 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:20:29.445 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json - - 200 - application/json;+charset=utf-8 42.6685ms
2025-03-26 02:20:29.447 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:20:29.449 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.456 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.458 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:29.459 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:29.469 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:29.478 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:29.491 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:20:29.493 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 30.5641ms
2025-03-26 02:20:29.495 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:20:29.496 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 48.7772ms
2025-03-26 02:20:29.669 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/132 - -
2025-03-26 02:20:29.671 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.673 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/132 - -
2025-03-26 02:20:29.673 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/132 - - - 204 - - 3.9994ms
2025-03-26 02:20:29.678 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/132 application/json -
2025-03-26 02:20:29.675 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.707 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.707 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:20:29.707 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/132 - - - 204 - - 34.1385ms
2025-03-26 02:20:29.728 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:29.787 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:29.825 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.828 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.866 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:20:29.867 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:20:29.872 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.875 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.875 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.877 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:29.878 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 10.7547ms
2025-03-26 02:20:29.879 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:29.880 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:29.882 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.884 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 120.5146ms
2025-03-26 02:20:29.885 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/132 application/json -
2025-03-26 02:20:29.886 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.887 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:20:29.888 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.888 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.898 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.900 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/132 application/json - - 200 - application/json;+charset=utf-8 222.1651ms
2025-03-26 02:20:29.901 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 16.1812ms
2025-03-26 02:20:29.902 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:20:29.903 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:29.905 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:29.908 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:29.910 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:29.913 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:29.920 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.920 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 133.2315ms
2025-03-26 02:20:29.926 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:29.937 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:29.929 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:20:29.939 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:29.951 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:29.950 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.944 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.952 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:29.987 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 64.7353ms
2025-03-26 02:20:29.989 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 63.8486ms
2025-03-26 02:20:29.991 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:29.992 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:20:29.994 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:29.994 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:29.995 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:29.996 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/132 application/json - - 200 - application/json;+charset=utf-8 110.4350ms
2025-03-26 02:20:29.997 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.6176ms
2025-03-26 02:20:29.998 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 118.5157ms
2025-03-26 02:20:29.999 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:30.001 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:30.007 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:29'.
2025-03-26 02:20:30.008 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 102.6281ms
2025-03-26 02:20:30.010 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:30.012 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:30.025 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:30.031 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:30.033 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 18.6309ms
2025-03-26 02:20:30.035 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:30.038 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 46.2115ms
2025-03-26 02:20:34.851 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/132 - -
2025-03-26 02:20:34.851 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:34.852 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/132 - - - 204 - - 1.5449ms
2025-03-26 02:20:34.853 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/132 application/json 102
2025-03-26 02:20:34.854 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:34.855 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:20:34.858 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:34.885 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:20:34.898 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:20:34.919 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:20:34.922 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:34.923 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 63.5783ms
2025-03-26 02:20:34.924 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:20:34.925 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/132 application/json 102 - 200 - application/json;+charset=utf-8 71.7017ms
2025-03-26 02:20:38.381 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/132 application/json 102
2025-03-26 02:20:38.382 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:38.382 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:20:38.383 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:20:38.388 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:20:38.394 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:20:38.398 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:20:38.400 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:38.401 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 17.0544ms
2025-03-26 02:20:38.402 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:20:38.403 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/132 application/json 102 - 200 - application/json;+charset=utf-8 22.0437ms
2025-03-26 02:20:55.600 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:20:55.602 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:55.603 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2711ms
2025-03-26 02:20:55.604 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:20:55.606 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:55.607 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:55.611 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:55'.
2025-03-26 02:20:55.613 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:55.614 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:55.619 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:55.620 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.5221ms
2025-03-26 02:20:55.622 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:20:55.623 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.2392ms
2025-03-26 02:20:55.638 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:20:55.640 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:55.641 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.3581ms
2025-03-26 02:20:55.642 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:20:55.643 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:20:55.644 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:20:55.649 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:20:55'.
2025-03-26 02:20:55.650 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:55.651 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:20:55.660 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:20:55.663 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:20:55.664 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.4539ms
2025-03-26 02:20:55.665 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:20:55.667 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 24.6431ms
2025-03-26 02:21:44.949 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:21:44.952 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:44.953 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.3780ms
2025-03-26 02:21:44.957 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:44.967 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:44.974 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:44'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:44.995 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:44'.
2025-03-26 02:21:44.999 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:21:45.002 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:45.007 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:45.003 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:45.015 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 16.0284ms
2025-03-26 02:21:45.017 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:21:45.017 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:45.019 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:45.022 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.9132ms
2025-03-26 02:21:45.025 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:45.027 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:45.045 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:45'.
2025-03-26 02:21:45.047 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 89.1062ms
2025-03-26 02:21:45.048 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:45.051 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:45.062 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:45.069 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:45.070 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.8917ms
2025-03-26 02:21:45.072 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:45.074 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 57.6959ms
2025-03-26 02:21:48.443 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json -
2025-03-26 02:21:48.444 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:48.445 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:48.445 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:48.449 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
2025-03-26 02:21:48.452 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
2025-03-26 02:21:48.452 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:48.453 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:48.454 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:48.454 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:48.461 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:21:48.463 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:48.465 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:48.469 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 13.1236ms
2025-03-26 02:21:48.469 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:48.470 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:48.472 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:48.473 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/132 application/json - - 200 - application/json;+charset=utf-8 29.9864ms
2025-03-26 02:21:48.474 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 16.7683ms
2025-03-26 02:21:48.476 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:48.476 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 32.5975ms
2025-03-26 02:21:48.481 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:48.482 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:48.486 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:48'.
2025-03-26 02:21:48.487 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:48.487 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:48.493 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:48.498 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:48.500 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:48.501 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.616ms
2025-03-26 02:21:48.502 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:48.503 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 22.1962ms
2025-03-26 02:21:49.680 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:49.682 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:49.685 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:49'.
2025-03-26 02:21:49.686 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:49.687 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:49.693 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:49.697 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:49.700 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:49.701 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.8445ms
2025-03-26 02:21:49.702 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:49.703 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 22.7519ms
2025-03-26 02:21:49.710 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:49.711 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:49'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:49.717 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:49'.
2025-03-26 02:21:49.718 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:49.719 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:49.725 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:49.730 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:49.733 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:49.734 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 13.2261ms
2025-03-26 02:21:49.735 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:49.735 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 25.8135ms
2025-03-26 02:21:50.773 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:21:50.775 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.776 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.7215ms
2025-03-26 02:21:50.779 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:50.784 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.787 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:50.800 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
2025-03-26 02:21:50.802 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:50.804 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:50.808 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:50.810 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7326ms
2025-03-26 02:21:50.812 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:50.813 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 33.3899ms
2025-03-26 02:21:50.819 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:21:50.820 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.821 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.4288ms
2025-03-26 02:21:50.824 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:21:50.826 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.830 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:50.835 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
2025-03-26 02:21:50.837 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:50.838 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:50.846 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:50.849 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:50.851 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.4252ms
2025-03-26 02:21:50.853 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:50.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.3072ms
2025-03-26 02:21:50.905 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:50.907 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.909 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:50.916 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
2025-03-26 02:21:50.917 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:50.918 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:50.926 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:50.927 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.735ms
2025-03-26 02:21:50.928 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:50.929 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 24.3328ms
2025-03-26 02:21:50.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:21:50.944 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:50.945 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:50.950 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:50'.
2025-03-26 02:21:50.951 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:50.951 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:50.958 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:50.961 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:50.963 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.0985ms
2025-03-26 02:21:50.965 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:50.966 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 23.6169ms
2025-03-26 02:21:51.287 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:21:51.290 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.296 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.297 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:21:51.298 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:51.306 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:51.313 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:21:51.315 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:51.318 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 18.0464ms
2025-03-26 02:21:51.320 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:21:51.321 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 33.8487ms
2025-03-26 02:21:51.432 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json -
2025-03-26 02:21:51.445 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.460 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.462 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.465 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:51.475 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:21:51.484 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:51.484 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json -
2025-03-26 02:21:51.486 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:51.487 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:51.489 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.490 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 22.5416ms
2025-03-26 02:21:51.492 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.503 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.507 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.519 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.525 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:51.522 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json - - 200 - application/json;+charset=utf-8 89.4358ms
2025-03-26 02:21:51.520 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.539 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:51.544 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:51.555 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:51.567 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:21:51.568 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:51.569 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json -
2025-03-26 02:21:51.571 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 20.9676ms
2025-03-26 02:21:51.578 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.577 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:51.580 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.582 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:51.596 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.598 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 43.988ms
2025-03-26 02:21:51.623 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.640 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 156.5723ms
2025-03-26 02:21:51.641 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:51.644 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.647 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.652 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:51.653 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json - - 200 - application/json;+charset=utf-8 168.9534ms
2025-03-26 02:21:51.655 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:51.668 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:51.673 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:21:51.679 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:51.684 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:51.691 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 22.988ms
2025-03-26 02:21:51.689 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:51.694 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:21:51.697 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 36.0638ms
2025-03-26 02:21:51.701 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/133 application/json - - 200 - application/json;+charset=utf-8 132.2111ms
2025-03-26 02:21:51.702 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:51.706 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 138.3887ms
2025-03-26 02:21:51.713 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:21:51.715 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:51.723 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:51'.
2025-03-26 02:21:51.726 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:51.728 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:51.737 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:51.746 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:51.756 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:21:51.758 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 27.3283ms
2025-03-26 02:21:51.758 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:21:51.760 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 47.1185ms
2025-03-26 02:21:52.089 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/133 - -
2025-03-26 02:21:52.091 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.093 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/133 - - - 204 - - 3.7424ms
2025-03-26 02:21:52.096 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/133 application/json -
2025-03-26 02:21:52.097 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.098 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:21:52.099 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:52.109 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:21:52.112 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.114 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 9.4559ms
2025-03-26 02:21:52.115 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/133 application/json -
2025-03-26 02:21:52.115 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:21:52.116 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.117 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/133 application/json - - 200 - application/json;+charset=utf-8 20.6145ms
2025-03-26 02:21:52.118 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:21:52.120 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:52.130 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:21:52.133 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.136 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 12.2483ms
2025-03-26 02:21:52.138 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:21:52.139 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/133 application/json - - 200 - application/json;+charset=utf-8 23.9164ms
2025-03-26 02:21:52.335 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:52.339 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.341 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:52.360 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
2025-03-26 02:21:52.362 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:52.364 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:52.371 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.373 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 3.7775ms
2025-03-26 02:21:52.374 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:52.375 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 39.3093ms
2025-03-26 02:21:52.456 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:21:52.457 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.458 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:52.466 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
2025-03-26 02:21:52.468 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:52.469 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:52.480 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:52.487 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.491 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 19.2101ms
2025-03-26 02:21:52.495 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:52.496 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 39.5516ms
2025-03-26 02:21:52.501 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:21:52.506 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.509 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:52.522 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
2025-03-26 02:21:52.523 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:52.524 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:52.532 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.534 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.2501ms
2025-03-26 02:21:52.536 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:21:52.537 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 37.0497ms
2025-03-26 02:21:52.549 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:21:52.556 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:52.559 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:21:52.569 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:21:52'.
2025-03-26 02:21:52.570 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:52.577 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:21:52.589 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:21:52.597 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:52.598 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.8846ms
2025-03-26 02:21:52.599 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:21:52.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 52.1149ms
2025-03-26 02:21:58.034 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/133 - -
2025-03-26 02:21:58.036 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:58.036 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/133 - - - 204 - - 2.4684ms
2025-03-26 02:21:58.039 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/133 application/json 103
2025-03-26 02:21:58.040 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:21:58.041 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:21:58.041 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:21:58.047 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:21:58.052 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:21:58.055 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:21:58.059 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:21:58.061 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 18.3593ms
2025-03-26 02:21:58.062 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:21:58.063 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/133 application/json 103 - 200 - application/json;+charset=utf-8 24.4594ms
2025-03-26 02:22:03.215 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/133 - -
2025-03-26 02:22:03.216 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:03.216 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/133 - - - 204 - - 1.5778ms
2025-03-26 02:22:03.218 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/133 application/json 102
2025-03-26 02:22:03.218 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:03.219 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:22:03.220 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:03.225 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:22:03.230 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:22:03.233 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:22:03.235 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:03.236 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 14.9889ms
2025-03-26 02:22:03.237 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:22:03.238 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/133 application/json 102 - 200 - application/json;+charset=utf-8 20.1692ms
2025-03-26 02:22:11.115 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:22:11.144 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:11.146 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 30.8618ms
2025-03-26 02:22:11.150 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:11.152 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:11.153 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:11.164 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:11'.
2025-03-26 02:22:11.165 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:11.166 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:11.173 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:11.174 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.8661ms
2025-03-26 02:22:11.176 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:11.177 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 29.8086ms
2025-03-26 02:22:11.200 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:22:11.201 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:11.203 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.8906ms
2025-03-26 02:22:11.205 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:11.207 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:11.208 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:11.221 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:11'.
2025-03-26 02:22:11.223 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:11.224 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:11.237 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:11.245 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:11.248 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 17.285ms
2025-03-26 02:22:11.250 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:11.254 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 49.2924ms
2025-03-26 02:22:14.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:14.597 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:14.601 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:14.612 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:14'.
2025-03-26 02:22:14.615 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:14.618 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:14.625 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:14.627 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6008ms
2025-03-26 02:22:14.629 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:14.631 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 35.6062ms
2025-03-26 02:22:14.650 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:14.651 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:14.652 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:14'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:14.663 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:14'.
2025-03-26 02:22:14.665 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:14.666 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:14.675 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:14.681 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:14.682 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.5425ms
2025-03-26 02:22:14.685 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:14.686 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 36.5373ms
2025-03-26 02:22:16.598 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:22:16.599 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:16.600 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2123ms
2025-03-26 02:22:16.602 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:16.603 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:16.605 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:16.609 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:16'.
2025-03-26 02:22:16.610 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:16.610 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:16.615 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:16.617 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6427ms
2025-03-26 02:22:16.618 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:16.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 16.9720ms
2025-03-26 02:22:16.634 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:22:16.635 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:16.636 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.8941ms
2025-03-26 02:22:16.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:16.639 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:16.640 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:16'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:16.644 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:16'.
2025-03-26 02:22:16.645 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:16.646 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:16.654 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:16.660 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:16.662 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 13.3933ms
2025-03-26 02:22:16.664 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:16.665 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.2223ms
2025-03-26 02:22:28.882 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:22:28.883 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:28.884 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.2909ms
2025-03-26 02:22:28.886 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:28.886 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:28.888 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:28.893 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:28'.
2025-03-26 02:22:28.894 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:28.895 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:28.900 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:28.902 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.6505ms
2025-03-26 02:22:28.903 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:28.904 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 18.3485ms
2025-03-26 02:22:28.915 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:22:28.916 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:28.917 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 1.5497ms
2025-03-26 02:22:28.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:28.919 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:28.920 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:28.924 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:28'.
2025-03-26 02:22:28.925 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:28.926 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:28.931 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:28.941 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:28.942 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.1665ms
2025-03-26 02:22:28.943 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:28.944 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 25.2370ms
2025-03-26 02:22:30.539 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:22:30.540 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:30.544 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:30'.
2025-03-26 02:22:30.545 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:30.546 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:30.551 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:30.556 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:30.558 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:22:30.559 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.3195ms
2025-03-26 02:22:30.560 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:30.561 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 21.5718ms
2025-03-26 02:22:30.565 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:22:30.567 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:30'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:30.570 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:30'.
2025-03-26 02:22:30.571 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:30.572 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:30.578 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:30.582 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:30.585 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:22:30.587 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 12.7365ms
2025-03-26 02:22:30.587 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:30.588 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 22.9385ms
2025-03-26 02:22:31.572 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:31.575 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:31.581 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:31.596 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
2025-03-26 02:22:31.599 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:31.601 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:31.609 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:31.610 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3184ms
2025-03-26 02:22:31.611 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:31.613 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 40.7706ms
2025-03-26 02:22:31.623 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:31.624 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:31.625 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:31.630 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
2025-03-26 02:22:31.631 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:31.632 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:31.638 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:31.642 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:31.643 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 8.8108ms
2025-03-26 02:22:31.644 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:31.645 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 21.6810ms
2025-03-26 02:22:31.701 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:31.706 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:31.707 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:31.713 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
2025-03-26 02:22:31.714 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:31.715 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:31.722 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:31.724 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.0885ms
2025-03-26 02:22:31.726 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:31.727 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 25.3274ms
2025-03-26 02:22:31.735 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:31.736 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:31.739 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:31.747 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:31'.
2025-03-26 02:22:31.748 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:31.749 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:31.756 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:31.761 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:31.762 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.7107ms
2025-03-26 02:22:31.763 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:31.764 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.1794ms
2025-03-26 02:22:32.023 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:22:32.025 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.030 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.031 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:22:32.032 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.038 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:32.044 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:22:32.047 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.048 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 14.0355ms
2025-03-26 02:22:32.049 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:22:32.051 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 28.7413ms
2025-03-26 02:22:32.179 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json -
2025-03-26 02:22:32.185 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.201 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.204 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.206 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.216 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:22:32.221 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.223 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 14.4445ms
2025-03-26 02:22:32.225 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.227 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json - - 200 - application/json;+charset=utf-8 47.7246ms
2025-03-26 02:22:32.235 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:32.238 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json -
2025-03-26 02:22:32.238 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:32.239 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.241 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.255 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.278 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.280 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.282 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:32.284 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:32.283 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.288 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.292 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.3275ms
2025-03-26 02:22:32.296 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:22:32.298 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:32.306 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.307 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 71.4278ms
2025-03-26 02:22:32.308 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:22:32.308 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 19.4389ms
2025-03-26 02:22:32.320 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.312 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.320 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json -
2025-03-26 02:22:32.327 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json - - 200 - application/json;+charset=utf-8 89.1393ms
2025-03-26 02:22:32.358 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.360 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.371 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:32.380 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.384 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.382 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:32.387 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.400 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:32.414 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:22:32.419 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:32.427 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.433 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:22:32.434 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 30.2538ms
2025-03-26 02:22:32.436 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 44.4106ms
2025-03-26 02:22:32.438 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:22:32.442 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:32.444 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/134 application/json - - 200 - application/json;+charset=utf-8 123.7692ms
2025-03-26 02:22:32.445 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 136.9056ms
2025-03-26 02:22:32.452 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:22:32.455 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.461 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.463 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:32.463 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:32.471 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:32.477 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:32.481 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:22:32.483 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 17.6528ms
2025-03-26 02:22:32.484 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:22:32.485 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 32.5997ms
2025-03-26 02:22:32.790 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/134 - -
2025-03-26 02:22:32.793 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:32.794 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/134 - - - 204 - - 4.0167ms
2025-03-26 02:22:32.796 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/134 application/json -
2025-03-26 02:22:32.797 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:32.798 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:22:32.799 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.812 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:22:32.821 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.825 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 21.5926ms
2025-03-26 02:22:32.832 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/134 application/json -
2025-03-26 02:22:32.833 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:22:32.834 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:32.837 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/134 application/json - - 200 - application/json;+charset=utf-8 41.3232ms
2025-03-26 02:22:32.838 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:22:32.842 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:32.851 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:22:32.854 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:32.856 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 10.9042ms
2025-03-26 02:22:32.858 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:22:32.860 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/134 application/json - - 200 - application/json;+charset=utf-8 28.2348ms
2025-03-26 02:22:32.954 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:32.956 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:32.965 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:32.991 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:32'.
2025-03-26 02:22:32.998 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:33.000 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:33.009 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:33.011 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.7914ms
2025-03-26 02:22:33.013 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:33.016 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 62.6714ms
2025-03-26 02:22:33.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:33.164 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:33.166 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:33.177 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
2025-03-26 02:22:33.178 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:33.179 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:33.190 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:33.193 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:33.194 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.2569ms
2025-03-26 02:22:33.196 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:33.197 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 34.3860ms
2025-03-26 02:22:33.224 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:22:33.226 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:33.228 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:33.239 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
2025-03-26 02:22:33.242 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:33.246 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:33.252 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:33.254 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.3117ms
2025-03-26 02:22:33.255 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:22:33.256 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 31.6776ms
2025-03-26 02:22:33.274 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:22:33.276 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:33.277 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:22:33.283 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:22:33'.
2025-03-26 02:22:33.284 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:33.287 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:22:33.295 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:22:33.299 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:33.300 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10.4115ms
2025-03-26 02:22:33.302 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:22:33.303 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 29.2497ms
2025-03-26 02:22:34.851 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/134 - -
2025-03-26 02:22:34.852 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:34.853 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/134 - - - 204 - - 2.0827ms
2025-03-26 02:22:34.856 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/134 application/json 103
2025-03-26 02:22:34.857 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:22:34.857 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:22:34.858 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:22:34.863 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:22:34.868 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:22:34.872 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:22:34.874 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:22:34.875 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 16.1185ms
2025-03-26 02:22:34.876 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:22:34.877 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/134 application/json 103 - 200 - application/json;+charset=utf-8 21.4171ms
2025-03-26 02:24:06.330 +01:00 [INF] User profile is available. Using 'C:\Users\ostat\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-26 02:24:06.481 +01:00 [WRN] Overriding address(es) 'https://localhost:7299'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-03-26 02:24:06.528 +01:00 [INF] Now listening on: https://localhost:7299
2025-03-26 02:24:06.529 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-26 02:24:06.530 +01:00 [INF] Hosting environment: Development
2025-03-26 02:24:06.530 +01:00 [INF] Content root path: E:\jurmaps2
2025-03-26 02:24:07.159 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 02:24:11.302 +01:00 [INF] No SPA development server running at http://localhost:3000 found.
2025-03-26 02:24:11.389 +01:00 [INF] SPA proxy is not ready. Returning temporary landing page.
2025-03-26 02:24:11.394 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 200 - text/html 4237.7644ms
2025-03-26 02:24:11.466 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/favicon.ico - -
2025-03-26 02:24:11.596 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/favicon.ico - - - 404 0 - 130.8250ms
2025-03-26 02:24:14.457 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/ - -
2025-03-26 02:24:22.825 +01:00 [INF] SPA proxy is ready. Redirecting to http://localhost:3000.
2025-03-26 02:24:22.826 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/ - - - 302 0 - 8369.2316ms
2025-03-26 02:24:23.110 +01:00 [INF] SPA development server running at 'http://localhost:3000'
2025-03-26 02:24:23.945 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:24:23.952 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:23.959 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 14.4846ms
2025-03-26 02:24:23.964 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:24:23.970 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:24:23.974 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:23.974 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:23.976 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 6.2402ms
2025-03-26 02:24:23.978 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:24:23.981 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:24.054 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:24.054 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:24.082 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:24'.
2025-03-26 02:24:24.083 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:24'.
2025-03-26 02:24:24.087 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:24.087 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:24.116 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:24.116 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:32.531 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:32.601 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 8479.5646ms
2025-03-26 02:24:32.604 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:32.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 8642.1270ms
2025-03-26 02:24:32.652 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:24:32.653 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:32.654 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 2.0204ms
2025-03-26 02:24:32.656 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:24:32.658 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:32.659 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:32'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:32.665 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:32'.
2025-03-26 02:24:32.666 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:32.667 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:32.678 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:24:32.679 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:32.680 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 2.1611ms
2025-03-26 02:24:32.686 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:32.689 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 18.9639ms
2025-03-26 02:24:32.690 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:32.691 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 34.9656ms
2025-03-26 02:24:34.825 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:24:34.923 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:34.927 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 10804.8176ms
2025-03-26 02:24:34.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:24:34.929 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:34.929 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:34.931 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:34.939 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 10961.1752ms
2025-03-26 02:24:34.940 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:34'.
2025-03-26 02:24:34.942 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:34.943 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:34.972 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:24:34.973 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:24:34.977 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:34.977 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:34.978 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:34.979 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 34.8331ms
2025-03-26 02:24:34.984 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:34'.
2025-03-26 02:24:34.986 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:34.987 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:34.989 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 61.0741ms
2025-03-26 02:24:34.993 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:35.000 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:24:35.001 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:35.001 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:24:35.003 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 5.5829ms
2025-03-26 02:24:35.004 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:24:35.004 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:24:35.010 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:24:35'.
2025-03-26 02:24:35.012 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 38.4256ms
2025-03-26 02:24:35.014 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:35.017 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:24:35.072 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:24:35.076 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:24:35.077 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 58.5126ms
2025-03-26 02:24:35.078 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:24:35.079 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 78.9315ms
2025-03-26 02:28:36.561 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0
2025-03-26 02:28:36.564 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:36.570 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:36'.
2025-03-26 02:28:36.571 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:28:36.577 +01:00 [INF] Route matched with {action = "CreateMap", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] CreateMap(System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:28:36.618 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:28:36.907 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Maps" ("MapCreationDate", "MapCreatorId", "MapDescription", "MapLikes", "MapName", "MapPlacesQuantity", "MapPublicationDate", "MapThumbnail", "MapUploaded")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "MapId";
2025-03-26 02:28:36.939 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:28:36.944 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.CreateMap (JurMaps) in 362.5832ms
2025-03-26 02:28:36.948 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.CreateMap (JurMaps)'
2025-03-26 02:28:36.951 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/createmap/createmap application/json 0 - 200 - application/json;+charset=utf-8 389.2372ms
2025-03-26 02:28:45.435 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:28:45.437 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:28:45.438 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.3013ms
2025-03-26 02:28:45.441 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:28:45.442 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:28:45.444 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:45.449 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:45'.
2025-03-26 02:28:45.450 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:28:45.451 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:28:45.457 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:28:45.460 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 6.3049ms
2025-03-26 02:28:45.472 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:28:45.476 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 35.1373ms
2025-03-26 02:28:59.631 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json -
2025-03-26 02:28:59.634 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json -
2025-03-26 02:28:59.635 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:59.636 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:59.642 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
2025-03-26 02:28:59.648 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
2025-03-26 02:28:59.648 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:28:59.650 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:28:59.654 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:28:59.655 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:28:59.699 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json -
2025-03-26 02:28:59.699 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:28:59.701 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:59.703 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:59.710 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
2025-03-26 02:28:59.725 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
2025-03-26 02:28:59.726 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:28:59.728 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:28:59.731 +01:00 [INF] Route matched with {action = "VerifyUser", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] VerifyUser(Int32, System.String) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:28:59.736 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:28:59.748 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:28:59.760 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:28:59.767 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:28:59.774 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 34.1439ms
2025-03-26 02:28:59.776 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:28:59.777 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 77.3368ms
2025-03-26 02:28:59.792 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0
2025-03-26 02:28:59.795 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:28:59.803 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:28:59'.
2025-03-26 02:28:59.805 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:28:59.806 +01:00 [INF] Route matched with {action = "GetUserContextData", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[JurMaps.Model.DTO.UserContextDto]] GetUserContextData(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:28:59.815 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:28:59.821 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:28:59.824 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[JurMaps.Model.DTO.UserContextDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-26 02:28:59.827 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserContextData (JurMaps) in 18.7748ms
2025-03-26 02:28:59.829 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserContextData (JurMaps)'
2025-03-26 02:28:59.831 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7299/api/auth/getusercontextdata application/json 0 - 200 - application/json;+charset=utf-8 39.1678ms
2025-03-26 02:28:59.846 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:28:59.859 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:28:59.870 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 214.4908ms
2025-03-26 02:28:59.879 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:28:59.882 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json - - 200 - application/json;+charset=utf-8 250.4555ms
2025-03-26 02:29:00.114 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:29:00.116 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", t0."MapTagsTagId", t0."MapsWithThisTagMapId", t0."TagId", t0."TagName", t0."TagQuantity"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT m0."MapTagsTagId", m0."MapsWithThisTagMapId", t1."TagId", t1."TagName", t1."TagQuantity"
    FROM "MapTag" AS m0
    INNER JOIN "Tags" AS t1 ON m0."MapTagsTagId" = t1."TagId"
) AS t0 ON t."MapId" = t0."MapsWithThisTagMapId"
ORDER BY t."MapId", t0."MapTagsTagId", t0."MapsWithThisTagMapId"
2025-03-26 02:29:00.125 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.130 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 469.9616ms
2025-03-26 02:29:00.134 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:29:00.129 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.135 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json - - 200 - application/json;+charset=utf-8 500.8732ms
2025-03-26 02:29:00.136 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps) in 400.2631ms
2025-03-26 02:29:00.138 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.VerifyUser (JurMaps)'
2025-03-26 02:29:00.140 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7299/api/createmap/verifyuser/135 application/json - - 200 - application/json;+charset=utf-8 440.1781ms
2025-03-26 02:29:00.220 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/135 - -
2025-03-26 02:29:00.221 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.221 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/135 - -
2025-03-26 02:29:00.224 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/135 - - - 204 - - 4.0354ms
2025-03-26 02:29:00.225 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.227 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/135 application/json -
2025-03-26 02:29:00.227 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/getmapmarkers/135 - - - 204 - - 6.1464ms
2025-03-26 02:29:00.228 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.231 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:29:00.243 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:29:00.295 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - -
2025-03-26 02:29:00.297 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.298 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/checkifuserisadmin - - - 204 - - 3.2177ms
2025-03-26 02:29:00.301 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:29:00.304 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.305 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:29:00.311 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
2025-03-26 02:29:00.312 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:29:00.315 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:29:00.323 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - -
2025-03-26 02:29:00.324 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.325 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.326 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 7.6841ms
2025-03-26 02:29:00.327 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/auth/getuserprofilepicture - - - 204 - - 3.4910ms
2025-03-26 02:29:00.329 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:29:00.330 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:29:00.332 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 30.4921ms
2025-03-26 02:29:00.332 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.336 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:29:00.340 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
2025-03-26 02:29:00.342 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:29:00.344 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:29:00.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json -
2025-03-26 02:29:00.353 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:29:00.354 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.358 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.359 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:29:00.361 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 14.8265ms
2025-03-26 02:29:00.366 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
2025-03-26 02:29:00.367 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:29:00.368 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:29:00.369 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 39.4465ms
2025-03-26 02:29:00.371 +01:00 [INF] Route matched with {action = "CheckIfUserIsAdmin", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Boolean]] CheckIfUserIsAdmin(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:29:00.376 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Boolean, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.378 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps) in 4.2346ms
2025-03-26 02:29:00.379 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.CheckIfUserIsAdmin (JurMaps)'
2025-03-26 02:29:00.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json -
2025-03-26 02:29:00.380 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/checkifuserisadmin application/json - - 200 - application/json;+charset=utf-8 27.5901ms
2025-03-26 02:29:00.381 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:00.384 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-03-26 02:29:00.389 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '24.03.2025 16:08:35', Current time (UTC): '26.03.2025 01:29:00'.
2025-03-26 02:29:00.390 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:29:00.391 +01:00 [INF] Route matched with {action = "GetUserProfilePicture", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.String]] GetUserProfilePicture(System.String) on controller JurMaps.Controllers.AuthController (JurMaps).
2025-03-26 02:29:00.400 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."UserId", t."IsVerified", t."LastVerificationEmailSent", t."ResetPasswordToken", t."ResetPasswordTokenExpiration", t."UserCreatedDate", t."UserEmail", t."UserName", t."UserPassword", t."UserProfilePicture", t."UserRoleId", t."VerificationToken", t."VerificationTokenExpiration", m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
FROM (
    SELECT u."UserId", u."IsVerified", u."LastVerificationEmailSent", u."ResetPasswordToken", u."ResetPasswordTokenExpiration", u."UserCreatedDate", u."UserEmail", u."UserName", u."UserPassword", u."UserProfilePicture", u."UserRoleId", u."VerificationToken", u."VerificationTokenExpiration"
    FROM "Users" AS u
    WHERE u."UserId" = @__userId_0
    LIMIT 1
) AS t
LEFT JOIN "Maps" AS m ON t."UserId" = m."MapCreatorId"
ORDER BY t."UserId"
2025-03-26 02:29:00.403 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:00.405 +01:00 [INF] Executed action JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps) in 12.7315ms
2025-03-26 02:29:00.407 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.AuthController.GetUserProfilePicture (JurMaps)'
2025-03-26 02:29:00.407 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/auth/getuserprofilepicture application/json - - 200 - application/json;+charset=utf-8 27.9378ms
2025-03-26 02:29:01.585 +01:00 [INF] Executed DbCommand (1,310ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:29:01.630 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:01.643 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 1396.1552ms
2025-03-26 02:29:01.644 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:29:01.644 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/135 application/json -
2025-03-26 02:29:01.645 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/135 application/json - - 200 - application/json;+charset=utf-8 1418.2861ms
2025-03-26 02:29:01.646 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:01.648 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:29:01.649 +01:00 [INF] Route matched with {action = "GetMapMarkers", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Collections.Generic.List`1[JurMaps.Model.DTO.MarkerDto]]] GetMapMarkers(Int32) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:29:01.664 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:29:01.667 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Collections.Generic.List`1[[JurMaps.Model.DTO.MarkerDto, JurMaps, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:01.668 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps) in 18.4136ms
2025-03-26 02:29:01.669 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.GetMapMarkers (JurMaps)'
2025-03-26 02:29:01.670 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/createmap/getmapmarkers/135 application/json - - 200 - application/json;+charset=utf-8 25.9744ms
2025-03-26 02:29:28.994 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/135 - -
2025-03-26 02:29:28.995 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:28.996 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/createmap/addmarker/135 - - - 204 - - 1.8436ms
2025-03-26 02:29:28.997 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 103
2025-03-26 02:29:28.998 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:28.999 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:29.004 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:29:29.049 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:29:29.091 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:29:29.116 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:29:29.119 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:29.120 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 115.374ms
2025-03-26 02:29:29.121 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:29.122 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 103 - 200 - application/json;+charset=utf-8 125.1977ms
2025-03-26 02:29:31.580 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 102
2025-03-26 02:29:31.581 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:31.581 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:31.583 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:29:31.589 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:29:31.612 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:29:31.616 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:29:31.618 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:31.620 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 35.256ms
2025-03-26 02:29:31.621 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:31.621 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 102 - 200 - application/json;+charset=utf-8 41.2764ms
2025-03-26 02:29:33.300 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 100
2025-03-26 02:29:33.300 +01:00 [INF] CORS policy execution successful.
2025-03-26 02:29:33.301 +01:00 [INF] Executing endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:33.302 +01:00 [INF] Route matched with {action = "AddMarker", controller = "CreateMap"}. Executing controller action with signature System.Threading.Tasks.Task`1[ControllerResult`1[System.Int32]] AddMarker(Int32, JurMaps.Model.DTO.MarkerDto) on controller JurMaps.Controllers.CreateMapController (JurMaps).
2025-03-26 02:29:33.307 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__mapId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."MapId", t."MapCreationDate", t."MapCreatorId", t."MapDescription", t."MapLikes", t."MapName", t."MapPlacesQuantity", t."MapPublicationDate", t."MapThumbnail", t."MapUploaded", p."PlaceId", p."MapId", p."PlaceColor", p."PlaceCountry", p."PlaceDescription", p."PlaceName", p."PlacePhoto1", p."PlacePhoto2", p."PlacePhoto3", p."PlacePosition", p."PlaceType"
FROM (
    SELECT m."MapId", m."MapCreationDate", m."MapCreatorId", m."MapDescription", m."MapLikes", m."MapName", m."MapPlacesQuantity", m."MapPublicationDate", m."MapThumbnail", m."MapUploaded"
    FROM "Maps" AS m
    WHERE m."MapId" = @__mapId_0
    LIMIT 1
) AS t
LEFT JOIN "Places" AS p ON t."MapId" = p."MapId"
ORDER BY t."MapId"
2025-03-26 02:29:33.312 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Places" ("MapId", "PlaceColor", "PlaceCountry", "PlaceDescription", "PlaceName", "PlacePhoto1", "PlacePhoto2", "PlacePhoto3", "PlacePosition", "PlaceType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "PlaceId";
2025-03-26 02:29:33.316 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Maps" SET "MapCreationDate" = @p0, "MapCreatorId" = @p1, "MapDescription" = @p2, "MapLikes" = @p3, "MapName" = @p4, "MapPlacesQuantity" = @p5, "MapPublicationDate" = @p6, "MapThumbnail" = @p7, "MapUploaded" = @p8
WHERE "MapId" = @p9;
2025-03-26 02:29:33.319 +01:00 [INF] Executing ObjectResult, writing value of type 'ControllerResult`1[[System.Int32, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-26 02:29:33.320 +01:00 [INF] Executed action JurMaps.Controllers.CreateMapController.AddMarker (JurMaps) in 17.3279ms
2025-03-26 02:29:33.321 +01:00 [INF] Executed endpoint 'JurMaps.Controllers.CreateMapController.AddMarker (JurMaps)'
2025-03-26 02:29:33.322 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/createmap/addmarker/135 application/json 100 - 200 - application/json;+charset=utf-8 22.2072ms
